(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3156:function(e,a,t){Promise.resolve().then(t.bind(t,3972))},3972:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return n}});var o=t(7437),r=t(2265);let i=[{id:"auth-register",group:"Auth",method:"POST",path:"/api/auth/register",title:"Register new user (admin-provisioned)",description:"SUPER_ADMIN (or authorized HR) can create a new login/staff account for a company. Multi-company aware: companyId is taken from the JWT token.",auth:"Authorization: Bearer <SUPER_ADMIN token>",input:'JSON body: { email, firstName, lastName, role ("HR" | "STAFF" | "SUPER_ADMIN"), department?, position? }',output:"JSON: { success, message, data: { user: { id, email, firstName, lastName, role, department, position, companyId } } }"},{id:"auth-complete-registration",group:"Auth",method:"POST",path:"/api/auth/complete-registration",title:"Staff complete registration",description:"First-time staff self-service registration. Staff enters staffId, email, and password. System validates against StaffRecord for a specific company and enables login.",auth:"No auth required",input:"JSON body: { staffId, email, password }",output:"JSON: { success, message, data: { token, user: { id, staffId, email, firstName, lastName, department, position, role, companyId } } }"},{id:"auth-login",group:"Auth",method:"POST",path:"/api/auth/login",title:"User login",description:"Logs in a staff / HR / SUPER_ADMIN account with email and password. Returns a JWT containing companyId so all requests are auto-scoped per company.",auth:"No auth required",input:"JSON body: { email, password }",output:"JSON: { success, message, data: { token, user: { id, staffId?, email, firstName, lastName, role, department?, position?, companyId }, company?: { id, companyName, email, phone } } }"},{id:"auth-me",group:"Auth",method:"GET",path:"/api/auth/me",title:"Get current user",description:"Returns the authenticated user and company based on the JWT. Multi-company aware: companyId is read from token.",auth:"Authorization: Bearer <token>",input:"No body",output:"JSON: { success, message, data: { user: { id, staffId?, email, firstName, lastName, role, companyId }, company?: { id, companyName, email, phone } } }"},{id:"staff-upload",group:"Staff",method:"POST",path:"/api/staff/upload",title:"Upload staff records",description:"HR uploads staff master data from Excel to create or update StaffRecord rows for the current company. The company is taken from the JWT (companyId).",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"multipart/form-data: file = .xlsx staff template (company-scoped via JWT companyId)",output:"JSON: { success, message, data: { uploadId, companyId, summary: { totalRecords, successful, failed }, errors?: [ { rowNumber, message } ] } }"},{id:"staff-records",group:"Staff",method:"GET",path:"/api/staff/records",title:"List staff records",description:"Returns a paginated list of staff records for the authenticated user’s company. Multi-company aware via JWT companyId.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"Optional query: page, pageSize, search",output:"JSON: { success, message, data: { companyId, items: [ { id, staffId, firstName, lastName, email, department, position, phone?, bankName?, accountNumber?, isActive } ], pagination: { page, pageSize, total } } }"},{id:"payroll-upload-post",group:"Payroll",method:"POST",path:"/api/payroll/upload",title:"Upload payroll and generate payslips",description:"HR uploads payroll Excel/CSV for one company. System parses rows, creates/updates Payroll entries, generates payslip PDFs (Payslip table), optionally sends notification emails, and records failed rows in PayrollUpload. Multi-company aware via JWT companyId.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:'multipart/form-data: file = .xlsx or .csv payroll file, sendEmails = "true" | "false"',output:"JSON: { success, message, data: { uploadId, companyId, results: { successful, failed, payslipsGenerated, emailsSent, errors: [ { rowNumber, message } ] }, summary: { totalProcessed, successful, failed, payslipsGenerated, emailsSent }, failedRecordsDownload?: string } }"},{id:"payroll-upload-get",group:"Payroll",method:"GET",path:"/api/payroll/upload",title:"Download payroll template",description:"Returns the standard payroll Excel template that HR should populate and upload for the current company.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token> (recommended)",input:"No body",output:"Excel file (.xlsx)"},{id:"payroll-download-failed",group:"Payroll",method:"GET",path:"/api/payroll/download-failed/[id]",title:"Download failed payroll records",description:"Downloads the Excel file containing all rows that could not be processed for a given PayrollUpload batch. Enforced by companyId from JWT.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"Path param: id = PayrollUpload.id",output:"Excel file (.xlsx) of failed rows, or JSON error if not found or not owned by your company."},{id:"profile-payslips",group:"Payslip & Profile",method:"GET",path:"/api/profile/payslips",title:"Get payslip history for logged-in staff",description:"Returns all payslips belonging to the authenticated staff member for their current company. Ideal for the staff self-service profile page.",auth:"Authorization: Bearer <STAFF | HR | SUPER_ADMIN token>",input:"No body",output:"JSON: { success, message, data: { staffId, email, companyId, payslips: [ { id, payrollId, month, year, grossPay, netPay, createdAt, fileName, downloadUrl } ] } }"},{id:"payslip-download",group:"Payslip & Profile",method:"GET",path:"/api/payslips/[id]/download",title:"Download a payslip PDF",description:"Streams a single payslip PDF. Staff can only download their own payslips for their company; HR/SUPER_ADMIN can download any payslip within their company.",auth:"Authorization: Bearer <token>",input:"Path param: id = Payslip.id",output:"PDF file (Content-Type: application/pdf) or JSON error if unauthorized or not in the same company."}];function n(){var e,a,t,n;let s=(0,r.useMemo)(()=>Array.from(i.reduce((e,a)=>(e.has(a.group)||e.set(a.group,[]),e.get(a.group).push(a),e),new Map)),[]),[l,d]=(0,r.useState)(null!==(a=null===(e=i[0])||void 0===e?void 0:e.id)&&void 0!==a?a:""),p=null!==(t=i.find(e=>e.id===l))&&void 0!==t?t:i[0],[u,c]=(0,r.useState)(null!==(n=null==p?void 0:p.path)&&void 0!==n?n:""),[m,h]=(0,r.useState)(""),[f,y]=(0,r.useState)((null==p?void 0:p.method)==="POST"?'{\n  "example": "value"\n}':""),[g,x]=(0,r.useState)(""),[S,b]=(0,r.useState)(!1),[R,v]=(0,r.useState)(null),T=e=>{let a=i.find(a=>a.id===e);d(e),a&&(c(a.path),"POST"===a.method?y('{ "example": "value" }'):y(""),x(""),v(null))},P=async()=>{if(p){b(!0),x(""),v(null);try{let e=u||p.path,a={};"POST"===p.method&&(a["Content-Type"]="application/json"),m.trim()&&(a.Authorization="Bearer ".concat(m.trim()));let t={method:p.method,headers:a};"POST"===p.method&&f.trim().length>0&&(t.body=f);let o=await fetch(e,t);if((o.headers.get("content-type")||"").includes("application/json")){let e=await o.json();x(JSON.stringify(e,null,2))}else{let e=await o.text();x(e)}o.ok||v("HTTP ".concat(o.status," – ").concat(o.statusText))}catch(e){v((null==e?void 0:e.message)||"Request failed")}finally{b(!1)}}};return(0,o.jsxs)("div",{style:{padding:"2rem",fontFamily:"Arial, sans-serif"},children:[(0,o.jsx)("h1",{children:"\uD83D\uDE80 HRMS Backend System"}),(0,o.jsxs)("p",{children:["Your HR Management System backend is running. APIs are company-aware and use",(0,o.jsx)("code",{children:" companyId"})," from the JWT for scoping."]}),(0,o.jsxs)("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:[(0,o.jsx)("h2",{children:"\uD83D\uDCCB Available API Endpoints (from apiDocs.ts)"}),s.map(e=>{let[a,t]=e;return(0,o.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"Auth"===a?"#f0f4ff":"Staff"===a?"#e8f4ff":"Payroll"===a?"#fff7e6":"#e8f5e8",borderRadius:"8px"},children:[(0,o.jsxs)("h3",{children:[a," APIs"]}),(0,o.jsx)("ul",{children:t.map(e=>(0,o.jsxs)("li",{style:{marginBottom:"0.75rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("strong",{children:e.method})," ",(0,o.jsx)("code",{children:e.path})," – ",e.title]}),(0,o.jsxs)("div",{style:{fontSize:"0.9rem",marginLeft:"1rem"},children:[(0,o.jsx)("div",{children:e.description}),e.auth&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:600},children:"Auth:"})," ",e.auth]}),e.input&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:600},children:"Input:"})," ",e.input]}),e.output&&(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:600},children:"Output:"})," ",e.output]})]})]},e.id))})]},a)})]}),(0,o.jsxs)("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#1e293b",color:"white",borderRadius:"8px"},children:[(0,o.jsx)("h2",{children:"\uD83E\uDDEA Try It – Test an API"}),(0,o.jsxs)("p",{style:{fontSize:"0.9rem",opacity:.9},children:["Pick an endpoint, enter a token (if needed), edit the path or body, and send a live request. On localhost this hits"," ",(0,o.jsx)("code",{children:"http://localhost:3000"}),". On Render it uses whatever host this page is deployed on (e.g. ",(0,o.jsx)("code",{children:"https://hrms-backend.onrender.com"}),")."]}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Endpoint"}),(0,o.jsx)("select",{value:l,onChange:e=>T(e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px"},children:i.map(e=>(0,o.jsxs)("option",{value:e.id,children:["[",e.group,"] ",e.method," ",e.path," – ",e.title]},e.id))})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem",flexWrap:"wrap"},children:[(0,o.jsxs)("div",{style:{minWidth:"90px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Method"}),(0,o.jsx)("input",{value:(null==p?void 0:p.method)||"",readOnly:!0,style:{width:"100%",padding:"0.5rem",borderRadius:"4px",backgroundColor:"#0f172a",color:"white",border:"1px solid #475569"}})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Path (edit for [id] etc.)"}),(0,o.jsx)("input",{value:u,onChange:e=>c(e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #475569",backgroundColor:"#0f172a",color:"white"}})]})]}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Authorization Token (optional)"}),(0,o.jsx)("input",{value:m,onChange:e=>h(e.target.value),placeholder:"Paste JWT token here (without 'Bearer ')",style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #475569",backgroundColor:"#0f172a",color:"white"}}),(0,o.jsxs)("div",{style:{fontSize:"0.8rem",opacity:.7,marginTop:"0.25rem"},children:["If provided, request will send:"," ",(0,o.jsx)("code",{children:"Authorization: Bearer <token>"})]})]}),(null==p?void 0:p.method)==="POST"&&(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Request Body (JSON)"}),(0,o.jsx)("textarea",{value:f,onChange:e=>y(e.target.value),rows:8,style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #475569",backgroundColor:"#0f172a",color:"white",fontFamily:"monospace"}}),(0,o.jsx)("div",{style:{fontSize:"0.8rem",opacity:.7,marginTop:"0.25rem"},children:"This is sent as raw JSON. Make sure it’s valid JSON for your endpoint."})]}),(0,o.jsx)("div",{style:{marginTop:"1rem"},children:(0,o.jsx)("button",{onClick:P,disabled:S,style:{padding:"0.5rem 1.25rem",borderRadius:"999px",border:"none",backgroundColor:S?"#64748b":"#22c55e",color:"black",fontWeight:600,cursor:S?"default":"pointer"},children:S?"Sending...":"Send Request"})}),R&&(0,o.jsx)("div",{style:{marginTop:"0.75rem",padding:"0.5rem",borderRadius:"4px",backgroundColor:"#7f1d1d",color:"#fee2e2",fontSize:"0.85rem"},children:R}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Response"}),(0,o.jsx)("pre",{style:{backgroundColor:"#0f172a",color:"#e5e7eb",padding:"0.75rem",borderRadius:"4px",minHeight:"120px",maxHeight:"400px",overflow:"auto",fontSize:"0.85rem"},children:g||"// Send a request to see the response here"})]})]}),(0,o.jsxs)("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#e8f5e8",borderRadius:"8px"},children:[(0,o.jsx)("h2",{children:"✅ System Status: Running"}),(0,o.jsx)("p",{children:"All core API endpoints are available, multi-company aware, and ready to use."}),(0,o.jsx)("p",{children:"Use this page, Postman, Thunder Client, or curl to test locally or on Render."})]}),(0,o.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,o.jsx)("h3",{children:"\uD83D\uDD27 Quick Test Commands"}),(0,o.jsx)("pre",{style:{backgroundColor:"#2d2d2d",color:"white",padding:"1rem",borderRadius:"4px",overflowX:"auto"},children:'# ============================\n# AUTH LOGIN (LOCALHOST)\n# ============================\ncurl -X POST http://localhost:3000/api/auth/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{"email": "admin@company.com", "password": "admin123"}\'\n\n# ============================\n# AUTH LOGIN (RENDER)\n# ============================\ncurl -X POST https://hrms-backend.onrender.com/api/auth/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{"email": "admin@company.com", "password": "admin123"}\'\n\n\n# ============================\n# PAYROLL UPLOAD (LOCALHOST)\n# ============================\ncurl -X POST http://localhost:3000/api/payroll/upload \\\n  -H "Authorization: Bearer <HR_OR_ADMIN_TOKEN>" \\\n  -F "file=@PAYROLL_FILE.xlsx" \\\n  -F "sendEmails=true"\n\n# ============================\n# PAYROLL UPLOAD (RENDER)\n# ============================\ncurl -X POST https://hrms-backend.onrender.com/api/payroll/upload \\\n  -H "Authorization: Bearer <HR_OR_ADMIN_TOKEN>" \\\n  -F "file=@PAYROLL_FILE.xlsx" \\\n  -F "sendEmails=true"'})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3156)}),_N_E=e.O()}]);