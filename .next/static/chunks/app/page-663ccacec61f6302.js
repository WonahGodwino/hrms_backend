(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3156:function(e,t,o){Promise.resolve().then(o.bind(o,3972))},3972:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return n}});var a=o(7437),r=o(2265);let i=[{id:"auth-register",group:"Auth",method:"POST",path:"/api/auth/register",title:"Register new user (admin-provisioned)",description:"SUPER_ADMIN (or authorized HR) can create a new login/staff account for a company. Multi-company aware: companyId is taken from the JWT token.",auth:"Authorization: Bearer <SUPER_ADMIN token>",input:'JSON body: { email, firstName, lastName, role ("HR" | "STAFF" | "SUPER_ADMIN"), department?, position? }',output:"JSON: { success, message, data: { user: { id, email, firstName, lastName, role, department, position, companyId } } }"},{id:"auth-complete-registration",group:"Auth",method:"POST",path:"/api/auth/complete-registration",title:"Staff complete registration",description:"First-time staff self-service registration. Staff enters staffId, email, and password. System validates against StaffRecord for a specific company and enables login.",auth:"No auth required",input:"JSON body: { staffId, email, password }",output:"JSON: { success, message, data: { token, user: { id, staffId, email, firstName, lastName, department, position, role, companyId } } }"},{id:"auth-login",group:"Auth",method:"POST",path:"/api/auth/login",title:"User login",description:"Logs in a staff / HR / SUPER_ADMIN account with email and password. Returns a JWT containing companyId so all requests are auto-scoped per company.",auth:"No auth required",input:"JSON body: { email, password }",output:"JSON: { success, message, data: { token, user: { id, staffId?, email, firstName, lastName, role, department?, position?, companyId }, company?: { id, companyName, email, phone } } }"},{id:"auth-me",group:"Auth",method:"GET",path:"/api/auth/me",title:"Get current user",description:"Returns the authenticated user and company based on the JWT. Multi-company aware: companyId is read from token.",auth:"Authorization: Bearer <token>",input:"No body",output:"JSON: { success, message, data: { user: { id, staffId?, email, firstName, lastName, role, companyId }, company?: { id, companyName, email, phone } } }"},{id:"staff-upload",group:"Staff",method:"POST",path:"/api/staff/upload",title:"Upload staff records",description:"HR uploads staff master data from Excel to create or update StaffRecord rows for the current company. The company is taken from the JWT (companyId).",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"multipart/form-data: file = .xlsx staff template (company-scoped via JWT companyId)",output:"JSON: { success, message, data: { uploadId, companyId, summary: { totalRecords, successful, failed }, errors?: [ { rowNumber, message } ] } }"},{id:"staff-records",group:"Staff",method:"GET",path:"/api/staff/records",title:"List staff records",description:"Returns a paginated list of staff records for the authenticated user’s company. Multi-company aware via JWT companyId.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"Optional query: page, pageSize, search",output:"JSON: { success, message, data: { companyId, items: [ { id, staffId, firstName, lastName, email, department, position, phone?, bankName?, accountNumber?, isActive } ], pagination: { page, pageSize, total } } }"},{id:"payroll-upload-post",group:"Payroll",method:"POST",path:"/api/payroll/upload",title:"Upload payroll and generate payslips",description:"HR uploads payroll Excel/CSV for one company. System parses rows, creates/updates Payroll entries, generates payslip PDFs (Payslip table), optionally sends notification emails, and records failed rows in PayrollUpload. Multi-company aware via JWT companyId.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:'multipart/form-data: file = .xlsx or .csv payroll file, sendEmails = "true" | "false"',output:"JSON: { success, message, data: { uploadId, companyId, results: { successful, failed, payslipsGenerated, emailsSent, errors: [ { rowNumber, message } ] }, summary: { totalProcessed, successful, failed, payslipsGenerated, emailsSent }, failedRecordsDownload?: string } }"},{id:"payroll-upload-get",group:"Payroll",method:"GET",path:"/api/payroll/upload",title:"Download payroll template",description:"Returns the standard payroll Excel template that HR should populate and upload for the current company.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token> (recommended)",input:"No body",output:"Excel file (.xlsx)"},{id:"payroll-download-failed",group:"Payroll",method:"GET",path:"/api/payroll/download-failed/[id]",title:"Download failed payroll records",description:"Downloads the Excel file containing all rows that could not be processed for a given PayrollUpload batch. Enforced by companyId from JWT.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"Path param: id = PayrollUpload.id",output:"Excel file (.xlsx) of failed rows, or JSON error if not found or not owned by your company."},{id:"profile-payslips",group:"Payslip & Profile",method:"GET",path:"/api/profile/payslips",title:"Get payslip history for logged-in staff",description:"Returns all payslips belonging to the authenticated staff member for their current company. Ideal for the staff self-service profile page.",auth:"Authorization: Bearer <STAFF | HR | SUPER_ADMIN token>",input:"No body",output:"JSON: { success, message, data: { staffId, email, companyId, payslips: [ { id, payrollId, month, year, grossPay, netPay, createdAt, fileName, downloadUrl } ] } }"},{id:"payslip-download",group:"Payslip & Profile",method:"GET",path:"/api/payslips/[id]/download",title:"Download a payslip PDF",description:"Streams a single payslip PDF. Staff can only download their own payslips for their company; HR/SUPER_ADMIN can download any payslip within their company.",auth:"Authorization: Bearer <token>",input:"Path param: id = Payslip.id",output:"PDF file (Content-Type: application/pdf) or JSON error if unauthorized or not in the same company."}];function n(){var e,t,o,n;let s=(0,r.useMemo)(()=>Array.from(i.reduce((e,t)=>(e.has(t.group)||e.set(t.group,[]),e.get(t.group).push(t),e),new Map)),[]),[d,l]=(0,r.useState)(null!==(t=null===(e=i[0])||void 0===e?void 0:e.id)&&void 0!==t?t:""),p=null!==(o=i.find(e=>e.id===d))&&void 0!==o?o:i[0],[m,c]=(0,r.useState)(null!==(n=null==p?void 0:p.path)&&void 0!==n?n:""),[u,h]=(0,r.useState)(""),[f,y]=(0,r.useState)((null==p?void 0:p.method)==="POST"?(null==p?void 0:p.sample)?JSON.stringify(p.sample,null,2):(null==p?void 0:p.input)?"// Expected input:\n// ".concat(p.input,"\n\n{ }"):"{ }":""),[g,x]=(0,r.useState)(""),[b,S]=(0,r.useState)(!1),[j,w]=(0,r.useState)(null),[v,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("hrms_token");e&&h(e)},[]),(0,r.useEffect)(()=>{u&&localStorage.setItem("hrms_token",u)},[u]);let k=e=>{let t=i.find(t=>t.id===e);l(e),t&&(c(t.path),"POST"===t.method?y(t.sample?JSON.stringify(t.sample,null,2):t.input?"// Expected input:\n// ".concat(t.input,"\n\n{ }"):"{ }"):y(""),x(""),w(null),R(!1))},T=async()=>{if(p){S(!0),x(""),w(null);try{var e;let t={};"POST"===p.method&&(t["Content-Type"]="application/json"),u.trim()&&(t.Authorization="Bearer ".concat(u.trim()));let o={method:p.method,headers:t};"POST"===p.method&&f.trim()&&(o.body=f);let a=await fetch(m,o),r=a.headers.get("content-type")||"",n=null;if(r.includes("application/json"))n=await a.json(),x(JSON.stringify(n,null,2));else{let e=await a.text();x(e)}if(p.path.includes("/api/auth/login")&&a.ok&&(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.token)){h(n.data.token),R(!0);let e=i.find(e=>e.path.includes("/api/auth/me"));e&&(l(e.id),c(e.path))}a.ok||w("HTTP ".concat(a.status," – ").concat(a.statusText))}catch(e){w((null==e?void 0:e.message)||"Request failed")}finally{S(!1)}}};return(0,a.jsxs)("div",{style:{minHeight:"100vh",background:"#020617",color:"#e5e7eb",padding:"1.5rem",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif'},children:[(0,a.jsxs)("header",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("h1",{style:{fontSize:"1.9rem",marginBottom:"0.25rem"},children:"HRMS Backend API Console"}),(0,a.jsx)("p",{style:{opacity:.8,maxWidth:"640px"},children:"Browse your backend endpoints, see what they expect, and fire real requests using your JWT – all from inside the app."})]}),(0,a.jsxs)("div",{style:{marginBottom:"1rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,a.jsx)("span",{style:{padding:"0.35rem 0.75rem",borderRadius:"999px",fontSize:"0.85rem",fontWeight:600,backgroundColor:u?"#22c55e33":"#7f1d1d",color:u?"#22c55e":"#fee2e2",border:u?"1px solid #22c55e55":"1px solid #fecaca55"},children:u?"JWT token loaded":"No token stored"}),v&&(0,a.jsx)("span",{style:{padding:"0.35rem 0.75rem",borderRadius:"999px",fontSize:"0.85rem",fontWeight:600,backgroundColor:"#0f766e",border:"1px solid #14b8a6",color:"#ccfbf1"},children:"Login successful – token saved from /auth/login"})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(260px, 360px) minmax(0, 1fr)",gap:"1.5rem"},children:[(0,a.jsxs)("aside",{style:{background:"#020617",borderRadius:"0.75rem",border:"1px solid #1e293b",padding:"1rem",maxHeight:"calc(100vh - 160px)",overflow:"auto"},children:[(0,a.jsx)("h2",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:"API Endpoints"}),(0,a.jsx)("p",{style:{fontSize:"0.85rem",opacity:.7,marginBottom:"0.75rem"},children:"Click an endpoint to view details and send a test request."}),s.map(e=>{let[t,o]=e;return(0,a.jsxs)("section",{style:{marginTop:"1rem"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.35rem"},children:[(0,a.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:600},children:t}),"Auth"!==t&&(0,a.jsx)("span",{style:{fontSize:"0.7rem",padding:"0.15rem 0.45rem",borderRadius:"999px",backgroundColor:"#0f172a",border:"1px solid #1f2937",opacity:.9},children:"Protected"})]}),(0,a.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:o.map(e=>{let t=e.id===d,o="GET"===e.method?"#22c55e":"#f97316";return(0,a.jsxs)("li",{onClick:()=>k(e.id),style:{marginBottom:"0.4rem",cursor:"pointer",borderRadius:"0.5rem",padding:"0.5rem 0.55rem",backgroundColor:t?"#0f172a":"transparent",border:t?"1px solid #38bdf8":"1px solid transparent",display:"flex",flexDirection:"column",gap:"0.15rem"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem"},children:[(0,a.jsx)("span",{style:{fontSize:"0.7rem",padding:"0.1rem 0.45rem",borderRadius:"999px",backgroundColor:o+"22",color:o,border:"1px solid ".concat(o,"55"),fontWeight:600},children:e.method}),(0,a.jsx)("code",{style:{fontSize:"0.75rem",background:"#020617",padding:"0.1rem 0.35rem",borderRadius:"0.25rem",border:"1px solid #111827"},children:e.path})]}),(0,a.jsx)("span",{style:{fontSize:"0.78rem",opacity:.8},children:e.title})]},e.id)})})]},t)})]}),(0,a.jsxs)("main",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[p&&(0,a.jsxs)("section",{style:{background:"#020617",borderRadius:"0.75rem",border:"1px solid #1e293b",padding:"1rem"},children:[(0,a.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"1rem",marginBottom:"0.75rem"},children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,a.jsx)("span",{style:{fontSize:"0.8rem",padding:"0.15rem 0.55rem",borderRadius:"999px",background:"GET"===p.method?"#22c55e33":"#f9731633",border:"GET"===p.method?"1px solid #22c55e55":"1px solid #f9731655",color:"GET"===p.method?"#22c55e":"#f97316",fontWeight:600},children:p.method}),(0,a.jsx)("code",{style:{fontSize:"0.8rem",padding:"0.1rem 0.45rem",borderRadius:"999px",backgroundColor:"#020617",border:"1px solid #1f2937"},children:p.path}),(0,a.jsxs)("span",{style:{fontSize:"0.75rem",padding:"0.1rem 0.45rem",borderRadius:"999px",backgroundColor:"#0f172a",border:"1px solid #1f2937",opacity:.9},children:["Group: ",p.group]})]}),(0,a.jsx)("h2",{style:{marginTop:"0.6rem",fontSize:"1.1rem"},children:p.title})]})}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 1.4fr)",gap:"1rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Description"}),(0,a.jsx)("p",{style:{fontSize:"0.85rem",opacity:.85},children:p.description}),p.auth&&(0,a.jsxs)("div",{style:{marginTop:"0.6rem"},children:[(0,a.jsx)("h3",{style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Auth"}),(0,a.jsx)("code",{style:{fontSize:"0.75rem",display:"block",padding:"0.5rem",borderRadius:"0.4rem",backgroundColor:"#020617",border:"1px solid #1f2937",whiteSpace:"pre-wrap"},children:p.auth})]})]}),(0,a.jsxs)("div",{children:[p.input&&(0,a.jsxs)("div",{style:{marginBottom:"0.75rem"},children:[(0,a.jsx)("h3",{style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Expected Input"}),(0,a.jsx)("pre",{style:{fontSize:"0.75rem",padding:"0.5rem",borderRadius:"0.4rem",backgroundColor:"#020617",border:"1px solid #1f2937",whiteSpace:"pre-wrap",maxHeight:"150px",overflow:"auto"},children:p.input})]}),p.output&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{fontSize:"0.9rem",marginBottom:"0.25rem"},children:"Output Shape"}),(0,a.jsx)("pre",{style:{fontSize:"0.75rem",padding:"0.5rem",borderRadius:"0.4rem",backgroundColor:"#020617",border:"1px solid #1f2937",whiteSpace:"pre-wrap",maxHeight:"150px",overflow:"auto"},children:p.output})]})]})]})]}),(0,a.jsxs)("section",{style:{background:"#020617",borderRadius:"0.75rem",border:"1px solid #1e293b",padding:"1rem"},children:[(0,a.jsx)("h2",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Try this endpoint"}),(0,a.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,a.jsx)("label",{style:{fontSize:"0.8rem",opacity:.8},children:"Endpoint"}),(0,a.jsx)("select",{value:d,onChange:e=>k(e.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"0.4rem",backgroundColor:"#020617",color:"#e5e7eb",border:"1px solid #1f2937"},children:i.map(e=>(0,a.jsxs)("option",{value:e.id,children:["[",e.group,"] ",e.method," ",e.path," – ",e.title]},e.id))})]}),(0,a.jsxs)("div",{style:{marginTop:"0.75rem"},children:[(0,a.jsx)("label",{style:{fontSize:"0.8rem",opacity:.8},children:"Path"}),(0,a.jsx)("input",{value:m,onChange:e=>c(e.target.value),style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"0.4rem",backgroundColor:"#020617",color:"white",border:"1px solid #1f2937",fontFamily:"monospace"}})]}),(0,a.jsxs)("div",{style:{marginTop:"0.75rem"},children:[(0,a.jsx)("label",{style:{fontSize:"0.8rem",opacity:.8},children:"Authorization Token"}),(0,a.jsx)("input",{value:u,onChange:e=>h(e.target.value),placeholder:"Paste JWT (no 'Bearer')",style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"0.4rem",backgroundColor:"#020617",color:"white",border:"1px solid #1f2937",fontFamily:"monospace"}})]}),(null==p?void 0:p.method)==="POST"&&(0,a.jsxs)("div",{style:{marginTop:"0.75rem"},children:[(0,a.jsx)("label",{style:{fontSize:"0.8rem",opacity:.8},children:"Request Body (JSON)"}),(0,a.jsx)("textarea",{value:f,onChange:e=>y(e.target.value),rows:8,style:{width:"100%",padding:"0.5rem",marginTop:"0.25rem",borderRadius:"0.4rem",backgroundColor:"#020617",color:"white",border:"1px solid #1f2937",fontFamily:"monospace",fontSize:"0.85rem"}})]}),(0,a.jsxs)("div",{style:{marginTop:"1rem",display:"flex",gap:"0.75rem"},children:[(0,a.jsx)("button",{onClick:T,disabled:b,style:{padding:"0.6rem 1.4rem",borderRadius:"999px",backgroundColor:b?"#4b5563":"#22c55e",border:"none",fontWeight:700,cursor:b?"not-allowed":"pointer",color:"#020617"},children:b?"Sending…":"Send Request"}),v&&(0,a.jsx)("button",{onClick:()=>{let e=i.find(e=>e.path.includes("/api/auth/me"));e&&(l(e.id),c(e.path))},style:{padding:"0.6rem 1.4rem",borderRadius:"999px",backgroundColor:"#38bdf8",border:"none",fontWeight:700,cursor:"pointer",color:"#020617"},children:"View /auth/me ➜"})]}),j&&(0,a.jsx)("div",{style:{marginTop:"0.9rem",padding:"0.6rem",borderRadius:"0.4rem",backgroundColor:"#7f1d1d",color:"#fee2e2",fontSize:"0.85rem"},children:j}),(0,a.jsxs)("div",{style:{marginTop:"0.9rem"},children:[(0,a.jsx)("label",{style:{fontSize:"0.8rem",opacity:.8},children:"Response"}),(0,a.jsx)("pre",{style:{marginTop:"0.25rem",backgroundColor:"#020617",padding:"0.75rem",borderRadius:"0.4rem",minHeight:"130px",maxHeight:"320px",overflow:"auto",whiteSpace:"pre-wrap",border:"1px solid #1f2937",fontSize:"0.85rem"},children:g||"// Response will appear here"})]})]})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3156)}),_N_E=e.O()}]);