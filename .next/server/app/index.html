<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-100b9e646d9c912e.js"/><script src="/_next/static/chunks/fd9d1056-8a61572848a53694.js" async=""></script><script src="/_next/static/chunks/117-bb830e0230cded1f.js" async=""></script><script src="/_next/static/chunks/main-app-cfda79f48eabef02.js" async=""></script><script src="/_next/static/chunks/app/page-66bb8dceafde1e35.js" async=""></script><title>HRMS Backend System</title><meta name="description" content="Human Resource Management System Backend"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body style="margin:0;padding:0;background-color:#fff"><div style="padding:2rem;font-family:Arial, sans-serif"><h1>ðŸš€ HRMS Backend System</h1><p>Your HR Management System backend is running. APIs are company-aware and use<code> companyId</code> from the JWT for scoping.</p><div style="margin-top:2rem;padding:1rem;background-color:#f5f5f5;border-radius:8px"><h2>ðŸ“‹ Available API Endpoints (from apiDocs.ts)</h2><div style="margin-top:1.5rem;padding:1rem;background-color:#f0f4ff;border-radius:8px"><h3>Auth<!-- --> APIs</h3><ul><li style="margin-bottom:0.75rem"><div><strong>POST</strong> <code>/api/auth/register</code> â€“ <!-- -->Register new user (admin-provisioned)</div><div style="font-size:0.9rem;margin-left:1rem"><div>SUPER_ADMIN (or authorized HR) can create a new login/staff account for a company. Multi-company aware: companyId is taken from the JWT token.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;SUPER_ADMIN token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->JSON body: { email, firstName, lastName, role (&quot;HR&quot; | &quot;STAFF&quot; | &quot;SUPER_ADMIN&quot;), department?, position? }</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { user: { id, email, firstName, lastName, role, department, position, companyId } } }</div></div></li><li style="margin-bottom:0.75rem"><div><strong>POST</strong> <code>/api/auth/complete-registration</code> â€“ <!-- -->Staff complete registration</div><div style="font-size:0.9rem;margin-left:1rem"><div>First-time staff self-service registration. Staff enters staffId, email, and password. System validates against StaffRecord for a specific company and enables login.</div><div><span style="font-weight:600">Auth:</span> <!-- -->No auth required</div><div><span style="font-weight:600">Input:</span> <!-- -->JSON body: { staffId, email, password }</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { token, user: { id, staffId, email, firstName, lastName, department, position, role, companyId } } }</div></div></li><li style="margin-bottom:0.75rem"><div><strong>POST</strong> <code>/api/auth/login</code> â€“ <!-- -->User login</div><div style="font-size:0.9rem;margin-left:1rem"><div>Logs in a staff / HR / SUPER_ADMIN account with email and password. Returns a JWT containing companyId so all requests are auto-scoped per company.</div><div><span style="font-weight:600">Auth:</span> <!-- -->No auth required</div><div><span style="font-weight:600">Input:</span> <!-- -->JSON body: { email, password }</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { token, user: { id, staffId?, email, firstName, lastName, role, department?, position?, companyId }, company?: { id, companyName, email, phone } } }</div></div></li><li style="margin-bottom:0.75rem"><div><strong>GET</strong> <code>/api/auth/me</code> â€“ <!-- -->Get current user</div><div style="font-size:0.9rem;margin-left:1rem"><div>Returns the authenticated user and company based on the JWT. Multi-company aware: companyId is read from token.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->No body</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { user: { id, staffId?, email, firstName, lastName, role, companyId }, company?: { id, companyName, email, phone } } }</div></div></li></ul></div><div style="margin-top:1.5rem;padding:1rem;background-color:#e8f4ff;border-radius:8px"><h3>Staff<!-- --> APIs</h3><ul><li style="margin-bottom:0.75rem"><div><strong>POST</strong> <code>/api/staff/upload</code> â€“ <!-- -->Upload staff records</div><div style="font-size:0.9rem;margin-left:1rem"><div>HR uploads staff master data from Excel to create or update StaffRecord rows for the current company. The company is taken from the JWT (companyId).</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;HR | SUPER_ADMIN token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->multipart/form-data: file = .xlsx staff template (company-scoped via JWT companyId)</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { uploadId, companyId, summary: { totalRecords, successful, failed }, errors?: [ { rowNumber, message } ] } }</div></div></li><li style="margin-bottom:0.75rem"><div><strong>GET</strong> <code>/api/staff/records</code> â€“ <!-- -->List staff records</div><div style="font-size:0.9rem;margin-left:1rem"><div>Returns a paginated list of staff records for the authenticated userâ€™s company. Multi-company aware via JWT companyId.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;HR | SUPER_ADMIN token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->Optional query: page, pageSize, search</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { companyId, items: [ { id, staffId, firstName, lastName, email, department, position, phone?, bankName?, accountNumber?, isActive } ], pagination: { page, pageSize, total } } }</div></div></li></ul></div><div style="margin-top:1.5rem;padding:1rem;background-color:#fff7e6;border-radius:8px"><h3>Payroll<!-- --> APIs</h3><ul><li style="margin-bottom:0.75rem"><div><strong>POST</strong> <code>/api/payroll/upload</code> â€“ <!-- -->Upload payroll and generate payslips</div><div style="font-size:0.9rem;margin-left:1rem"><div>HR uploads payroll Excel/CSV for one company. System parses rows, creates/updates Payroll entries, generates payslip PDFs (Payslip table), optionally sends notification emails, and records failed rows in PayrollUpload. Multi-company aware via JWT companyId.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;HR | SUPER_ADMIN token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->multipart/form-data: file = .xlsx or .csv payroll file, sendEmails = &quot;true&quot; | &quot;false&quot;</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { uploadId, companyId, results: { successful, failed, payslipsGenerated, emailsSent, errors: [ { rowNumber, message } ] }, summary: { totalProcessed, successful, failed, payslipsGenerated, emailsSent }, failedRecordsDownload?: string } }</div></div></li><li style="margin-bottom:0.75rem"><div><strong>GET</strong> <code>/api/payroll/upload</code> â€“ <!-- -->Download payroll template</div><div style="font-size:0.9rem;margin-left:1rem"><div>Returns the standard payroll Excel template that HR should populate and upload for the current company.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;HR | SUPER_ADMIN token&gt; (recommended)</div><div><span style="font-weight:600">Input:</span> <!-- -->No body</div><div><span style="font-weight:600">Output:</span> <!-- -->Excel file (.xlsx)</div></div></li><li style="margin-bottom:0.75rem"><div><strong>GET</strong> <code>/api/payroll/download-failed/[id]</code> â€“ <!-- -->Download failed payroll records</div><div style="font-size:0.9rem;margin-left:1rem"><div>Downloads the Excel file containing all rows that could not be processed for a given PayrollUpload batch. Enforced by companyId from JWT.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;HR | SUPER_ADMIN token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->Path param: id = PayrollUpload.id</div><div><span style="font-weight:600">Output:</span> <!-- -->Excel file (.xlsx) of failed rows, or JSON error if not found or not owned by your company.</div></div></li></ul></div><div style="margin-top:1.5rem;padding:1rem;background-color:#e8f5e8;border-radius:8px"><h3>Payslip &amp; Profile<!-- --> APIs</h3><ul><li style="margin-bottom:0.75rem"><div><strong>GET</strong> <code>/api/profile/payslips</code> â€“ <!-- -->Get payslip history for logged-in staff</div><div style="font-size:0.9rem;margin-left:1rem"><div>Returns all payslips belonging to the authenticated staff member for their current company. Ideal for the staff self-service profile page.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;STAFF | HR | SUPER_ADMIN token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->No body</div><div><span style="font-weight:600">Output:</span> <!-- -->JSON: { success, message, data: { staffId, email, companyId, payslips: [ { id, payrollId, month, year, grossPay, netPay, createdAt, fileName, downloadUrl } ] } }</div></div></li><li style="margin-bottom:0.75rem"><div><strong>GET</strong> <code>/api/payslips/[id]/download</code> â€“ <!-- -->Download a payslip PDF</div><div style="font-size:0.9rem;margin-left:1rem"><div>Streams a single payslip PDF. Staff can only download their own payslips for their company; HR/SUPER_ADMIN can download any payslip within their company.</div><div><span style="font-weight:600">Auth:</span> <!-- -->Authorization: Bearer &lt;token&gt;</div><div><span style="font-weight:600">Input:</span> <!-- -->Path param: id = Payslip.id</div><div><span style="font-weight:600">Output:</span> <!-- -->PDF file (Content-Type: application/pdf) or JSON error if unauthorized or not in the same company.</div></div></li></ul></div></div><div style="margin-top:2rem;padding:1rem;background-color:#1e293b;color:white;border-radius:8px"><h2>ðŸ§ª Try It â€“ Test an API</h2><p style="font-size:0.9rem;opacity:0.9">Pick an endpoint, enter a token (if needed), edit the path or body, and send a live request. On localhost this hits<!-- --> <code>http://localhost:3000</code>. On Render it uses whatever host this page is deployed on (e.g. <code>https://hrms-backend.onrender.com</code>).</p><div style="margin-top:1rem"><label style="display:block;margin-bottom:0.25rem">Endpoint</label><select style="width:100%;padding:0.5rem;border-radius:4px"><option value="auth-register" selected="">[<!-- -->Auth<!-- -->] <!-- -->POST<!-- --> <!-- -->/api/auth/register<!-- --> â€“ <!-- -->Register new user (admin-provisioned)</option><option value="auth-complete-registration">[<!-- -->Auth<!-- -->] <!-- -->POST<!-- --> <!-- -->/api/auth/complete-registration<!-- --> â€“ <!-- -->Staff complete registration</option><option value="auth-login">[<!-- -->Auth<!-- -->] <!-- -->POST<!-- --> <!-- -->/api/auth/login<!-- --> â€“ <!-- -->User login</option><option value="auth-me">[<!-- -->Auth<!-- -->] <!-- -->GET<!-- --> <!-- -->/api/auth/me<!-- --> â€“ <!-- -->Get current user</option><option value="staff-upload">[<!-- -->Staff<!-- -->] <!-- -->POST<!-- --> <!-- -->/api/staff/upload<!-- --> â€“ <!-- -->Upload staff records</option><option value="staff-records">[<!-- -->Staff<!-- -->] <!-- -->GET<!-- --> <!-- -->/api/staff/records<!-- --> â€“ <!-- -->List staff records</option><option value="payroll-upload-post">[<!-- -->Payroll<!-- -->] <!-- -->POST<!-- --> <!-- -->/api/payroll/upload<!-- --> â€“ <!-- -->Upload payroll and generate payslips</option><option value="payroll-upload-get">[<!-- -->Payroll<!-- -->] <!-- -->GET<!-- --> <!-- -->/api/payroll/upload<!-- --> â€“ <!-- -->Download payroll template</option><option value="payroll-download-failed">[<!-- -->Payroll<!-- -->] <!-- -->GET<!-- --> <!-- -->/api/payroll/download-failed/[id]<!-- --> â€“ <!-- -->Download failed payroll records</option><option value="profile-payslips">[<!-- -->Payslip &amp; Profile<!-- -->] <!-- -->GET<!-- --> <!-- -->/api/profile/payslips<!-- --> â€“ <!-- -->Get payslip history for logged-in staff</option><option value="payslip-download">[<!-- -->Payslip &amp; Profile<!-- -->] <!-- -->GET<!-- --> <!-- -->/api/payslips/[id]/download<!-- --> â€“ <!-- -->Download a payslip PDF</option></select></div><div style="display:flex;gap:0.5rem;margin-top:1rem;flex-wrap:wrap"><div style="min-width:90px"><label style="display:block;margin-bottom:0.25rem">Method</label><input readOnly="" style="width:100%;padding:0.5rem;border-radius:4px;background-color:#0f172a;color:white;border:1px solid #475569" value="POST"/></div><div style="flex:1;min-width:200px"><label style="display:block;margin-bottom:0.25rem">Path (edit for [id] etc.)</label><input style="width:100%;padding:0.5rem;border-radius:4px;border:1px solid #475569;background-color:#0f172a;color:white" value="/api/auth/register"/></div></div><div style="margin-top:1rem"><label style="display:block;margin-bottom:0.25rem">Authorization Token (optional)</label><input placeholder="Paste JWT token here (without &#x27;Bearer &#x27;)" style="width:100%;padding:0.5rem;border-radius:4px;border:1px solid #475569;background-color:#0f172a;color:white" value=""/><div style="font-size:0.8rem;opacity:0.7;margin-top:0.25rem">If provided, request will send:<!-- --> <code>Authorization: Bearer &lt;token&gt;</code></div></div><div style="margin-top:1rem"><label style="display:block;margin-bottom:0.25rem">Request Body (JSON)</label><textarea rows="8" style="width:100%;padding:0.5rem;border-radius:4px;border:1px solid #475569;background-color:#0f172a;color:white;font-family:monospace">{
  &quot;example&quot;: &quot;value&quot;
}</textarea><div style="font-size:0.8rem;opacity:0.7;margin-top:0.25rem">This is sent as raw JSON. Make sure itâ€™s valid JSON for your endpoint.</div></div><div style="margin-top:1rem"><button style="padding:0.5rem 1.25rem;border-radius:999px;border:none;background-color:#22c55e;color:black;font-weight:600;cursor:pointer">Send Request</button></div><div style="margin-top:1rem"><label style="display:block;margin-bottom:0.25rem">Response</label><pre style="background-color:#0f172a;color:#e5e7eb;padding:0.75rem;border-radius:4px;min-height:120px;max-height:400px;overflow:auto;font-size:0.85rem">// Send a request to see the response here</pre></div></div><div style="margin-top:2rem;padding:1rem;background-color:#e8f5e8;border-radius:8px"><h2>âœ… System Status: Running</h2><p>All core API endpoints are available, multi-company aware, and ready to use.</p><p>Use this page, Postman, Thunder Client, or curl to test locally or on Render.</p></div><div style="margin-top:2rem"><h3>ðŸ”§ Quick Test Commands</h3><pre style="background-color:#2d2d2d;color:white;padding:1rem;border-radius:4px;overflow-x:auto"># ============================
# AUTH LOGIN (LOCALHOST)
# ============================
curl -X POST http://localhost:3000/api/auth/login \
  -H &quot;Content-Type: application/json&quot; \
  -d &#x27;{&quot;email&quot;: &quot;admin@company.com&quot;, &quot;password&quot;: &quot;admin123&quot;}&#x27;

# ============================
# AUTH LOGIN (RENDER)
# ============================
curl -X POST https://hrms-backend.onrender.com/api/auth/login \
  -H &quot;Content-Type: application/json&quot; \
  -d &#x27;{&quot;email&quot;: &quot;admin@company.com&quot;, &quot;password&quot;: &quot;admin123&quot;}&#x27;


# ============================
# PAYROLL UPLOAD (LOCALHOST)
# ============================
curl -X POST http://localhost:3000/api/payroll/upload \
  -H &quot;Authorization: Bearer &lt;HR_OR_ADMIN_TOKEN&gt;&quot; \
  -F &quot;file=@PAYROLL_FILE.xlsx&quot; \
  -F &quot;sendEmails=true&quot;

# ============================
# PAYROLL UPLOAD (RENDER)
# ============================
curl -X POST https://hrms-backend.onrender.com/api/payroll/upload \
  -H &quot;Authorization: Bearer &lt;HR_OR_ADMIN_TOKEN&gt;&quot; \
  -F &quot;file=@PAYROLL_FILE.xlsx&quot; \
  -F &quot;sendEmails=true&quot;</pre></div></div><script src="/_next/static/chunks/webpack-100b9e646d9c912e.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:I[2846,[],\"\"]\n3:I[9107,[],\"ClientPageRoot\"]\n4:I[3972,[\"931\",\"static/chunks/app/page-66bb8dceafde1e35.js\"],\"default\",1]\n5:I[4707,[],\"\"]\n6:I[6423,[],\"\"]\n8:I[1060,[],\"\"]\n9:[]\n0:[\"$\",\"$L1\",null,{\"buildId\":\"-0qm4BAmx_O61KLzMiwe-\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"\"],\"initialTree\":[\"\",{\"children\":[\"__PAGE__\",{}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"__PAGE__\",{},[[\"$L2\",[\"$\",\"$L3\",null,{\"props\":{\"params\":{},\"searchParams\":{}},\"Component\":\"$4\"}],null],null],null]},[[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"style\":{\"margin\":0,\"padding\":0,\"backgroundColor\":\"#fff\"},\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null"])</script><script>self.__next_f.push([1,",\"$L7\"],\"globalErrorComponent\":\"$8\",\"missingSlots\":\"$W9\"}]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"HRMS Backend System\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Human Resource Management System Backend\"}]]\n2:null\n"])</script></body></html>