"use strict";(()=>{var e={};e.id=124,e.ids=[124],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},61574:e=>{e.exports=import("@prisma/adapter-pg")},8678:e=>{e.exports=import("pg")},87347:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>u,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l});var o=t(49303),s=t(88716),a=t(60670),i=t(80265),c=e([i]);i=(c.then?(await c)():c)[0];let p=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/recruitment/selection/route",pathname:"/api/recruitment/selection",filename:"route",bundlePath:"app/api/recruitment/selection/route"},resolvedPagePath:"C:\\hrms-project\\src\\app\\api\\recruitment\\selection\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h}=p,m="/api/recruitment/selection/route";function u(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}n()}catch(e){n(e)}})},80265:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{POST:()=>c});var o=t(52850),s=t(7371),a=t(46127),i=e([o]);async function c(e){try{let{jobId:r}=await e.json(),t=await o._.job.findUnique({where:{id:r},include:{applicants:!0}});if(!t)return s.Rf.error("Job not found",404);let n=t.applicants,i=(0,a.Z)(t.description),c=n.map(e=>{let r=0;return i.forEach(t=>{e.parsedCvContent.toLowerCase().includes(t)&&r++}),{...e,matchCount:r}}).sort((e,r)=>r.matchCount-e.matchCount);return s.Rf.success(c,"Applicants ranked based on keyword match")}catch(e){return s.Rf.error(e.message,500)}}o=(i.then?(await i)():i)[0],n()}catch(e){n(e)}})},52850:(e,r,t)=>{t.a(e,async(e,n)=>{try{t.d(r,{_:()=>w});var o=t(53524),s=t(61574),a=t(8678),i=t(92048),c=t.n(i),u=t(55315),p=t.n(u),d=e([s,a]);[s,a]=d.then?(await d)():d;let l=globalThis,h=p().join(process.cwd(),"certs","aiven-ca.pem"),m=c().readFileSync(h,"utf8"),f=l.pool??new a.Pool({connectionString:process.env.DATABASE_URL,ssl:{ca:m,rejectUnauthorized:!1}}),g=new s.PrismaPg(f),w=l.prisma??new o.PrismaClient({adapter:g,log:["query","error","warn"]});n()}catch(e){n(e)}})},46127:(e,r,t)=>{t.d(r,{Z:()=>n});function n(e){let r=["the","a","an","of","and","in","for","on","at","by","to","with"];return e.split(/\s+/).map(e=>e.toLowerCase()).filter(e=>!r.includes(e)&&e.length>3)}},7371:(e,r,t)=>{t.d(r,{Rf:()=>o,Z:()=>s,zG:()=>a});var n=t(87070);class o{static success(e,r="Success",t=200){return n.NextResponse.json({success:!0,message:r,data:e},{status:t})}static error(e="Error",r=400,t){return n.NextResponse.json({success:!1,message:e,errors:t||[]},{status:r})}static unauthorized(e="Unauthorized"){return this.error(e,401)}static forbidden(e="Forbidden"){return this.error(e,403)}static notFound(e="Resource not found"){return this.error(e,404)}static serverError(e="Internal server error"){return this.error(e,500)}}function s(e){if(e instanceof Error)return e.message;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{return"An unexpected error occurred"}}let a=e=>{console.error("API Error:",e);let r=s(e);return o.error(r,500)}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[377,972],()=>t(87347));module.exports=n})();