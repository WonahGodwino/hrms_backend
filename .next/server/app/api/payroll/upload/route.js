"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/payroll/upload/route";
exports.ids = ["app/api/payroll/upload/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pdfkit":
/*!*************************!*\
  !*** external "pdfkit" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("pdfkit");

/***/ }),

/***/ "rimraf":
/*!*************************!*\
  !*** external "rimraf" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("rimraf");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "constants":
/*!****************************!*\
  !*** external "constants" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("constants");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "@prisma/adapter-pg":
/*!*************************************!*\
  !*** external "@prisma/adapter-pg" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("@prisma/adapter-pg");;

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fupload%2Froute&page=%2Fapi%2Fpayroll%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fupload%2Froute.ts&appDir=C%3A%5Chrms-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chrms-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fupload%2Froute&page=%2Fapi%2Fpayroll%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fupload%2Froute.ts&appDir=C%3A%5Chrms-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chrms-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_hrms_project_src_app_api_payroll_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/payroll/upload/route.ts */ \"(rsc)/./src/app/api/payroll/upload/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([C_hrms_project_src_app_api_payroll_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\nC_hrms_project_src_app_api_payroll_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/payroll/upload/route\",\n        pathname: \"/api/payroll/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/payroll/upload/route\"\n    },\n    resolvedPagePath: \"C:\\\\hrms-project\\\\src\\\\app\\\\api\\\\payroll\\\\upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_hrms_project_src_app_api_payroll_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/payroll/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwYXlyb2xsJTJGdXBsb2FkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwYXlyb2xsJTJGdXBsb2FkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcGF5cm9sbCUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDaHJtcy1wcm9qZWN0JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDaHJtcy1wcm9qZWN0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNVO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZILHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHJtcy1iYWNrZW5kLz80NWEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXGhybXMtcHJvamVjdFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxwYXlyb2xsXFxcXHVwbG9hZFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGF5cm9sbC91cGxvYWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wYXlyb2xsL3VwbG9hZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGF5cm9sbC91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxocm1zLXByb2plY3RcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxccGF5cm9sbFxcXFx1cGxvYWRcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3BheXJvbGwvdXBsb2FkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fupload%2Froute&page=%2Fapi%2Fpayroll%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fupload%2Froute.ts&appDir=C%3A%5Chrms-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chrms-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/payroll/upload/route.ts":
/*!*********************************************!*\
  !*** ./src/app/api/payroll/upload/route.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _app_lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/lib/db */ \"(rsc)/./src/app/lib/db.ts\");\n/* harmony import */ var _app_lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/lib/auth */ \"(rsc)/./src/app/lib/auth.ts\");\n/* harmony import */ var _app_lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/app/lib/utils */ \"(rsc)/./src/app/lib/utils.ts\");\n/* harmony import */ var _app_lib_email__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/app/lib/email */ \"(rsc)/./src/app/lib/email.ts\");\n/* harmony import */ var exceljs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! exceljs */ \"(rsc)/./node_modules/exceljs/excel.js\");\n/* harmony import */ var exceljs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(exceljs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _app_lib_payroll_generatePayslipPdf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/app/lib/payroll/generatePayslipPdf */ \"(rsc)/./src/app/lib/payroll/generatePayslipPdf.ts\");\n/* harmony import */ var _app_lib_cors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/app/lib/cors */ \"(rsc)/./src/app/lib/cors.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_app_lib_db__WEBPACK_IMPORTED_MODULE_1__, _app_lib_email__WEBPACK_IMPORTED_MODULE_4__]);\n([_app_lib_db__WEBPACK_IMPORTED_MODULE_1__, _app_lib_email__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/app/api/payroll/upload/route.ts\n\n\n\n\n\n\n\n\n\n\n// -----------------------------\n// Helpers\n// -----------------------------\nfunction normalizeHeader(h) {\n    return h.toString().replace(/\\s+/g, \" \").replace(/\\n/g, \" \").trim().toLowerCase();\n}\nfunction monthNameToNumber(month) {\n    if (!month) return 0;\n    const normalized = month.toString().trim().toLowerCase();\n    const months = [\n        \"january\",\n        \"february\",\n        \"march\",\n        \"april\",\n        \"may\",\n        \"june\",\n        \"july\",\n        \"august\",\n        \"september\",\n        \"october\",\n        \"november\",\n        \"december\"\n    ];\n    const idx = months.indexOf(normalized);\n    if (idx >= 0) return idx + 1;\n    const asNumber = Number(normalized);\n    return Number.isFinite(asNumber) ? asNumber : 0;\n}\nconst num = (v)=>v === null || v === undefined || v === \"\" ? 0 : Number(v) || 0;\n// Your authoritative payroll headers (normalized -> canonical)\nconst CANONICAL_HEADERS = [\n    \"Name\",\n    \"Resumption Date\",\n    \"No of Working Days in the Month\",\n    \"No of days Worked\",\n    \"Gross Pay\",\n    \"Prorated Gross Pay\",\n    \"Basic\",\n    \"Housing\",\n    \"Transport\",\n    \"Dressing\",\n    \"Leave Allowance\",\n    \"Entertainment\",\n    \"Utility\",\n    \"出勤薪资 Salary Of Attendance\",\n    \"PRORATED GROSS PAY WITH EXTRA ALL'WCE\",\n    \"TAXABLE INCOME\",\n    \"Consolidated Relief\",\n    \"Payee\",\n    \"Pension\",\n    \"Deduction\",\n    \"Bonus KPI\",\n    \"Net Salary\",\n    \"FINAL GROSS\",\n    \"Medical Contribution\",\n    \"Employer Pension\",\n    \"NSITF\",\n    \"Prorated Sub Total Invoice\",\n    \"Mgt Fee\",\n    \"Vat on Management Fee @7.5%\",\n    \"Total Invoice Value\",\n    \"EMAIL\"\n];\n// build a normalized map for lookup\nconst canonicalMap = {};\nfor (const h of CANONICAL_HEADERS){\n    canonicalMap[normalizeHeader(h)] = h;\n}\n// required per-row columns for payslip generation\nconst REQUIRED_COLS = [\n    \"Gross Pay\",\n    \"Basic\",\n    \"Housing\",\n    \"Transport\",\n    \"Dressing\",\n    \"Leave Allowance\",\n    \"Entertainment\",\n    \"Utility\",\n    \"Payee\",\n    \"Pension\",\n    \"Deduction\",\n    \"Bonus KPI\",\n    \"Net Salary\",\n    \"FINAL GROSS\",\n    \"Medical Contribution\",\n    \"No of Working Days in the Month\",\n    \"No of days Worked\"\n];\n// Try to read a cell by canonical name (strict to your template)\nfunction getCell(row, canonical) {\n    const normalized = normalizeHeader(canonical);\n    const actualKey = canonicalMap[normalized] || canonical;\n    return row[actualKey];\n}\n// Detect percentage row (row 2 in your Excel template)\nfunction looksLikePercentageRow(rowObj) {\n    for (const col of [\n        \"Basic\",\n        \"Housing\",\n        \"Transport\",\n        \"Dressing\",\n        \"Leave Allowance\",\n        \"Entertainment\",\n        \"Utility\",\n        \"Medical Contribution\"\n    ]){\n        const v = getCell(rowObj, col);\n        if (typeof v === \"string\" && v.includes(\"%\")) return true;\n    }\n    return false;\n}\n// CSV split respecting quoted commas\nfunction splitCsvLine(line) {\n    const result = [];\n    let cur = \"\";\n    let inQuotes = false;\n    for(let i = 0; i < line.length; i++){\n        const ch = line[i];\n        if (ch === '\"' && line[i + 1] === '\"') {\n            cur += '\"';\n            i++;\n            continue;\n        }\n        if (ch === '\"') {\n            inQuotes = !inQuotes;\n            continue;\n        }\n        if (ch === \",\" && !inQuotes) {\n            result.push(cur.trim());\n            cur = \"\";\n            continue;\n        }\n        cur += ch;\n    }\n    result.push(cur.trim());\n    return result;\n}\n// -----------------------------\n// CORS preflight\n// -----------------------------\nasync function OPTIONS(request) {\n    return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.handleCorsOptions)(request);\n}\n// -----------------------------\n// POST /api/payroll/upload\n// -----------------------------\nasync function POST(request) {\n    const origin = request.headers.get(\"origin\");\n    try {\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.error(\"Authorization header missing\", 401), origin);\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        const user = (0,_app_lib_auth__WEBPACK_IMPORTED_MODULE_2__.requireRole)(token, [\n            \"HR\",\n            \"SUPER_ADMIN\"\n        ]);\n        if (!user.companyId) {\n            return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.error(\"Company context missing for this user\", 400), origin);\n        }\n        const companyId = user.companyId;\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const sendEmails = formData.get(\"sendEmails\") === \"true\";\n        if (!file) {\n            return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.error(\"File is required\", 400), origin);\n        }\n        const bytes = await file.arrayBuffer();\n        const buffer = Buffer.from(bytes);\n        const fileExtension = file.name.split(\".\").pop()?.toLowerCase();\n        const isExcel = fileExtension === \"xlsx\" || fileExtension === \"xls\";\n        const isCsv = fileExtension === \"csv\" || file.type === \"text/csv\";\n        if (!isExcel && !isCsv) {\n            return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.error(\"Invalid file format. Please upload an Excel (.xlsx) or CSV (.csv) file.\", 400), origin);\n        }\n        // 1) Parse file into row objects\n        let data = [];\n        try {\n            const workbook = new (exceljs__WEBPACK_IMPORTED_MODULE_5___default().Workbook)();\n            if (isCsv) {\n                const csvText = buffer.toString();\n                const lines = csvText.split(/\\r?\\n/).filter((l)=>l.trim());\n                if (!lines.length) throw new Error(\"Empty CSV file\");\n                const rawHeaders = splitCsvLine(lines[0]);\n                const headers = rawHeaders.map((h)=>canonicalMap[normalizeHeader(h)] || h);\n                for(let i = 1; i < lines.length; i++){\n                    const values = splitCsvLine(lines[i]);\n                    const rowData = {};\n                    headers.forEach((h, idx)=>{\n                        rowData[h] = values[idx] ?? \"\";\n                    });\n                    data.push(rowData);\n                }\n                // Check if second row is the \"percentage row\" and skip it\n                if (data[0] && looksLikePercentageRow(data[0])) {\n                    data = data.slice(1);\n                }\n            } else {\n                await workbook.xlsx.load(bytes);\n                const worksheet = workbook.worksheets[0];\n                if (!worksheet) throw new Error(\"No worksheet found in Excel file\");\n                const headerRow = worksheet.getRow(1);\n                const headers = [];\n                headerRow.eachCell((cell, col)=>{\n                    const h = String(cell.value || \"\").trim();\n                    headers[col - 1] = canonicalMap[normalizeHeader(h)] || h;\n                });\n                const row2 = worksheet.getRow(2);\n                const row2Obj = {};\n                row2.eachCell((cell, col)=>{\n                    const header = headers[col - 1];\n                    row2Obj[header] = cell.value;\n                });\n                const skipRow2 = looksLikePercentageRow(row2Obj);\n                worksheet.eachRow({\n                    includeEmpty: false\n                }, (row, rowNumber)=>{\n                    if (rowNumber === 1) return;\n                    if (skipRow2 && rowNumber === 2) return;\n                    const rowData = {};\n                    row.eachCell((cell, colNumber)=>{\n                        const header = headers[colNumber - 1];\n                        rowData[header] = cell.value;\n                    });\n                    const hasAny = Object.values(rowData).some((v)=>v !== null && v !== \"\");\n                    if (hasAny) data.push(rowData);\n                });\n            }\n        } catch (err) {\n            return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.error(`Error parsing file: ${err.message}`, 400), origin);\n        }\n        if (!data.length) {\n            return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.error(\"No payroll data found in the file\", 400), origin);\n        }\n        // 2) Process rows\n        const results = {\n            successful: 0,\n            failed: 0,\n            payslipsGenerated: 0,\n            emailsSent: 0,\n            processedRecords: [],\n            failedRecords: [],\n            errors: []\n        };\n        const now = new Date();\n        const defaultMonthName = now.toLocaleString(\"en-US\", {\n            month: \"long\"\n        });\n        const defaultYear = now.getFullYear();\n        for(let index = 0; index < data.length; index++){\n            const row = data[index];\n            const displayRowNumber = index + 3 // row 1 = headers, row 2 = % row\n            ;\n            try {\n                const rowData = row;\n                const rawName = getCell(rowData, \"Name\") || \"\";\n                const name = rawName.toString().trim();\n                const rawEmail = getCell(rowData, \"EMAIL\") || \"\";\n                const email = rawEmail.toString().trim();\n                if (!name && !email) {\n                    const message = \"Missing Name/EMAIL for staff identification\";\n                    results.failed++;\n                    results.errors.push(`Row ${displayRowNumber}: ${message}`);\n                    results.failedRecords.push({\n                        ...rowData,\n                        error: message\n                    });\n                    continue;\n                }\n                const missingCols = REQUIRED_COLS.filter((c)=>{\n                    const v = getCell(rowData, c);\n                    return v === undefined || v === null || v === \"\";\n                });\n                if (missingCols.length) {\n                    const message = `Missing required column values: ${missingCols.join(\", \")}`;\n                    results.failed++;\n                    results.errors.push(`Row ${displayRowNumber}: ${message}`);\n                    results.failedRecords.push({\n                        ...rowData,\n                        error: message\n                    });\n                    continue;\n                }\n                // locate staff record\n                let staffRecord = null;\n                if (email) {\n                    staffRecord = await _app_lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.staffRecord.findUnique({\n                        where: {\n                            email_companyId: {\n                                email,\n                                companyId\n                            }\n                        }\n                    });\n                }\n                if (!staffRecord && name) {\n                    const parts = name.split(\" \").filter(Boolean);\n                    const firstName = parts[0];\n                    const lastName = parts.slice(1).join(\" \") || parts[0];\n                    staffRecord = await _app_lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.staffRecord.findFirst({\n                        where: {\n                            companyId,\n                            isActive: true,\n                            OR: [\n                                {\n                                    AND: [\n                                        {\n                                            firstName: {\n                                                contains: firstName,\n                                                mode: \"insensitive\"\n                                            }\n                                        },\n                                        {\n                                            lastName: {\n                                                contains: lastName,\n                                                mode: \"insensitive\"\n                                            }\n                                        }\n                                    ]\n                                },\n                                {\n                                    AND: [\n                                        {\n                                            lastName: {\n                                                contains: firstName,\n                                                mode: \"insensitive\"\n                                            }\n                                        },\n                                        {\n                                            firstName: {\n                                                contains: lastName,\n                                                mode: \"insensitive\"\n                                            }\n                                        }\n                                    ]\n                                }\n                            ]\n                        }\n                    });\n                }\n                if (!staffRecord) {\n                    const message = `Staff record not found for ${name || email}. Staff must be pre-registered.`;\n                    results.failed++;\n                    results.errors.push(`Row ${displayRowNumber}: ${message}`);\n                    results.failedRecords.push({\n                        ...rowData,\n                        error: message\n                    });\n                    continue;\n                }\n                const monthName = rowData[\"Month\"]?.toString() || rowData[\"MONTH\"]?.toString() || defaultMonthName;\n                const year = parseInt(rowData[\"Year\"]?.toString() || rowData[\"YEAR\"]?.toString() || defaultYear.toString(), 10);\n                const periodMonth = monthNameToNumber(monthName);\n                const grossPay = num(getCell(rowData, \"Gross Pay\"));\n                const proratedGrossPay = num(getCell(rowData, \"Prorated Gross Pay\"));\n                const basicSalary = num(getCell(rowData, \"Basic\"));\n                const housing = num(getCell(rowData, \"Housing\"));\n                const transport = num(getCell(rowData, \"Transport\"));\n                const dressing = num(getCell(rowData, \"Dressing\"));\n                const leaveAllowance = num(getCell(rowData, \"Leave Allowance\"));\n                const entertainment = num(getCell(rowData, \"Entertainment\"));\n                const utility = num(getCell(rowData, \"Utility\"));\n                const payee = num(getCell(rowData, \"Payee\"));\n                const pension = num(getCell(rowData, \"Pension\"));\n                const deduction = num(getCell(rowData, \"Deduction\"));\n                const bonusKPI = num(getCell(rowData, \"Bonus KPI\"));\n                const netSalary = num(getCell(rowData, \"Net Salary\"));\n                const finalGross = num(getCell(rowData, \"FINAL GROSS\"));\n                const medicalContribution = num(getCell(rowData, \"Medical Contribution\"));\n                const proratedGrossWithExtra = num(getCell(rowData, \"PRORATED GROSS PAY WITH EXTRA ALL'WCE\"));\n                const taxableIncome = num(getCell(rowData, \"TAXABLE INCOME\"));\n                const consolidatedRelief = num(getCell(rowData, \"Consolidated Relief\"));\n                const annualPension = pension * 12;\n                const annualGrossPay = grossPay * 12;\n                const employerPension = num(getCell(rowData, \"Employer Pension\"));\n                const nsitf = num(getCell(rowData, \"NSITF\"));\n                const proratedSubTotal = num(getCell(rowData, \"Prorated Sub Total Invoice\"));\n                const managementFee = num(getCell(rowData, \"Mgt Fee\"));\n                const vatOnManagementFee = num(getCell(rowData, \"Vat on Management Fee @7.5%\"));\n                const totalInvoiceValue = num(getCell(rowData, \"Total Invoice Value\"));\n                const daysInMonth = num(getCell(rowData, \"No of Working Days in the Month\"));\n                const daysWorked = num(getCell(rowData, \"No of days Worked\"));\n                if (netSalary < 0) {\n                    const message = \"Net Salary cannot be negative. Check payroll values.\";\n                    results.failed++;\n                    results.errors.push(`Row ${displayRowNumber}: ${message}`);\n                    results.failedRecords.push({\n                        ...rowData,\n                        error: message\n                    });\n                    continue;\n                }\n                const payroll = await _app_lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.payroll.upsert({\n                    where: {\n                        staffRecordId_month_year_companyId: {\n                            staffRecordId: staffRecord.id,\n                            month: monthName,\n                            year,\n                            companyId\n                        }\n                    },\n                    update: {\n                        companyId,\n                        month: monthName,\n                        year,\n                        grossPay,\n                        proratedGrossPay,\n                        basicSalary,\n                        housing,\n                        transport,\n                        dressing,\n                        leaveAllowance,\n                        entertainment,\n                        utility,\n                        proratedGrossWithExtra,\n                        annualPension,\n                        annualGrossPay,\n                        consolidatedRelief,\n                        taxableIncome,\n                        deductions: deduction,\n                        payee,\n                        pensionDeduction: pension,\n                        bonusKPI,\n                        netSalary,\n                        finalGross,\n                        medicalContribution,\n                        employerPension,\n                        nsitf,\n                        proratedSubTotal,\n                        managementFee,\n                        vatOnManagementFee,\n                        totalInvoiceValue,\n                        status: \"PROCESSED\",\n                        uploadedBy: user.userId\n                    },\n                    create: {\n                        companyId,\n                        staffRecordId: staffRecord.id,\n                        month: monthName,\n                        year,\n                        grossPay,\n                        proratedGrossPay,\n                        basicSalary,\n                        housing,\n                        transport,\n                        dressing,\n                        leaveAllowance,\n                        entertainment,\n                        utility,\n                        proratedGrossWithExtra,\n                        annualPension,\n                        annualGrossPay,\n                        consolidatedRelief,\n                        taxableIncome,\n                        deductions: deduction,\n                        payee,\n                        pensionDeduction: pension,\n                        bonusKPI,\n                        netSalary,\n                        finalGross,\n                        medicalContribution,\n                        employerPension,\n                        nsitf,\n                        proratedSubTotal,\n                        managementFee,\n                        vatOnManagementFee,\n                        totalInvoiceValue,\n                        status: \"PROCESSED\",\n                        uploadedBy: user.userId\n                    }\n                });\n                // Payslip check\n                const existingPayslip = await _app_lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.payslip.findFirst({\n                    where: {\n                        staffRecordId: staffRecord.id,\n                        month: monthName,\n                        year,\n                        companyId\n                    }\n                });\n                let pdfPath = null;\n                if (!existingPayslip) {\n                    const parsedRow = {\n                        rowNumber: displayRowNumber,\n                        staffId: staffRecord.staffId,\n                        email: staffRecord.email,\n                        fullName: `${staffRecord.firstName} ${staffRecord.lastName}`,\n                        periodMonth,\n                        periodYear: year,\n                        basicSalary,\n                        housingAllowance: housing,\n                        transportAllowance: transport,\n                        transportationAllowance: dressing,\n                        otherAllowances: leaveAllowance + entertainment + utility,\n                        grossPay,\n                        payee,\n                        pension,\n                        netPay: netSalary,\n                        daysInMonth,\n                        daysWorked,\n                        rawRow: rowData\n                    };\n                    try {\n                        const { pdfPath: generatedPath } = await (0,_app_lib_payroll_generatePayslipPdf__WEBPACK_IMPORTED_MODULE_8__.generatePayslipPdf)({\n                            staff: {\n                                staffId: staffRecord.staffId,\n                                firstName: staffRecord.firstName,\n                                lastName: staffRecord.lastName,\n                                email: staffRecord.email,\n                                department: staffRecord.department || undefined,\n                                designation: staffRecord.position || undefined\n                            },\n                            payroll: parsedRow\n                        });\n                        pdfPath = generatedPath;\n                        results.payslipsGenerated++;\n                    } catch (err) {\n                        const message = `Failed to generate payslip PDF - ${err.message}`;\n                        results.failed++;\n                        results.errors.push(`Row ${displayRowNumber}: ${message}`);\n                        results.failedRecords.push({\n                            ...rowData,\n                            error: message\n                        });\n                        continue;\n                    }\n                    try {\n                        const payslipFileName = path__WEBPACK_IMPORTED_MODULE_7___default().basename(pdfPath);\n                        await _app_lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.payslip.create({\n                            data: {\n                                payrollId: payroll.id,\n                                staffRecordId: staffRecord.id,\n                                companyId,\n                                filePath: pdfPath,\n                                fileName: payslipFileName,\n                                month: monthName,\n                                year,\n                                grossPay,\n                                netPay: netSalary\n                            }\n                        });\n                    } catch (err) {\n                        const message = `Payslip DB record error - ${err.message}`;\n                        results.failed++;\n                        results.errors.push(`Row ${displayRowNumber}: ${message}`);\n                        results.failedRecords.push({\n                            ...rowData,\n                            error: message\n                        });\n                        continue;\n                    }\n                }\n                if (sendEmails) {\n                    try {\n                        await (0,_app_lib_email__WEBPACK_IMPORTED_MODULE_4__.sendPayrollNotificationEmail)(staffRecord, {\n                            month: monthName,\n                            year,\n                            netSalary\n                        });\n                        results.emailsSent++;\n                    } catch (err) {\n                        const msg = `Email sending failed - ${err.message}`;\n                        results.errors.push(`Row ${displayRowNumber}: ${msg}`);\n                    }\n                }\n                results.successful++;\n                results.processedRecords.push({\n                    ...rowData,\n                    staffId: staffRecord.staffId,\n                    staffName: `${staffRecord.firstName} ${staffRecord.lastName}`,\n                    netSalary,\n                    status: \"PROCESSED\"\n                });\n            } catch (err) {\n                const message = err?.message || \"Unknown error\";\n                results.failed++;\n                results.errors.push(`Row ${displayRowNumber}: ${message}`);\n                results.failedRecords.push({\n                    ...row,\n                    error: message\n                });\n            }\n        }\n        const uploadDir = path__WEBPACK_IMPORTED_MODULE_7___default().join(process.cwd(), \"uploads\", \"payroll\");\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_6__.mkdir)(uploadDir, {\n            recursive: true\n        });\n        let processedFilePath = null;\n        if (results.failedRecords.length > 0) {\n            const failedWorkbook = new (exceljs__WEBPACK_IMPORTED_MODULE_5___default().Workbook)();\n            const failedWorksheet = failedWorkbook.addWorksheet(\"Failed Records\");\n            const headersSet = new Set();\n            results.failedRecords.forEach((r)=>Object.keys(r).forEach((k)=>headersSet.add(k)));\n            headersSet.add(\"error\");\n            const headers = Array.from(headersSet);\n            failedWorksheet.columns = headers.map((h)=>({\n                    header: h,\n                    key: h,\n                    width: 22\n                }));\n            results.failedRecords.forEach((record)=>{\n                failedWorksheet.addRow(record);\n            });\n            const headerRow = failedWorksheet.getRow(1);\n            headerRow.font = {\n                bold: true,\n                color: {\n                    argb: \"FFFFFFFF\"\n                }\n            };\n            headerRow.fill = {\n                type: \"pattern\",\n                pattern: \"solid\",\n                fgColor: {\n                    argb: \"FFDC3545\"\n                }\n            };\n            const failedFileName = `failed-records-${Date.now()}.xlsx`;\n            const failedFilePath = path__WEBPACK_IMPORTED_MODULE_7___default().join(uploadDir, failedFileName);\n            const failedBuffer = await failedWorkbook.xlsx.writeBuffer();\n            await (0,fs_promises__WEBPACK_IMPORTED_MODULE_6__.writeFile)(failedFilePath, Buffer.from(failedBuffer));\n            processedFilePath = failedFilePath;\n        }\n        const uploadRecord = await _app_lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.payrollUpload.create({\n            data: {\n                companyId,\n                fileName: file.name,\n                filePath: path__WEBPACK_IMPORTED_MODULE_7___default().join(uploadDir, file.name),\n                processedFilePath,\n                processedFileName: processedFilePath ? path__WEBPACK_IMPORTED_MODULE_7___default().basename(processedFilePath) : null,\n                totalRecords: data.length,\n                successful: results.successful,\n                failed: results.failed,\n                errors: results.errors,\n                uploadedBy: user.userId\n            }\n        });\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_6__.writeFile)(path__WEBPACK_IMPORTED_MODULE_7___default().join(uploadDir, file.name), buffer);\n        const responseData = {\n            results,\n            uploadId: uploadRecord.id,\n            summary: {\n                totalProcessed: data.length,\n                successful: results.successful,\n                failed: results.failed,\n                payslipsGenerated: results.payslipsGenerated,\n                emailsSent: results.emailsSent\n            }\n        };\n        if (results.failedRecords.length > 0) {\n            responseData.failedRecordsDownload = `/api/payroll/download-failed/${uploadRecord.id}`;\n        }\n        return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.success(responseData, \"Payroll processing completed successfully\"), origin);\n    } catch (error) {\n        return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)((0,_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.handleApiError)(error), origin);\n    }\n}\n// -----------------------------\n// GET /api/payroll/upload\n// Payroll template download\n// -----------------------------\nasync function GET(request) {\n    const origin = request.headers.get(\"origin\");\n    try {\n        const authHeader = request.headers.get(\"authorization\");\n        if (!authHeader) {\n            return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.ApiResponse.error(\"Authorization header missing\", 401), origin);\n        }\n        const token = authHeader.replace(\"Bearer \", \"\");\n        (0,_app_lib_auth__WEBPACK_IMPORTED_MODULE_2__.requireRole)(token, [\n            \"HR\",\n            \"SUPER_ADMIN\"\n        ]);\n        const workbook = new (exceljs__WEBPACK_IMPORTED_MODULE_5___default().Workbook)();\n        const worksheet = workbook.addWorksheet(\"Payroll Template\");\n        worksheet.addRow([\n            \"Name\",\n            \"Resumption Date\",\n            \"No of Working Days in the Month\",\n            \" No of days Worked \",\n            \"Gross Pay\",\n            \"Prorated Gross Pay\",\n            \"Basic\",\n            \"Housing\",\n            \"Transport\",\n            \"Dressing\",\n            \"Leave Allowance\",\n            \"Entertainment\",\n            \"Utility\",\n            \"Salary Of Attendance \",\n            \"PRORATED GROSS PAY WITH EXTRA ALL'WCE\",\n            \"TAXABLE INCOME\",\n            \"Payee\",\n            \"Pension\",\n            \"Deduction \",\n            \"Bonus KPI \",\n            \"Net Salary\",\n            \"FINAL GROSS\",\n            \"Medical Contribution\",\n            \"Employer Pension\",\n            \"NSITF\",\n            \"Prorated Sub Total\\nInvoice\",\n            \"Mgt Fee\",\n            \"Vat on Management Fee @7.5%\",\n            \"Total Invoice\\nValue\",\n            \"EMAIL\"\n        ]);\n        worksheet.addRow([\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"50%\",\n            \"25%\",\n            \"25%\",\n            \"10%\",\n            \"8.33%\",\n            \"5%\",\n            \"5%\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"1%\",\n            \"10%\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\",\n            \"\"\n        ]);\n        worksheet.addRow([\n            \"IMPORTANT:\"\n        ]);\n        worksheet.addRow([\n            \"- All amounts should be in Naira\"\n        ]);\n        worksheet.addRow([\n            \"- Staff must be pre-registered in the system\"\n        ]);\n        worksheet.addRow([\n            \"- Name or EMAIL must match exactly with registered staff record\"\n        ]);\n        worksheet.addRow([\n            \"- If a required column is missing in a row, that row will fail and be included in failed-records download.\"\n        ]);\n        const buffer = await workbook.xlsx.writeBuffer();\n        const excelResponse = new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(buffer, {\n            headers: {\n                \"Content-Type\": \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n                \"Content-Disposition\": 'attachment; filename=\"payroll-template.xlsx\"',\n                \"Cache-Control\": \"no-cache\"\n            }\n        });\n        return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)(excelResponse, origin);\n    } catch (error) {\n        return (0,_app_lib_cors__WEBPACK_IMPORTED_MODULE_9__.withCors)((0,_app_lib_utils__WEBPACK_IMPORTED_MODULE_3__.handleApiError)(error), origin);\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wYXlyb2xsL3VwbG9hZC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0NBQXNDO0FBQ2lCO0FBQ2xCO0FBQ087QUFDaUI7QUFDQztBQUNqQztBQUNpQjtBQUN2QjtBQUNrRDtBQUViO0FBRTVELGdDQUFnQztBQUNoQyxVQUFVO0FBQ1YsZ0NBQWdDO0FBRWhDLFNBQVNhLGdCQUFnQkMsQ0FBUztJQUNoQyxPQUFPQSxFQUNKQyxRQUFRLEdBQ1JDLE9BQU8sQ0FBQyxRQUFRLEtBQ2hCQSxPQUFPLENBQUMsT0FBTyxLQUNmQyxJQUFJLEdBQ0pDLFdBQVc7QUFDaEI7QUFFQSxTQUFTQyxrQkFBa0JDLEtBQWE7SUFDdEMsSUFBSSxDQUFDQSxPQUFPLE9BQU87SUFDbkIsTUFBTUMsYUFBYUQsTUFBTUwsUUFBUSxHQUFHRSxJQUFJLEdBQUdDLFdBQVc7SUFDdEQsTUFBTUksU0FBUztRQUNiO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtLQUNEO0lBQ0QsTUFBTUMsTUFBTUQsT0FBT0UsT0FBTyxDQUFDSDtJQUMzQixJQUFJRSxPQUFPLEdBQUcsT0FBT0EsTUFBTTtJQUMzQixNQUFNRSxXQUFXQyxPQUFPTDtJQUN4QixPQUFPSyxPQUFPQyxRQUFRLENBQUNGLFlBQVlBLFdBQVc7QUFDaEQ7QUFFQSxNQUFNRyxNQUFNLENBQUNDLElBQ1hBLE1BQU0sUUFBUUEsTUFBTUMsYUFBYUQsTUFBTSxLQUFLLElBQUlILE9BQU9HLE1BQU07QUFFL0QsK0RBQStEO0FBQy9ELE1BQU1FLG9CQUFvQjtJQUN4QjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNB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QztRQUV4Q3RJLFVBQVVrSixNQUFNLENBQUM7WUFDZjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUVEbEosVUFBVWtKLE1BQU0sQ0FBQztZQUNmO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBRURsSixVQUFVa0osTUFBTSxDQUFDO1lBQUM7U0FBYTtRQUMvQmxKLFVBQVVrSixNQUFNLENBQUM7WUFBQztTQUFtQztRQUNyRGxKLFVBQVVrSixNQUFNLENBQUM7WUFBQztTQUErQztRQUNqRWxKLFVBQVVrSixNQUFNLENBQUM7WUFDZjtTQUNEO1FBQ0RsSixVQUFVa0osTUFBTSxDQUFDO1lBQ2Y7U0FDRDtRQUVELE1BQU01SyxTQUFTLE1BQU1XLFNBQVNhLElBQUksQ0FBQytKLFdBQVc7UUFFOUMsTUFBTVksZ0JBQWdCLElBQUl0USxxREFBWUEsQ0FBQ21FLFFBQWU7WUFDcERaLFNBQVM7Z0JBQ1AsZ0JBQ0U7Z0JBQ0YsdUJBQ0U7Z0JBQ0YsaUJBQWlCO1lBQ25CO1FBQ0Y7UUFFQSxPQUFPM0MsdURBQVFBLENBQUMwUCxlQUFlaE47SUFDakMsRUFBRSxPQUFPSSxPQUFPO1FBQ2QsT0FBTzlDLHVEQUFRQSxDQUNiUiw4REFBY0EsQ0FBQ3NELFFBQ2ZKO0lBRUo7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hybXMtYmFja2VuZC8uL3NyYy9hcHAvYXBpL3BheXJvbGwvdXBsb2FkL3JvdXRlLnRzP2IyZWIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2FwcC9hcGkvcGF5cm9sbC91cGxvYWQvcm91dGUudHNcclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2FwcC9saWIvZGInXHJcbmltcG9ydCB7IHJlcXVpcmVSb2xlIH0gZnJvbSAnQC9hcHAvbGliL2F1dGgnXHJcbmltcG9ydCB7IEFwaVJlc3BvbnNlLCBoYW5kbGVBcGlFcnJvciB9IGZyb20gJ0AvYXBwL2xpYi91dGlscydcclxuaW1wb3J0IHsgc2VuZFBheXJvbGxOb3RpZmljYXRpb25FbWFpbCB9IGZyb20gJ0AvYXBwL2xpYi9lbWFpbCdcclxuaW1wb3J0IEV4Y2VsSlMgZnJvbSAnZXhjZWxqcydcclxuaW1wb3J0IHsgd3JpdGVGaWxlLCBta2RpciB9IGZyb20gJ2ZzL3Byb21pc2VzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgeyBnZW5lcmF0ZVBheXNsaXBQZGYgfSBmcm9tICdAL2FwcC9saWIvcGF5cm9sbC9nZW5lcmF0ZVBheXNsaXBQZGYnXHJcbmltcG9ydCB0eXBlIHsgUGFyc2VkUGF5cm9sbFJvdyB9IGZyb20gJ0AvYXBwL2xpYi9wYXlyb2xsL3R5cGVzJ1xyXG5pbXBvcnQgeyBoYW5kbGVDb3JzT3B0aW9ucywgd2l0aENvcnMgfSBmcm9tICdAL2FwcC9saWIvY29ycydcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vIEhlbHBlcnNcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlcihoOiBzdHJpbmcpIHtcclxuICByZXR1cm4gaFxyXG4gICAgLnRvU3RyaW5nKClcclxuICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJylcclxuICAgIC5yZXBsYWNlKC9cXG4vZywgJyAnKVxyXG4gICAgLnRyaW0oKVxyXG4gICAgLnRvTG93ZXJDYXNlKClcclxufVxyXG5cclxuZnVuY3Rpb24gbW9udGhOYW1lVG9OdW1iZXIobW9udGg6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgaWYgKCFtb250aCkgcmV0dXJuIDBcclxuICBjb25zdCBub3JtYWxpemVkID0gbW9udGgudG9TdHJpbmcoKS50cmltKCkudG9Mb3dlckNhc2UoKVxyXG4gIGNvbnN0IG1vbnRocyA9IFtcclxuICAgICdqYW51YXJ5JyxcclxuICAgICdmZWJydWFyeScsXHJcbiAgICAnbWFyY2gnLFxyXG4gICAgJ2FwcmlsJyxcclxuICAgICdtYXknLFxyXG4gICAgJ2p1bmUnLFxyXG4gICAgJ2p1bHknLFxyXG4gICAgJ2F1Z3VzdCcsXHJcbiAgICAnc2VwdGVtYmVyJyxcclxuICAgICdvY3RvYmVyJyxcclxuICAgICdub3ZlbWJlcicsXHJcbiAgICAnZGVjZW1iZXInLFxyXG4gIF1cclxuICBjb25zdCBpZHggPSBtb250aHMuaW5kZXhPZihub3JtYWxpemVkKVxyXG4gIGlmIChpZHggPj0gMCkgcmV0dXJuIGlkeCArIDFcclxuICBjb25zdCBhc051bWJlciA9IE51bWJlcihub3JtYWxpemVkKVxyXG4gIHJldHVybiBOdW1iZXIuaXNGaW5pdGUoYXNOdW1iZXIpID8gYXNOdW1iZXIgOiAwXHJcbn1cclxuXHJcbmNvbnN0IG51bSA9ICh2OiBhbnkpID0+XHJcbiAgdiA9PT0gbnVsbCB8fCB2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gJycgPyAwIDogTnVtYmVyKHYpIHx8IDBcclxuXHJcbi8vIFlvdXIgYXV0aG9yaXRhdGl2ZSBwYXlyb2xsIGhlYWRlcnMgKG5vcm1hbGl6ZWQgLT4gY2Fub25pY2FsKVxyXG5jb25zdCBDQU5PTklDQUxfSEVBREVSUyA9IFtcclxuICAnTmFtZScsXHJcbiAgJ1Jlc3VtcHRpb24gRGF0ZScsXHJcbiAgJ05vIG9mIFdvcmtpbmcgRGF5cyBpbiB0aGUgTW9udGgnLFxyXG4gICdObyBvZiBkYXlzIFdvcmtlZCcsXHJcbiAgJ0dyb3NzIFBheScsXHJcbiAgJ1Byb3JhdGVkIEdyb3NzIFBheScsXHJcbiAgJ0Jhc2ljJyxcclxuICAnSG91c2luZycsXHJcbiAgJ1RyYW5zcG9ydCcsXHJcbiAgJ0RyZXNzaW5nJyxcclxuICAnTGVhdmUgQWxsb3dhbmNlJyxcclxuICAnRW50ZXJ0YWlubWVudCcsXHJcbiAgJ1V0aWxpdHknLFxyXG4gICflh7rli6TolqrotYQgU2FsYXJ5IE9mIEF0dGVuZGFuY2UnLFxyXG4gIFwiUFJPUkFURUQgR1JPU1MgUEFZIFdJVEggRVhUUkEgQUxMJ1dDRVwiLFxyXG4gICdUQVhBQkxFIElOQ09NRScsXHJcbiAgJ0NvbnNvbGlkYXRlZCBSZWxpZWYnLFxyXG4gICdQYXllZScsXHJcbiAgJ1BlbnNpb24nLFxyXG4gICdEZWR1Y3Rpb24nLFxyXG4gICdCb251cyBLUEknLFxyXG4gICdOZXQgU2FsYXJ5JyxcclxuICAnRklOQUwgR1JPU1MnLFxyXG4gICdNZWRpY2FsIENvbnRyaWJ1dGlvbicsXHJcbiAgJ0VtcGxveWVyIFBlbnNpb24nLFxyXG4gICdOU0lURicsXHJcbiAgJ1Byb3JhdGVkIFN1YiBUb3RhbCBJbnZvaWNlJyxcclxuICAnTWd0IEZlZScsXHJcbiAgJ1ZhdCBvbiBNYW5hZ2VtZW50IEZlZSBANy41JScsXHJcbiAgJ1RvdGFsIEludm9pY2UgVmFsdWUnLFxyXG4gICdFTUFJTCcsXHJcbl1cclxuXHJcbi8vIGJ1aWxkIGEgbm9ybWFsaXplZCBtYXAgZm9yIGxvb2t1cFxyXG5jb25zdCBjYW5vbmljYWxNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fVxyXG5mb3IgKGNvbnN0IGggb2YgQ0FOT05JQ0FMX0hFQURFUlMpIHtcclxuICBjYW5vbmljYWxNYXBbbm9ybWFsaXplSGVhZGVyKGgpXSA9IGhcclxufVxyXG5cclxuLy8gcmVxdWlyZWQgcGVyLXJvdyBjb2x1bW5zIGZvciBwYXlzbGlwIGdlbmVyYXRpb25cclxuY29uc3QgUkVRVUlSRURfQ09MUyA9IFtcclxuICAnR3Jvc3MgUGF5JyxcclxuICAnQmFzaWMnLFxyXG4gICdIb3VzaW5nJyxcclxuICAnVHJhbnNwb3J0JyxcclxuICAnRHJlc3NpbmcnLFxyXG4gICdMZWF2ZSBBbGxvd2FuY2UnLFxyXG4gICdFbnRlcnRhaW5tZW50JyxcclxuICAnVXRpbGl0eScsXHJcbiAgJ1BheWVlJyxcclxuICAnUGVuc2lvbicsXHJcbiAgJ0RlZHVjdGlvbicsXHJcbiAgJ0JvbnVzIEtQSScsXHJcbiAgJ05ldCBTYWxhcnknLFxyXG4gICdGSU5BTCBHUk9TUycsXHJcbiAgJ01lZGljYWwgQ29udHJpYnV0aW9uJyxcclxuICAnTm8gb2YgV29ya2luZyBEYXlzIGluIHRoZSBNb250aCcsXHJcbiAgJ05vIG9mIGRheXMgV29ya2VkJyxcclxuXVxyXG5cclxuLy8gVHJ5IHRvIHJlYWQgYSBjZWxsIGJ5IGNhbm9uaWNhbCBuYW1lIChzdHJpY3QgdG8geW91ciB0ZW1wbGF0ZSlcclxuZnVuY3Rpb24gZ2V0Q2VsbChyb3c6IGFueSwgY2Fub25pY2FsOiBzdHJpbmcpIHtcclxuICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplSGVhZGVyKGNhbm9uaWNhbClcclxuICBjb25zdCBhY3R1YWxLZXkgPSBjYW5vbmljYWxNYXBbbm9ybWFsaXplZF0gfHwgY2Fub25pY2FsXHJcbiAgcmV0dXJuIHJvd1thY3R1YWxLZXldXHJcbn1cclxuXHJcbi8vIERldGVjdCBwZXJjZW50YWdlIHJvdyAocm93IDIgaW4geW91ciBFeGNlbCB0ZW1wbGF0ZSlcclxuZnVuY3Rpb24gbG9va3NMaWtlUGVyY2VudGFnZVJvdyhyb3dPYmo6IGFueSkge1xyXG4gIGZvciAoY29uc3QgY29sIG9mIFtcclxuICAgICdCYXNpYycsXHJcbiAgICAnSG91c2luZycsXHJcbiAgICAnVHJhbnNwb3J0JyxcclxuICAgICdEcmVzc2luZycsXHJcbiAgICAnTGVhdmUgQWxsb3dhbmNlJyxcclxuICAgICdFbnRlcnRhaW5tZW50JyxcclxuICAgICdVdGlsaXR5JyxcclxuICAgICdNZWRpY2FsIENvbnRyaWJ1dGlvbicsXHJcbiAgXSkge1xyXG4gICAgY29uc3QgdiA9IGdldENlbGwocm93T2JqLCBjb2wpXHJcbiAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnICYmIHYuaW5jbHVkZXMoJyUnKSkgcmV0dXJuIHRydWVcclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlXHJcbn1cclxuXHJcbi8vIENTViBzcGxpdCByZXNwZWN0aW5nIHF1b3RlZCBjb21tYXNcclxuZnVuY3Rpb24gc3BsaXRDc3ZMaW5lKGxpbmU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXVxyXG4gIGxldCBjdXIgPSAnJ1xyXG4gIGxldCBpblF1b3RlcyA9IGZhbHNlXHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZS5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgY2ggPSBsaW5lW2ldXHJcbiAgICBpZiAoY2ggPT09ICdcIicgJiYgbGluZVtpICsgMV0gPT09ICdcIicpIHtcclxuICAgICAgY3VyICs9ICdcIidcclxuICAgICAgaSsrXHJcbiAgICAgIGNvbnRpbnVlXHJcbiAgICB9XHJcbiAgICBpZiAoY2ggPT09ICdcIicpIHtcclxuICAgICAgaW5RdW90ZXMgPSAhaW5RdW90ZXNcclxuICAgICAgY29udGludWVcclxuICAgIH1cclxuICAgIGlmIChjaCA9PT0gJywnICYmICFpblF1b3Rlcykge1xyXG4gICAgICByZXN1bHQucHVzaChjdXIudHJpbSgpKVxyXG4gICAgICBjdXIgPSAnJ1xyXG4gICAgICBjb250aW51ZVxyXG4gICAgfVxyXG4gICAgY3VyICs9IGNoXHJcbiAgfVxyXG4gIHJlc3VsdC5wdXNoKGN1ci50cmltKCkpXHJcbiAgcmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBDT1JTIHByZWZsaWdodFxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gT1BUSU9OUyhyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHJldHVybiBoYW5kbGVDb3JzT3B0aW9ucyhyZXF1ZXN0KVxyXG59XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBQT1NUIC9hcGkvcGF5cm9sbC91cGxvYWRcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICBjb25zdCBvcmlnaW4gPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdvcmlnaW4nKVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKVxyXG4gICAgaWYgKCFhdXRoSGVhZGVyKSB7XHJcbiAgICAgIHJldHVybiB3aXRoQ29ycyhcclxuICAgICAgICBBcGlSZXNwb25zZS5lcnJvcignQXV0aG9yaXphdGlvbiBoZWFkZXIgbWlzc2luZycsIDQwMSksXHJcbiAgICAgICAgb3JpZ2luXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIucmVwbGFjZSgnQmVhcmVyICcsICcnKVxyXG4gICAgY29uc3QgdXNlciA9IHJlcXVpcmVSb2xlKHRva2VuLCBbJ0hSJywgJ1NVUEVSX0FETUlOJ10pXHJcblxyXG4gICAgaWYgKCF1c2VyLmNvbXBhbnlJZCkge1xyXG4gICAgICByZXR1cm4gd2l0aENvcnMoXHJcbiAgICAgICAgQXBpUmVzcG9uc2UuZXJyb3IoJ0NvbXBhbnkgY29udGV4dCBtaXNzaW5nIGZvciB0aGlzIHVzZXInLCA0MDApLFxyXG4gICAgICAgIG9yaWdpblxyXG4gICAgICApXHJcbiAgICB9XHJcbiAgICBjb25zdCBjb21wYW55SWQ6IHN0cmluZyA9IHVzZXIuY29tcGFueUlkXHJcblxyXG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKClcclxuICAgIGNvbnN0IGZpbGUgPSBmb3JtRGF0YS5nZXQoJ2ZpbGUnKSBhcyBGaWxlXHJcbiAgICBjb25zdCBzZW5kRW1haWxzID0gZm9ybURhdGEuZ2V0KCdzZW5kRW1haWxzJykgPT09ICd0cnVlJ1xyXG5cclxuICAgIGlmICghZmlsZSkge1xyXG4gICAgICByZXR1cm4gd2l0aENvcnMoXHJcbiAgICAgICAgQXBpUmVzcG9uc2UuZXJyb3IoJ0ZpbGUgaXMgcmVxdWlyZWQnLCA0MDApLFxyXG4gICAgICAgIG9yaWdpblxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYnl0ZXMgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKClcclxuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKVxyXG5cclxuICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKVxyXG4gICAgY29uc3QgaXNFeGNlbCA9IGZpbGVFeHRlbnNpb24gPT09ICd4bHN4JyB8fCBmaWxlRXh0ZW5zaW9uID09PSAneGxzJ1xyXG4gICAgY29uc3QgaXNDc3YgPSBmaWxlRXh0ZW5zaW9uID09PSAnY3N2JyB8fCBmaWxlLnR5cGUgPT09ICd0ZXh0L2NzdidcclxuXHJcbiAgICBpZiAoIWlzRXhjZWwgJiYgIWlzQ3N2KSB7XHJcbiAgICAgIHJldHVybiB3aXRoQ29ycyhcclxuICAgICAgICBBcGlSZXNwb25zZS5lcnJvcihcclxuICAgICAgICAgICdJbnZhbGlkIGZpbGUgZm9ybWF0LiBQbGVhc2UgdXBsb2FkIGFuIEV4Y2VsICgueGxzeCkgb3IgQ1NWICguY3N2KSBmaWxlLicsXHJcbiAgICAgICAgICA0MDBcclxuICAgICAgICApLFxyXG4gICAgICAgIG9yaWdpblxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gMSkgUGFyc2UgZmlsZSBpbnRvIHJvdyBvYmplY3RzXHJcbiAgICBsZXQgZGF0YTogYW55W10gPSBbXVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHdvcmtib29rID0gbmV3IEV4Y2VsSlMuV29ya2Jvb2soKVxyXG5cclxuICAgICAgaWYgKGlzQ3N2KSB7XHJcbiAgICAgICAgY29uc3QgY3N2VGV4dCA9IGJ1ZmZlci50b1N0cmluZygpXHJcbiAgICAgICAgY29uc3QgbGluZXMgPSBjc3ZUZXh0LnNwbGl0KC9cXHI/XFxuLykuZmlsdGVyKChsKSA9PiBsLnRyaW0oKSlcclxuICAgICAgICBpZiAoIWxpbmVzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdFbXB0eSBDU1YgZmlsZScpXHJcblxyXG4gICAgICAgIGNvbnN0IHJhd0hlYWRlcnMgPSBzcGxpdENzdkxpbmUobGluZXNbMF0pXHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHJhd0hlYWRlcnMubWFwKFxyXG4gICAgICAgICAgKGgpID0+IGNhbm9uaWNhbE1hcFtub3JtYWxpemVIZWFkZXIoaCldIHx8IGhcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHNwbGl0Q3N2TGluZShsaW5lc1tpXSlcclxuICAgICAgICAgIGNvbnN0IHJvd0RhdGE6IGFueSA9IHt9XHJcbiAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKGgsIGlkeCkgPT4ge1xyXG4gICAgICAgICAgICByb3dEYXRhW2hdID0gdmFsdWVzW2lkeF0gPz8gJydcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBkYXRhLnB1c2gocm93RGF0YSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHNlY29uZCByb3cgaXMgdGhlIFwicGVyY2VudGFnZSByb3dcIiBhbmQgc2tpcCBpdFxyXG4gICAgICAgIGlmIChkYXRhWzBdICYmIGxvb2tzTGlrZVBlcmNlbnRhZ2VSb3coZGF0YVswXSkpIHtcclxuICAgICAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKDEpXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGF3YWl0IHdvcmtib29rLnhsc3gubG9hZChieXRlcyBhcyBBcnJheUJ1ZmZlcilcclxuICAgICAgICBjb25zdCB3b3Jrc2hlZXQgPSB3b3JrYm9vay53b3Jrc2hlZXRzWzBdXHJcbiAgICAgICAgaWYgKCF3b3Jrc2hlZXQpIHRocm93IG5ldyBFcnJvcignTm8gd29ya3NoZWV0IGZvdW5kIGluIEV4Y2VsIGZpbGUnKVxyXG5cclxuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB3b3Jrc2hlZXQuZ2V0Um93KDEpXHJcbiAgICAgICAgY29uc3QgaGVhZGVyczogc3RyaW5nW10gPSBbXVxyXG4gICAgICAgIGhlYWRlclJvdy5lYWNoQ2VsbCgoY2VsbCwgY29sKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBoID0gU3RyaW5nKGNlbGwudmFsdWUgfHwgJycpLnRyaW0oKVxyXG4gICAgICAgICAgaGVhZGVyc1tjb2wgLSAxXSA9IGNhbm9uaWNhbE1hcFtub3JtYWxpemVIZWFkZXIoaCldIHx8IGhcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICBjb25zdCByb3cyID0gd29ya3NoZWV0LmdldFJvdygyKVxyXG4gICAgICAgIGNvbnN0IHJvdzJPYmo6IGFueSA9IHt9XHJcbiAgICAgICAgcm93Mi5lYWNoQ2VsbCgoY2VsbCwgY29sKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBoZWFkZXIgPSBoZWFkZXJzW2NvbCAtIDFdXHJcbiAgICAgICAgICByb3cyT2JqW2hlYWRlcl0gPSBjZWxsLnZhbHVlXHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb25zdCBza2lwUm93MiA9IGxvb2tzTGlrZVBlcmNlbnRhZ2VSb3cocm93Mk9iailcclxuXHJcbiAgICAgICAgd29ya3NoZWV0LmVhY2hSb3coeyBpbmNsdWRlRW1wdHk6IGZhbHNlIH0sIChyb3csIHJvd051bWJlcikgPT4ge1xyXG4gICAgICAgICAgaWYgKHJvd051bWJlciA9PT0gMSkgcmV0dXJuXHJcbiAgICAgICAgICBpZiAoc2tpcFJvdzIgJiYgcm93TnVtYmVyID09PSAyKSByZXR1cm5cclxuXHJcbiAgICAgICAgICBjb25zdCByb3dEYXRhOiBhbnkgPSB7fVxyXG4gICAgICAgICAgcm93LmVhY2hDZWxsKChjZWxsLCBjb2xOdW1iZXIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gaGVhZGVyc1tjb2xOdW1iZXIgLSAxXVxyXG4gICAgICAgICAgICByb3dEYXRhW2hlYWRlcl0gPSBjZWxsLnZhbHVlXHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgIGNvbnN0IGhhc0FueSA9IE9iamVjdC52YWx1ZXMocm93RGF0YSkuc29tZShcclxuICAgICAgICAgICAgKHYpID0+IHYgIT09IG51bGwgJiYgdiAhPT0gJydcclxuICAgICAgICAgIClcclxuICAgICAgICAgIGlmIChoYXNBbnkpIGRhdGEucHVzaChyb3dEYXRhKVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XHJcbiAgICAgIHJldHVybiB3aXRoQ29ycyhcclxuICAgICAgICBBcGlSZXNwb25zZS5lcnJvcihgRXJyb3IgcGFyc2luZyBmaWxlOiAke2Vyci5tZXNzYWdlfWAsIDQwMCksXHJcbiAgICAgICAgb3JpZ2luXHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRhdGEubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiB3aXRoQ29ycyhcclxuICAgICAgICBBcGlSZXNwb25zZS5lcnJvcignTm8gcGF5cm9sbCBkYXRhIGZvdW5kIGluIHRoZSBmaWxlJywgNDAwKSxcclxuICAgICAgICBvcmlnaW5cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIDIpIFByb2Nlc3Mgcm93c1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IHtcclxuICAgICAgc3VjY2Vzc2Z1bDogMCxcclxuICAgICAgZmFpbGVkOiAwLFxyXG4gICAgICBwYXlzbGlwc0dlbmVyYXRlZDogMCxcclxuICAgICAgZW1haWxzU2VudDogMCxcclxuICAgICAgcHJvY2Vzc2VkUmVjb3JkczogW10gYXMgYW55W10sXHJcbiAgICAgIGZhaWxlZFJlY29yZHM6IFtdIGFzIGFueVtdLFxyXG4gICAgICBlcnJvcnM6IFtdIGFzIHN0cmluZ1tdLFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcclxuICAgIGNvbnN0IGRlZmF1bHRNb250aE5hbWUgPSBub3cudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywgeyBtb250aDogJ2xvbmcnIH0pXHJcbiAgICBjb25zdCBkZWZhdWx0WWVhciA9IG5vdy5nZXRGdWxsWWVhcigpXHJcblxyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGRhdGEubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgIGNvbnN0IHJvdyA9IGRhdGFbaW5kZXhdXHJcbiAgICAgIGNvbnN0IGRpc3BsYXlSb3dOdW1iZXIgPSBpbmRleCArIDMgLy8gcm93IDEgPSBoZWFkZXJzLCByb3cgMiA9ICUgcm93XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJvd0RhdGEgPSByb3cgYXMgYW55XHJcblxyXG4gICAgICAgIGNvbnN0IHJhd05hbWUgPSBnZXRDZWxsKHJvd0RhdGEsICdOYW1lJykgfHwgJydcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3TmFtZS50b1N0cmluZygpLnRyaW0oKVxyXG5cclxuICAgICAgICBjb25zdCByYXdFbWFpbCA9IGdldENlbGwocm93RGF0YSwgJ0VNQUlMJykgfHwgJydcclxuICAgICAgICBjb25zdCBlbWFpbCA9IHJhd0VtYWlsLnRvU3RyaW5nKCkudHJpbSgpXHJcblxyXG4gICAgICAgIGlmICghbmFtZSAmJiAhZW1haWwpIHtcclxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSAnTWlzc2luZyBOYW1lL0VNQUlMIGZvciBzdGFmZiBpZGVudGlmaWNhdGlvbidcclxuICAgICAgICAgIHJlc3VsdHMuZmFpbGVkKytcclxuICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2goYFJvdyAke2Rpc3BsYXlSb3dOdW1iZXJ9OiAke21lc3NhZ2V9YClcclxuICAgICAgICAgIHJlc3VsdHMuZmFpbGVkUmVjb3Jkcy5wdXNoKHsgLi4ucm93RGF0YSwgZXJyb3I6IG1lc3NhZ2UgfSlcclxuICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtaXNzaW5nQ29scyA9IFJFUVVJUkVEX0NPTFMuZmlsdGVyKChjKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB2ID0gZ2V0Q2VsbChyb3dEYXRhLCBjKVxyXG4gICAgICAgICAgcmV0dXJuIHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsIHx8IHYgPT09ICcnXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKG1pc3NpbmdDb2xzLmxlbmd0aCkge1xyXG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBNaXNzaW5nIHJlcXVpcmVkIGNvbHVtbiB2YWx1ZXM6ICR7bWlzc2luZ0NvbHMuam9pbihcclxuICAgICAgICAgICAgJywgJ1xyXG4gICAgICAgICAgKX1gXHJcbiAgICAgICAgICByZXN1bHRzLmZhaWxlZCsrXHJcbiAgICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKGBSb3cgJHtkaXNwbGF5Um93TnVtYmVyfTogJHttZXNzYWdlfWApXHJcbiAgICAgICAgICByZXN1bHRzLmZhaWxlZFJlY29yZHMucHVzaCh7IC4uLnJvd0RhdGEsIGVycm9yOiBtZXNzYWdlIH0pXHJcbiAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbG9jYXRlIHN0YWZmIHJlY29yZFxyXG4gICAgICAgIGxldCBzdGFmZlJlY29yZCA9IG51bGxcclxuXHJcbiAgICAgICAgaWYgKGVtYWlsKSB7XHJcbiAgICAgICAgICBzdGFmZlJlY29yZCA9IGF3YWl0IHByaXNtYS5zdGFmZlJlY29yZC5maW5kVW5pcXVlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgICBlbWFpbF9jb21wYW55SWQ6IHtcclxuICAgICAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICAgICAgY29tcGFueUlkLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzdGFmZlJlY29yZCAmJiBuYW1lKSB7XHJcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IG5hbWUuc3BsaXQoJyAnKS5maWx0ZXIoQm9vbGVhbilcclxuICAgICAgICAgIGNvbnN0IGZpcnN0TmFtZSA9IHBhcnRzWzBdXHJcbiAgICAgICAgICBjb25zdCBsYXN0TmFtZSA9IHBhcnRzLnNsaWNlKDEpLmpvaW4oJyAnKSB8fCBwYXJ0c1swXVxyXG5cclxuICAgICAgICAgIHN0YWZmUmVjb3JkID0gYXdhaXQgcHJpc21hLnN0YWZmUmVjb3JkLmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgICAgY29tcGFueUlkLFxyXG4gICAgICAgICAgICAgIGlzQWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIE9SOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIEFORDogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluczogZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiAnaW5zZW5zaXRpdmUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiBsYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJyxcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgIEFORDogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiBmaXJzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiBsYXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2luc2Vuc2l0aXZlJyxcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXN0YWZmUmVjb3JkKSB7XHJcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYFN0YWZmIHJlY29yZCBub3QgZm91bmQgZm9yICR7bmFtZSB8fCBlbWFpbH0uIFN0YWZmIG11c3QgYmUgcHJlLXJlZ2lzdGVyZWQuYFxyXG4gICAgICAgICAgcmVzdWx0cy5mYWlsZWQrK1xyXG4gICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaChgUm93ICR7ZGlzcGxheVJvd051bWJlcn06ICR7bWVzc2FnZX1gKVxyXG4gICAgICAgICAgcmVzdWx0cy5mYWlsZWRSZWNvcmRzLnB1c2goeyAuLi5yb3dEYXRhLCBlcnJvcjogbWVzc2FnZSB9KVxyXG4gICAgICAgICAgY29udGludWVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG1vbnRoTmFtZSA9XHJcbiAgICAgICAgICByb3dEYXRhWydNb250aCddPy50b1N0cmluZygpIHx8XHJcbiAgICAgICAgICByb3dEYXRhWydNT05USCddPy50b1N0cmluZygpIHx8XHJcbiAgICAgICAgICBkZWZhdWx0TW9udGhOYW1lXHJcblxyXG4gICAgICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChcclxuICAgICAgICAgIHJvd0RhdGFbJ1llYXInXT8udG9TdHJpbmcoKSB8fFxyXG4gICAgICAgICAgICByb3dEYXRhWydZRUFSJ10/LnRvU3RyaW5nKCkgfHxcclxuICAgICAgICAgICAgZGVmYXVsdFllYXIudG9TdHJpbmcoKSxcclxuICAgICAgICAgIDEwXHJcbiAgICAgICAgKVxyXG5cclxuICAgICAgICBjb25zdCBwZXJpb2RNb250aCA9IG1vbnRoTmFtZVRvTnVtYmVyKG1vbnRoTmFtZSlcclxuXHJcbiAgICAgICAgY29uc3QgZ3Jvc3NQYXkgPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnR3Jvc3MgUGF5JykpXHJcbiAgICAgICAgY29uc3QgcHJvcmF0ZWRHcm9zc1BheSA9IG51bShnZXRDZWxsKHJvd0RhdGEsICdQcm9yYXRlZCBHcm9zcyBQYXknKSlcclxuXHJcbiAgICAgICAgY29uc3QgYmFzaWNTYWxhcnkgPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnQmFzaWMnKSlcclxuICAgICAgICBjb25zdCBob3VzaW5nID0gbnVtKGdldENlbGwocm93RGF0YSwgJ0hvdXNpbmcnKSlcclxuICAgICAgICBjb25zdCB0cmFuc3BvcnQgPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnVHJhbnNwb3J0JykpXHJcbiAgICAgICAgY29uc3QgZHJlc3NpbmcgPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnRHJlc3NpbmcnKSlcclxuICAgICAgICBjb25zdCBsZWF2ZUFsbG93YW5jZSA9IG51bShnZXRDZWxsKHJvd0RhdGEsICdMZWF2ZSBBbGxvd2FuY2UnKSlcclxuICAgICAgICBjb25zdCBlbnRlcnRhaW5tZW50ID0gbnVtKGdldENlbGwocm93RGF0YSwgJ0VudGVydGFpbm1lbnQnKSlcclxuICAgICAgICBjb25zdCB1dGlsaXR5ID0gbnVtKGdldENlbGwocm93RGF0YSwgJ1V0aWxpdHknKSlcclxuXHJcbiAgICAgICAgY29uc3QgcGF5ZWUgPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnUGF5ZWUnKSlcclxuICAgICAgICBjb25zdCBwZW5zaW9uID0gbnVtKGdldENlbGwocm93RGF0YSwgJ1BlbnNpb24nKSlcclxuICAgICAgICBjb25zdCBkZWR1Y3Rpb24gPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnRGVkdWN0aW9uJykpXHJcbiAgICAgICAgY29uc3QgYm9udXNLUEkgPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnQm9udXMgS1BJJykpXHJcbiAgICAgICAgY29uc3QgbmV0U2FsYXJ5ID0gbnVtKGdldENlbGwocm93RGF0YSwgJ05ldCBTYWxhcnknKSlcclxuICAgICAgICBjb25zdCBmaW5hbEdyb3NzID0gbnVtKGdldENlbGwocm93RGF0YSwgJ0ZJTkFMIEdST1NTJykpXHJcbiAgICAgICAgY29uc3QgbWVkaWNhbENvbnRyaWJ1dGlvbiA9IG51bShcclxuICAgICAgICAgIGdldENlbGwocm93RGF0YSwgJ01lZGljYWwgQ29udHJpYnV0aW9uJylcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGNvbnN0IHByb3JhdGVkR3Jvc3NXaXRoRXh0cmEgPSBudW0oXHJcbiAgICAgICAgICBnZXRDZWxsKHJvd0RhdGEsIFwiUFJPUkFURUQgR1JPU1MgUEFZIFdJVEggRVhUUkEgQUxMJ1dDRVwiKVxyXG4gICAgICAgIClcclxuICAgICAgICBjb25zdCB0YXhhYmxlSW5jb21lID0gbnVtKGdldENlbGwocm93RGF0YSwgJ1RBWEFCTEUgSU5DT01FJykpXHJcbiAgICAgICAgY29uc3QgY29uc29saWRhdGVkUmVsaWVmID0gbnVtKGdldENlbGwocm93RGF0YSwgJ0NvbnNvbGlkYXRlZCBSZWxpZWYnKSlcclxuXHJcbiAgICAgICAgY29uc3QgYW5udWFsUGVuc2lvbiA9IHBlbnNpb24gKiAxMlxyXG4gICAgICAgIGNvbnN0IGFubnVhbEdyb3NzUGF5ID0gZ3Jvc3NQYXkgKiAxMlxyXG5cclxuICAgICAgICBjb25zdCBlbXBsb3llclBlbnNpb24gPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnRW1wbG95ZXIgUGVuc2lvbicpKVxyXG4gICAgICAgIGNvbnN0IG5zaXRmID0gbnVtKGdldENlbGwocm93RGF0YSwgJ05TSVRGJykpXHJcbiAgICAgICAgY29uc3QgcHJvcmF0ZWRTdWJUb3RhbCA9IG51bShcclxuICAgICAgICAgIGdldENlbGwocm93RGF0YSwgJ1Byb3JhdGVkIFN1YiBUb3RhbCBJbnZvaWNlJylcclxuICAgICAgICApXHJcbiAgICAgICAgY29uc3QgbWFuYWdlbWVudEZlZSA9IG51bShnZXRDZWxsKHJvd0RhdGEsICdNZ3QgRmVlJykpXHJcbiAgICAgICAgY29uc3QgdmF0T25NYW5hZ2VtZW50RmVlID0gbnVtKFxyXG4gICAgICAgICAgZ2V0Q2VsbChyb3dEYXRhLCAnVmF0IG9uIE1hbmFnZW1lbnQgRmVlIEA3LjUlJylcclxuICAgICAgICApXHJcbiAgICAgICAgY29uc3QgdG90YWxJbnZvaWNlVmFsdWUgPSBudW0oXHJcbiAgICAgICAgICBnZXRDZWxsKHJvd0RhdGEsICdUb3RhbCBJbnZvaWNlIFZhbHVlJylcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGNvbnN0IGRheXNJbk1vbnRoID0gbnVtKFxyXG4gICAgICAgICAgZ2V0Q2VsbChyb3dEYXRhLCAnTm8gb2YgV29ya2luZyBEYXlzIGluIHRoZSBNb250aCcpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIGNvbnN0IGRheXNXb3JrZWQgPSBudW0oZ2V0Q2VsbChyb3dEYXRhLCAnTm8gb2YgZGF5cyBXb3JrZWQnKSlcclxuXHJcbiAgICAgICAgaWYgKG5ldFNhbGFyeSA8IDApIHtcclxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxyXG4gICAgICAgICAgICAnTmV0IFNhbGFyeSBjYW5ub3QgYmUgbmVnYXRpdmUuIENoZWNrIHBheXJvbGwgdmFsdWVzLidcclxuICAgICAgICAgIHJlc3VsdHMuZmFpbGVkKytcclxuICAgICAgICAgIHJlc3VsdHMuZXJyb3JzLnB1c2goYFJvdyAke2Rpc3BsYXlSb3dOdW1iZXJ9OiAke21lc3NhZ2V9YClcclxuICAgICAgICAgIHJlc3VsdHMuZmFpbGVkUmVjb3Jkcy5wdXNoKHsgLi4ucm93RGF0YSwgZXJyb3I6IG1lc3NhZ2UgfSlcclxuICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwYXlyb2xsID0gYXdhaXQgcHJpc21hLnBheXJvbGwudXBzZXJ0KHtcclxuICAgICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICAgIHN0YWZmUmVjb3JkSWRfbW9udGhfeWVhcl9jb21wYW55SWQ6IHtcclxuICAgICAgICAgICAgICBzdGFmZlJlY29yZElkOiBzdGFmZlJlY29yZC5pZCxcclxuICAgICAgICAgICAgICBtb250aDogbW9udGhOYW1lLFxyXG4gICAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgICAgY29tcGFueUlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHVwZGF0ZToge1xyXG4gICAgICAgICAgICBjb21wYW55SWQsXHJcbiAgICAgICAgICAgIG1vbnRoOiBtb250aE5hbWUsXHJcbiAgICAgICAgICAgIHllYXIsXHJcblxyXG4gICAgICAgICAgICBncm9zc1BheSxcclxuICAgICAgICAgICAgcHJvcmF0ZWRHcm9zc1BheSxcclxuICAgICAgICAgICAgYmFzaWNTYWxhcnksXHJcbiAgICAgICAgICAgIGhvdXNpbmcsXHJcbiAgICAgICAgICAgIHRyYW5zcG9ydCxcclxuICAgICAgICAgICAgZHJlc3NpbmcsXHJcbiAgICAgICAgICAgIGxlYXZlQWxsb3dhbmNlLFxyXG4gICAgICAgICAgICBlbnRlcnRhaW5tZW50LFxyXG4gICAgICAgICAgICB1dGlsaXR5LFxyXG5cclxuICAgICAgICAgICAgcHJvcmF0ZWRHcm9zc1dpdGhFeHRyYSxcclxuICAgICAgICAgICAgYW5udWFsUGVuc2lvbixcclxuICAgICAgICAgICAgYW5udWFsR3Jvc3NQYXksXHJcbiAgICAgICAgICAgIGNvbnNvbGlkYXRlZFJlbGllZixcclxuICAgICAgICAgICAgdGF4YWJsZUluY29tZSxcclxuXHJcbiAgICAgICAgICAgIGRlZHVjdGlvbnM6IGRlZHVjdGlvbixcclxuICAgICAgICAgICAgcGF5ZWUsXHJcbiAgICAgICAgICAgIHBlbnNpb25EZWR1Y3Rpb246IHBlbnNpb24sXHJcbiAgICAgICAgICAgIGJvbnVzS1BJLFxyXG4gICAgICAgICAgICBuZXRTYWxhcnksXHJcbiAgICAgICAgICAgIGZpbmFsR3Jvc3MsXHJcbiAgICAgICAgICAgIG1lZGljYWxDb250cmlidXRpb24sXHJcblxyXG4gICAgICAgICAgICBlbXBsb3llclBlbnNpb24sXHJcbiAgICAgICAgICAgIG5zaXRmLFxyXG4gICAgICAgICAgICBwcm9yYXRlZFN1YlRvdGFsLFxyXG4gICAgICAgICAgICBtYW5hZ2VtZW50RmVlLFxyXG4gICAgICAgICAgICB2YXRPbk1hbmFnZW1lbnRGZWUsXHJcbiAgICAgICAgICAgIHRvdGFsSW52b2ljZVZhbHVlLFxyXG5cclxuICAgICAgICAgICAgc3RhdHVzOiAnUFJPQ0VTU0VEJyxcclxuICAgICAgICAgICAgdXBsb2FkZWRCeTogdXNlci51c2VySWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgY3JlYXRlOiB7XHJcbiAgICAgICAgICAgIGNvbXBhbnlJZCxcclxuICAgICAgICAgICAgc3RhZmZSZWNvcmRJZDogc3RhZmZSZWNvcmQuaWQsXHJcbiAgICAgICAgICAgIG1vbnRoOiBtb250aE5hbWUsXHJcbiAgICAgICAgICAgIHllYXIsXHJcblxyXG4gICAgICAgICAgICBncm9zc1BheSxcclxuICAgICAgICAgICAgcHJvcmF0ZWRHcm9zc1BheSxcclxuICAgICAgICAgICAgYmFzaWNTYWxhcnksXHJcbiAgICAgICAgICAgIGhvdXNpbmcsXHJcbiAgICAgICAgICAgIHRyYW5zcG9ydCxcclxuICAgICAgICAgICAgZHJlc3NpbmcsXHJcbiAgICAgICAgICAgIGxlYXZlQWxsb3dhbmNlLFxyXG4gICAgICAgICAgICBlbnRlcnRhaW5tZW50LFxyXG4gICAgICAgICAgICB1dGlsaXR5LFxyXG5cclxuICAgICAgICAgICAgcHJvcmF0ZWRHcm9zc1dpdGhFeHRyYSxcclxuICAgICAgICAgICAgYW5udWFsUGVuc2lvbixcclxuICAgICAgICAgICAgYW5udWFsR3Jvc3NQYXksXHJcbiAgICAgICAgICAgIGNvbnNvbGlkYXRlZFJlbGllZixcclxuICAgICAgICAgICAgdGF4YWJsZUluY29tZSxcclxuXHJcbiAgICAgICAgICAgIGRlZHVjdGlvbnM6IGRlZHVjdGlvbixcclxuICAgICAgICAgICAgcGF5ZWUsXHJcbiAgICAgICAgICAgIHBlbnNpb25EZWR1Y3Rpb246IHBlbnNpb24sXHJcbiAgICAgICAgICAgIGJvbnVzS1BJLFxyXG4gICAgICAgICAgICBuZXRTYWxhcnksXHJcbiAgICAgICAgICAgIGZpbmFsR3Jvc3MsXHJcbiAgICAgICAgICAgIG1lZGljYWxDb250cmlidXRpb24sXHJcblxyXG4gICAgICAgICAgICBlbXBsb3llclBlbnNpb24sXHJcbiAgICAgICAgICAgIG5zaXRmLFxyXG4gICAgICAgICAgICBwcm9yYXRlZFN1YlRvdGFsLFxyXG4gICAgICAgICAgICBtYW5hZ2VtZW50RmVlLFxyXG4gICAgICAgICAgICB2YXRPbk1hbmFnZW1lbnRGZWUsXHJcbiAgICAgICAgICAgIHRvdGFsSW52b2ljZVZhbHVlLFxyXG5cclxuICAgICAgICAgICAgc3RhdHVzOiAnUFJPQ0VTU0VEJyxcclxuICAgICAgICAgICAgdXBsb2FkZWRCeTogdXNlci51c2VySWQsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIFBheXNsaXAgY2hlY2tcclxuICAgICAgICBjb25zdCBleGlzdGluZ1BheXNsaXAgPSBhd2FpdCBwcmlzbWEucGF5c2xpcC5maW5kRmlyc3Qoe1xyXG4gICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgc3RhZmZSZWNvcmRJZDogc3RhZmZSZWNvcmQuaWQsXHJcbiAgICAgICAgICAgIG1vbnRoOiBtb250aE5hbWUsXHJcbiAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgIGNvbXBhbnlJZCxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgbGV0IHBkZlBhdGg6IHN0cmluZyB8IG51bGwgPSBudWxsXHJcblxyXG4gICAgICAgIGlmICghZXhpc3RpbmdQYXlzbGlwKSB7XHJcbiAgICAgICAgICBjb25zdCBwYXJzZWRSb3c6IFBhcnNlZFBheXJvbGxSb3cgPSB7XHJcbiAgICAgICAgICAgIHJvd051bWJlcjogZGlzcGxheVJvd051bWJlcixcclxuICAgICAgICAgICAgc3RhZmZJZDogc3RhZmZSZWNvcmQuc3RhZmZJZCxcclxuICAgICAgICAgICAgZW1haWw6IHN0YWZmUmVjb3JkLmVtYWlsLFxyXG4gICAgICAgICAgICBmdWxsTmFtZTogYCR7c3RhZmZSZWNvcmQuZmlyc3ROYW1lfSAke3N0YWZmUmVjb3JkLmxhc3ROYW1lfWAsXHJcbiAgICAgICAgICAgIHBlcmlvZE1vbnRoLFxyXG4gICAgICAgICAgICBwZXJpb2RZZWFyOiB5ZWFyLFxyXG5cclxuICAgICAgICAgICAgYmFzaWNTYWxhcnksXHJcbiAgICAgICAgICAgIGhvdXNpbmdBbGxvd2FuY2U6IGhvdXNpbmcsXHJcbiAgICAgICAgICAgIHRyYW5zcG9ydEFsbG93YW5jZTogdHJhbnNwb3J0LFxyXG4gICAgICAgICAgICB0cmFuc3BvcnRhdGlvbkFsbG93YW5jZTogZHJlc3NpbmcsXHJcbiAgICAgICAgICAgIG90aGVyQWxsb3dhbmNlczogbGVhdmVBbGxvd2FuY2UgKyBlbnRlcnRhaW5tZW50ICsgdXRpbGl0eSxcclxuXHJcbiAgICAgICAgICAgIGdyb3NzUGF5LFxyXG4gICAgICAgICAgICBwYXllZSxcclxuICAgICAgICAgICAgcGVuc2lvbixcclxuICAgICAgICAgICAgbmV0UGF5OiBuZXRTYWxhcnksXHJcblxyXG4gICAgICAgICAgICBkYXlzSW5Nb250aCxcclxuICAgICAgICAgICAgZGF5c1dvcmtlZCxcclxuICAgICAgICAgICAgcmF3Um93OiByb3dEYXRhLFxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcGRmUGF0aDogZ2VuZXJhdGVkUGF0aCB9ID0gYXdhaXQgZ2VuZXJhdGVQYXlzbGlwUGRmKHtcclxuICAgICAgICAgICAgICBzdGFmZjoge1xyXG4gICAgICAgICAgICAgICAgc3RhZmZJZDogc3RhZmZSZWNvcmQuc3RhZmZJZCxcclxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogc3RhZmZSZWNvcmQuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6IHN0YWZmUmVjb3JkLmxhc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgZW1haWw6IHN0YWZmUmVjb3JkLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgZGVwYXJ0bWVudDogc3RhZmZSZWNvcmQuZGVwYXJ0bWVudCB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBkZXNpZ25hdGlvbjogc3RhZmZSZWNvcmQucG9zaXRpb24gfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcGF5cm9sbDogcGFyc2VkUm93LFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBwZGZQYXRoID0gZ2VuZXJhdGVkUGF0aFxyXG4gICAgICAgICAgICByZXN1bHRzLnBheXNsaXBzR2VuZXJhdGVkKytcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgRmFpbGVkIHRvIGdlbmVyYXRlIHBheXNsaXAgUERGIC0gJHtlcnIubWVzc2FnZX1gXHJcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkKytcclxuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaChgUm93ICR7ZGlzcGxheVJvd051bWJlcn06ICR7bWVzc2FnZX1gKVxyXG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZFJlY29yZHMucHVzaCh7IC4uLnJvd0RhdGEsIGVycm9yOiBtZXNzYWdlIH0pXHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGF5c2xpcEZpbGVOYW1lID0gcGF0aC5iYXNlbmFtZShwZGZQYXRoKVxyXG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEucGF5c2xpcC5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHBheXJvbGxJZDogcGF5cm9sbC5pZCxcclxuICAgICAgICAgICAgICAgIHN0YWZmUmVjb3JkSWQ6IHN0YWZmUmVjb3JkLmlkLFxyXG4gICAgICAgICAgICAgICAgY29tcGFueUlkLFxyXG4gICAgICAgICAgICAgICAgZmlsZVBhdGg6IHBkZlBhdGgsXHJcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogcGF5c2xpcEZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgbW9udGg6IG1vbnRoTmFtZSxcclxuICAgICAgICAgICAgICAgIHllYXIsXHJcbiAgICAgICAgICAgICAgICBncm9zc1BheSxcclxuICAgICAgICAgICAgICAgIG5ldFBheTogbmV0U2FsYXJ5LFxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYFBheXNsaXAgREIgcmVjb3JkIGVycm9yIC0gJHtlcnIubWVzc2FnZX1gXHJcbiAgICAgICAgICAgIHJlc3VsdHMuZmFpbGVkKytcclxuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaChgUm93ICR7ZGlzcGxheVJvd051bWJlcn06ICR7bWVzc2FnZX1gKVxyXG4gICAgICAgICAgICByZXN1bHRzLmZhaWxlZFJlY29yZHMucHVzaCh7IC4uLnJvd0RhdGEsIGVycm9yOiBtZXNzYWdlIH0pXHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2VuZEVtYWlscykge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgc2VuZFBheXJvbGxOb3RpZmljYXRpb25FbWFpbChzdGFmZlJlY29yZCwge1xyXG4gICAgICAgICAgICAgIG1vbnRoOiBtb250aE5hbWUsXHJcbiAgICAgICAgICAgICAgeWVhcixcclxuICAgICAgICAgICAgICBuZXRTYWxhcnksXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHJlc3VsdHMuZW1haWxzU2VudCsrXHJcbiAgICAgICAgICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgICAgICAgICBjb25zdCBtc2cgPSBgRW1haWwgc2VuZGluZyBmYWlsZWQgLSAke2Vyci5tZXNzYWdlfWBcclxuICAgICAgICAgICAgcmVzdWx0cy5lcnJvcnMucHVzaChgUm93ICR7ZGlzcGxheVJvd051bWJlcn06ICR7bXNnfWApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXN1bHRzLnN1Y2Nlc3NmdWwrK1xyXG4gICAgICAgIHJlc3VsdHMucHJvY2Vzc2VkUmVjb3Jkcy5wdXNoKHtcclxuICAgICAgICAgIC4uLnJvd0RhdGEsXHJcbiAgICAgICAgICBzdGFmZklkOiBzdGFmZlJlY29yZC5zdGFmZklkLFxyXG4gICAgICAgICAgc3RhZmZOYW1lOiBgJHtzdGFmZlJlY29yZC5maXJzdE5hbWV9ICR7c3RhZmZSZWNvcmQubGFzdE5hbWV9YCxcclxuICAgICAgICAgIG5ldFNhbGFyeSxcclxuICAgICAgICAgIHN0YXR1czogJ1BST0NFU1NFRCcsXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlID0gZXJyPy5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ1xyXG4gICAgICAgIHJlc3VsdHMuZmFpbGVkKytcclxuICAgICAgICByZXN1bHRzLmVycm9ycy5wdXNoKGBSb3cgJHtkaXNwbGF5Um93TnVtYmVyfTogJHttZXNzYWdlfWApXHJcbiAgICAgICAgcmVzdWx0cy5mYWlsZWRSZWNvcmRzLnB1c2goeyAuLi4ocm93IGFzIGFueSksIGVycm9yOiBtZXNzYWdlIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cGxvYWREaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3VwbG9hZHMnLCAncGF5cm9sbCcpXHJcbiAgICBhd2FpdCBta2Rpcih1cGxvYWREaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXHJcblxyXG4gICAgbGV0IHByb2Nlc3NlZEZpbGVQYXRoOiBzdHJpbmcgfCBudWxsID0gbnVsbFxyXG5cclxuICAgIGlmIChyZXN1bHRzLmZhaWxlZFJlY29yZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBmYWlsZWRXb3JrYm9vayA9IG5ldyBFeGNlbEpTLldvcmtib29rKClcclxuICAgICAgY29uc3QgZmFpbGVkV29ya3NoZWV0ID0gZmFpbGVkV29ya2Jvb2suYWRkV29ya3NoZWV0KCdGYWlsZWQgUmVjb3JkcycpXHJcblxyXG4gICAgICBjb25zdCBoZWFkZXJzU2V0ID0gbmV3IFNldDxzdHJpbmc+KClcclxuICAgICAgcmVzdWx0cy5mYWlsZWRSZWNvcmRzLmZvckVhY2goKHIpID0+XHJcbiAgICAgICAgT2JqZWN0LmtleXMocikuZm9yRWFjaCgoaykgPT4gaGVhZGVyc1NldC5hZGQoaykpXHJcbiAgICAgIClcclxuICAgICAgaGVhZGVyc1NldC5hZGQoJ2Vycm9yJylcclxuXHJcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBBcnJheS5mcm9tKGhlYWRlcnNTZXQpXHJcblxyXG4gICAgICBmYWlsZWRXb3Jrc2hlZXQuY29sdW1ucyA9IGhlYWRlcnMubWFwKChoKSA9PiAoe1xyXG4gICAgICAgIGhlYWRlcjogaCxcclxuICAgICAgICBrZXk6IGgsXHJcbiAgICAgICAgd2lkdGg6IDIyLFxyXG4gICAgICB9KSlcclxuXHJcbiAgICAgIHJlc3VsdHMuZmFpbGVkUmVjb3Jkcy5mb3JFYWNoKChyZWNvcmQpID0+IHtcclxuICAgICAgICBmYWlsZWRXb3Jrc2hlZXQuYWRkUm93KHJlY29yZClcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNvbnN0IGhlYWRlclJvdyA9IGZhaWxlZFdvcmtzaGVldC5nZXRSb3coMSlcclxuICAgICAgaGVhZGVyUm93LmZvbnQgPSB7IGJvbGQ6IHRydWUsIGNvbG9yOiB7IGFyZ2I6ICdGRkZGRkZGRicgfSB9XHJcbiAgICAgIGhlYWRlclJvdy5maWxsID0ge1xyXG4gICAgICAgIHR5cGU6ICdwYXR0ZXJuJyxcclxuICAgICAgICBwYXR0ZXJuOiAnc29saWQnLFxyXG4gICAgICAgIGZnQ29sb3I6IHsgYXJnYjogJ0ZGREMzNTQ1JyB9LFxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmYWlsZWRGaWxlTmFtZSA9IGBmYWlsZWQtcmVjb3Jkcy0ke0RhdGUubm93KCl9Lnhsc3hgXHJcbiAgICAgIGNvbnN0IGZhaWxlZEZpbGVQYXRoID0gcGF0aC5qb2luKHVwbG9hZERpciwgZmFpbGVkRmlsZU5hbWUpXHJcblxyXG4gICAgICBjb25zdCBmYWlsZWRCdWZmZXIgPSBhd2FpdCBmYWlsZWRXb3JrYm9vay54bHN4LndyaXRlQnVmZmVyKClcclxuICAgICAgYXdhaXQgd3JpdGVGaWxlKGZhaWxlZEZpbGVQYXRoLCBCdWZmZXIuZnJvbShmYWlsZWRCdWZmZXIgYXMgYW55KSlcclxuXHJcbiAgICAgIHByb2Nlc3NlZEZpbGVQYXRoID0gZmFpbGVkRmlsZVBhdGhcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cGxvYWRSZWNvcmQgPSBhd2FpdCBwcmlzbWEucGF5cm9sbFVwbG9hZC5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgY29tcGFueUlkLFxyXG4gICAgICAgIGZpbGVOYW1lOiBmaWxlLm5hbWUsXHJcbiAgICAgICAgZmlsZVBhdGg6IHBhdGguam9pbih1cGxvYWREaXIsIGZpbGUubmFtZSksXHJcbiAgICAgICAgcHJvY2Vzc2VkRmlsZVBhdGgsXHJcbiAgICAgICAgcHJvY2Vzc2VkRmlsZU5hbWU6IHByb2Nlc3NlZEZpbGVQYXRoXHJcbiAgICAgICAgICA/IHBhdGguYmFzZW5hbWUocHJvY2Vzc2VkRmlsZVBhdGgpXHJcbiAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgdG90YWxSZWNvcmRzOiBkYXRhLmxlbmd0aCxcclxuICAgICAgICBzdWNjZXNzZnVsOiByZXN1bHRzLnN1Y2Nlc3NmdWwsXHJcbiAgICAgICAgZmFpbGVkOiByZXN1bHRzLmZhaWxlZCxcclxuICAgICAgICBlcnJvcnM6IHJlc3VsdHMuZXJyb3JzLFxyXG4gICAgICAgIHVwbG9hZGVkQnk6IHVzZXIudXNlcklkLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuXHJcbiAgICBhd2FpdCB3cml0ZUZpbGUocGF0aC5qb2luKHVwbG9hZERpciwgZmlsZS5uYW1lKSwgYnVmZmVyKVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YTogYW55ID0ge1xyXG4gICAgICByZXN1bHRzLFxyXG4gICAgICB1cGxvYWRJZDogdXBsb2FkUmVjb3JkLmlkLFxyXG4gICAgICBzdW1tYXJ5OiB7XHJcbiAgICAgICAgdG90YWxQcm9jZXNzZWQ6IGRhdGEubGVuZ3RoLFxyXG4gICAgICAgIHN1Y2Nlc3NmdWw6IHJlc3VsdHMuc3VjY2Vzc2Z1bCxcclxuICAgICAgICBmYWlsZWQ6IHJlc3VsdHMuZmFpbGVkLFxyXG4gICAgICAgIHBheXNsaXBzR2VuZXJhdGVkOiByZXN1bHRzLnBheXNsaXBzR2VuZXJhdGVkLFxyXG4gICAgICAgIGVtYWlsc1NlbnQ6IHJlc3VsdHMuZW1haWxzU2VudCxcclxuICAgICAgfSxcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0cy5mYWlsZWRSZWNvcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmVzcG9uc2VEYXRhLmZhaWxlZFJlY29yZHNEb3dubG9hZCA9XHJcbiAgICAgICAgYC9hcGkvcGF5cm9sbC9kb3dubG9hZC1mYWlsZWQvJHt1cGxvYWRSZWNvcmQuaWR9YFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB3aXRoQ29ycyhcclxuICAgICAgQXBpUmVzcG9uc2Uuc3VjY2VzcyhcclxuICAgICAgICByZXNwb25zZURhdGEsXHJcbiAgICAgICAgJ1BheXJvbGwgcHJvY2Vzc2luZyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5J1xyXG4gICAgICApLFxyXG4gICAgICBvcmlnaW5cclxuICAgIClcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgcmV0dXJuIHdpdGhDb3JzKFxyXG4gICAgICBoYW5kbGVBcGlFcnJvcihlcnJvciksXHJcbiAgICAgIG9yaWdpblxyXG4gICAgKVxyXG4gIH1cclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gR0VUIC9hcGkvcGF5cm9sbC91cGxvYWRcclxuLy8gUGF5cm9sbCB0ZW1wbGF0ZSBkb3dubG9hZFxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3Qgb3JpZ2luID0gcmVxdWVzdC5oZWFkZXJzLmdldCgnb3JpZ2luJylcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdhdXRob3JpemF0aW9uJylcclxuICAgIGlmICghYXV0aEhlYWRlcikge1xyXG4gICAgICByZXR1cm4gd2l0aENvcnMoXHJcbiAgICAgICAgQXBpUmVzcG9uc2UuZXJyb3IoJ0F1dGhvcml6YXRpb24gaGVhZGVyIG1pc3NpbmcnLCA0MDEpLFxyXG4gICAgICAgIG9yaWdpblxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnJlcGxhY2UoJ0JlYXJlciAnLCAnJylcclxuICAgIHJlcXVpcmVSb2xlKHRva2VuLCBbJ0hSJywgJ1NVUEVSX0FETUlOJ10pXHJcblxyXG4gICAgY29uc3Qgd29ya2Jvb2sgPSBuZXcgRXhjZWxKUy5Xb3JrYm9vaygpXHJcbiAgICBjb25zdCB3b3Jrc2hlZXQgPSB3b3JrYm9vay5hZGRXb3Jrc2hlZXQoJ1BheXJvbGwgVGVtcGxhdGUnKVxyXG5cclxuICAgIHdvcmtzaGVldC5hZGRSb3coW1xyXG4gICAgICAnTmFtZScsXHJcbiAgICAgICdSZXN1bXB0aW9uIERhdGUnLFxyXG4gICAgICAnTm8gb2YgV29ya2luZyBEYXlzIGluIHRoZSBNb250aCcsXHJcbiAgICAgICcgTm8gb2YgZGF5cyBXb3JrZWQgJyxcclxuICAgICAgJ0dyb3NzIFBheScsXHJcbiAgICAgICdQcm9yYXRlZCBHcm9zcyBQYXknLFxyXG4gICAgICAnQmFzaWMnLFxyXG4gICAgICAnSG91c2luZycsXHJcbiAgICAgICdUcmFuc3BvcnQnLFxyXG4gICAgICAnRHJlc3NpbmcnLFxyXG4gICAgICAnTGVhdmUgQWxsb3dhbmNlJyxcclxuICAgICAgJ0VudGVydGFpbm1lbnQnLFxyXG4gICAgICAnVXRpbGl0eScsXHJcbiAgICAgICdTYWxhcnkgT2YgQXR0ZW5kYW5jZSAnLFxyXG4gICAgICBcIlBST1JBVEVEIEdST1NTIFBBWSBXSVRIIEVYVFJBIEFMTCdXQ0VcIixcclxuICAgICAgJ1RBWEFCTEUgSU5DT01FJyxcclxuICAgICAgJ1BheWVlJyxcclxuICAgICAgJ1BlbnNpb24nLFxyXG4gICAgICAnRGVkdWN0aW9uICcsXHJcbiAgICAgICdCb251cyBLUEkgJyxcclxuICAgICAgJ05ldCBTYWxhcnknLFxyXG4gICAgICAnRklOQUwgR1JPU1MnLFxyXG4gICAgICAnTWVkaWNhbCBDb250cmlidXRpb24nLFxyXG4gICAgICAnRW1wbG95ZXIgUGVuc2lvbicsXHJcbiAgICAgICdOU0lURicsXHJcbiAgICAgICdQcm9yYXRlZCBTdWIgVG90YWxcXG5JbnZvaWNlJyxcclxuICAgICAgJ01ndCBGZWUnLFxyXG4gICAgICAnVmF0IG9uIE1hbmFnZW1lbnQgRmVlIEA3LjUlJyxcclxuICAgICAgJ1RvdGFsIEludm9pY2VcXG5WYWx1ZScsXHJcbiAgICAgICdFTUFJTCcsXHJcbiAgICBdKVxyXG5cclxuICAgIHdvcmtzaGVldC5hZGRSb3coW1xyXG4gICAgICAnJyxcclxuICAgICAgJycsXHJcbiAgICAgICcnLFxyXG4gICAgICAnJyxcclxuICAgICAgJycsXHJcbiAgICAgICcnLFxyXG4gICAgICAnNTAlJyxcclxuICAgICAgJzI1JScsXHJcbiAgICAgICcyNSUnLFxyXG4gICAgICAnMTAlJyxcclxuICAgICAgJzguMzMlJyxcclxuICAgICAgJzUlJyxcclxuICAgICAgJzUlJyxcclxuICAgICAgJycsXHJcbiAgICAgICcnLFxyXG4gICAgICAnJyxcclxuICAgICAgJycsXHJcbiAgICAgICcnLFxyXG4gICAgICAnJyxcclxuICAgICAgJycsXHJcbiAgICAgICcnLFxyXG4gICAgICAnJyxcclxuICAgICAgJzElJyxcclxuICAgICAgJzEwJScsXHJcbiAgICAgICcnLFxyXG4gICAgICAnJyxcclxuICAgICAgJycsXHJcbiAgICAgICcnLFxyXG4gICAgICAnJyxcclxuICAgICAgJycsXHJcbiAgICBdKVxyXG5cclxuICAgIHdvcmtzaGVldC5hZGRSb3coWydJTVBPUlRBTlQ6J10pXHJcbiAgICB3b3Jrc2hlZXQuYWRkUm93KFsnLSBBbGwgYW1vdW50cyBzaG91bGQgYmUgaW4gTmFpcmEnXSlcclxuICAgIHdvcmtzaGVldC5hZGRSb3coWyctIFN0YWZmIG11c3QgYmUgcHJlLXJlZ2lzdGVyZWQgaW4gdGhlIHN5c3RlbSddKVxyXG4gICAgd29ya3NoZWV0LmFkZFJvdyhbXHJcbiAgICAgICctIE5hbWUgb3IgRU1BSUwgbXVzdCBtYXRjaCBleGFjdGx5IHdpdGggcmVnaXN0ZXJlZCBzdGFmZiByZWNvcmQnLFxyXG4gICAgXSlcclxuICAgIHdvcmtzaGVldC5hZGRSb3coW1xyXG4gICAgICAnLSBJZiBhIHJlcXVpcmVkIGNvbHVtbiBpcyBtaXNzaW5nIGluIGEgcm93LCB0aGF0IHJvdyB3aWxsIGZhaWwgYW5kIGJlIGluY2x1ZGVkIGluIGZhaWxlZC1yZWNvcmRzIGRvd25sb2FkLicsXHJcbiAgICBdKVxyXG5cclxuICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IHdvcmtib29rLnhsc3gud3JpdGVCdWZmZXIoKVxyXG5cclxuICAgIGNvbnN0IGV4Y2VsUmVzcG9uc2UgPSBuZXcgTmV4dFJlc3BvbnNlKGJ1ZmZlciBhcyBhbnksIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOlxyXG4gICAgICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0JyxcclxuICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbic6XHJcbiAgICAgICAgICAnYXR0YWNobWVudDsgZmlsZW5hbWU9XCJwYXlyb2xsLXRlbXBsYXRlLnhsc3hcIicsXHJcbiAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tY2FjaGUnLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gd2l0aENvcnMoZXhjZWxSZXNwb25zZSwgb3JpZ2luKVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gd2l0aENvcnMoXHJcbiAgICAgIGhhbmRsZUFwaUVycm9yKGVycm9yKSxcclxuICAgICAgb3JpZ2luXHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcmlzbWEiLCJyZXF1aXJlUm9sZSIsIkFwaVJlc3BvbnNlIiwiaGFuZGxlQXBpRXJyb3IiLCJzZW5kUGF5cm9sbE5vdGlmaWNhdGlvbkVtYWlsIiwiRXhjZWxKUyIsIndyaXRlRmlsZSIsIm1rZGlyIiwicGF0aCIsImdlbmVyYXRlUGF5c2xpcFBkZiIsImhhbmRsZUNvcnNPcHRpb25zIiwid2l0aENvcnMiLCJub3JtYWxpemVIZWFkZXIiLCJoIiwidG9TdHJpbmciLCJyZXBsYWNlIiwidHJpbSIsInRvTG93ZXJDYXNlIiwibW9udGhOYW1lVG9OdW1iZXIiLCJtb250aCIsIm5vcm1hbGl6ZWQiLCJtb250aHMiLCJpZHgiLCJpbmRleE9mIiwiYXNOdW1iZXIiLCJOdW1iZXIiLCJpc0Zpbml0ZSIsIm51bSIsInYiLCJ1bmRlZmluZWQiLCJDQU5PTklDQUxfSEVBREVSUyIsImNhbm9uaWNhbE1hcCIsIlJFUVVJUkVEX0NPTFMiLCJnZXRDZWxsIiwicm93IiwiY2Fub25pY2FsIiwiYWN0dWFsS2V5IiwibG9va3NMaWtlUGVyY2VudGFnZVJvdyIsInJvd09iaiIsImNvbCIsImluY2x1ZGVzIiwic3BsaXRDc3ZMaW5lIiwibGluZSIsInJlc3VsdCIsImN1ciIsImluUXVvdGVzIiwiaSIsImxlbmd0aCIsImNoIiwicHVzaCIsIk9QVElPTlMiLCJyZXF1ZXN0IiwiUE9TVCIsIm9yaWdpbiIsImhlYWRlcnMiLCJnZXQiLCJhdXRoSGVhZGVyIiwiZXJyb3IiLCJ0b2tlbiIsInVzZXIiLCJjb21wYW55SWQiLCJmb3JtRGF0YSIsImZpbGUiLCJzZW5kRW1haWxzIiwiYnl0ZXMiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJmaWxlRXh0ZW5zaW9uIiwibmFtZSIsInNwbGl0IiwicG9wIiwiaXNFeGNlbCIsImlzQ3N2IiwidHlwZSIsImRhdGEiLCJ3b3JrYm9vayIsIldvcmtib29rIiwiY3N2VGV4dCIsImxpbmVzIiwiZmlsdGVyIiwibCIsIkVycm9yIiwicmF3SGVhZGVycyIsIm1hcCIsInZhbHVlcyIsInJvd0RhdGEiLCJmb3JFYWNoIiwic2xpY2UiLCJ4bHN4IiwibG9hZCIsIndvcmtzaGVldCIsIndvcmtzaGVldHMiLCJoZWFkZXJSb3ciLCJnZXRSb3ciLCJlYWNoQ2VsbCIsImNlbGwiLCJTdHJpbmciLCJ2YWx1ZSIsInJvdzIiLCJyb3cyT2JqIiwiaGVhZGVyIiwic2tpcFJvdzIiLCJlYWNoUm93IiwiaW5jbHVkZUVtcHR5Iiwicm93TnVtYmVyIiwiY29sTnVtYmVyIiwiaGFzQW55IiwiT2JqZWN0Iiwic29tZSIsImVyciIsIm1lc3NhZ2UiLCJyZXN1bHRzIiwic3VjY2Vzc2Z1bCIsImZhaWxlZCIsInBheXNsaXBzR2VuZXJhdGVkIiwiZW1haWxzU2VudCIsInByb2Nlc3NlZFJlY29yZHMiLCJmYWlsZWRSZWNvcmRzIiwiZXJyb3JzIiwibm93IiwiRGF0ZSIsImRlZmF1bHRNb250aE5hbWUiLCJ0b0xvY2FsZVN0cmluZyIsImRlZmF1bHRZZWFyIiwiZ2V0RnVsbFllYXIiLCJpbmRleCIsImRpc3BsYXlSb3dOdW1iZXIiLCJyYXdOYW1lIiwicmF3RW1haWwiLCJlbWFpbCIsIm1pc3NpbmdDb2xzIiwiYyIsImpvaW4iLCJzdGFmZlJlY29yZCIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImVtYWlsX2NvbXBhbnlJZCIsInBhcnRzIiwiQm9vbGVhbiIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZmluZEZpcnN0IiwiaXNBY3RpdmUiLCJPUiIsIkFORCIsImNvbnRhaW5zIiwibW9kZSIsIm1vbnRoTmFtZSIsInllYXIiLCJwYXJzZUludCIsInBlcmlvZE1vbnRoIiwiZ3Jvc3NQYXkiLCJwcm9yYXRlZEdyb3NzUGF5IiwiYmFzaWNTYWxhcnkiLCJob3VzaW5nIiwidHJhbnNwb3J0IiwiZHJlc3NpbmciLCJsZWF2ZUFsbG93YW5jZSIsImVudGVydGFpbm1lbnQiLCJ1dGlsaXR5IiwicGF5ZWUiLCJwZW5zaW9uIiwiZGVkdWN0aW9uIiwiYm9udXNLUEkiLCJuZXRTYWxhcnkiLCJmaW5hbEdyb3NzIiwibWVkaWNhbENvbnRyaWJ1dGlvbiIsInByb3JhdGVkR3Jvc3NXaXRoRXh0cmEiLCJ0YXhhYmxlSW5jb21lIiwiY29uc29saWRhdGVkUmVsaWVmIiwiYW5udWFsUGVuc2lvbiIsImFubnVhbEdyb3NzUGF5IiwiZW1wbG95ZXJQZW5zaW9uIiwibnNpdGYiLCJwcm9yYXRlZFN1YlRvdGFsIiwibWFuYWdlbWVudEZlZSIsInZhdE9uTWFuYWdlbWVudEZlZSIsInRvdGFsSW52b2ljZVZhbHVlIiwiZGF5c0luTW9udGgiLCJkYXlzV29ya2VkIiwicGF5cm9sbCIsInVwc2VydCIsInN0YWZmUmVjb3JkSWRfbW9udGhfeWVhcl9jb21wYW55SWQiLCJzdGFmZlJlY29yZElkIiwiaWQiLCJ1cGRhdGUiLCJkZWR1Y3Rpb25zIiwicGVuc2lvbkRlZHVjdGlvbiIsInN0YXR1cyIsInVwbG9hZGVkQnkiLCJ1c2VySWQiLCJjcmVhdGUiLCJleGlzdGluZ1BheXNsaXAiLCJwYXlzbGlwIiwicGRmUGF0aCIsInBhcnNlZFJvdyIsInN0YWZmSWQiLCJmdWxsTmFtZSIsInBlcmlvZFllYXIiLCJob3VzaW5nQWxsb3dhbmNlIiwidHJhbnNwb3J0QWxsb3dhbmNlIiwidHJhbnNwb3J0YXRpb25BbGxvd2FuY2UiLCJvdGhlckFsbG93YW5jZXMiLCJuZXRQYXkiLCJyYXdSb3ciLCJnZW5lcmF0ZWRQYXRoIiwic3RhZmYiLCJkZXBhcnRtZW50IiwiZGVzaWduYXRpb24iLCJwb3NpdGlvbiIsInBheXNsaXBGaWxlTmFtZSIsImJhc2VuYW1lIiwicGF5cm9sbElkIiwiZmlsZVBhdGgiLCJmaWxlTmFtZSIsIm1zZyIsInN0YWZmTmFtZSIsInVwbG9hZERpciIsInByb2Nlc3MiLCJjd2QiLCJyZWN1cnNpdmUiLCJwcm9jZXNzZWRGaWxlUGF0aCIsImZhaWxlZFdvcmtib29rIiwiZmFpbGVkV29ya3NoZWV0IiwiYWRkV29ya3NoZWV0IiwiaGVhZGVyc1NldCIsIlNldCIsInIiLCJrZXlzIiwiayIsImFkZCIsIkFycmF5IiwiY29sdW1ucyIsImtleSIsIndpZHRoIiwicmVjb3JkIiwiYWRkUm93IiwiZm9udCIsImJvbGQiLCJjb2xvciIsImFyZ2IiLCJmaWxsIiwicGF0dGVybiIsImZnQ29sb3IiLCJmYWlsZWRGaWxlTmFtZSIsImZhaWxlZEZpbGVQYXRoIiwiZmFpbGVkQnVmZmVyIiwid3JpdGVCdWZmZXIiLCJ1cGxvYWRSZWNvcmQiLCJwYXlyb2xsVXBsb2FkIiwicHJvY2Vzc2VkRmlsZU5hbWUiLCJ0b3RhbFJlY29yZHMiLCJyZXNwb25zZURhdGEiLCJ1cGxvYWRJZCIsInN1bW1hcnkiLCJ0b3RhbFByb2Nlc3NlZCIsImZhaWxlZFJlY29yZHNEb3dubG9hZCIsInN1Y2Nlc3MiLCJHRVQiLCJleGNlbFJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/payroll/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/auth.ts":
/*!*****************************!*\
  !*** ./src/app/lib/auth.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comparePassword: () => (/* binding */ comparePassword),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   requireAuth: () => (/* binding */ requireAuth),\n/* harmony export */   requireCompany: () => (/* binding */ requireCompany),\n/* harmony export */   requireRole: () => (/* binding */ requireRole),\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n// src/app/lib/auth.ts\n\n\nfunction getJwtSecret() {\n    const secret = process.env.JWT_SECRET;\n    if (!secret) throw new Error(\"JWT_SECRET environment variable is not set\");\n    return secret;\n}\nasync function hashPassword(password) {\n    const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().genSalt(10);\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, salt);\n}\nasync function comparePassword(password, hashed) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(password, hashed);\n}\n// type cast to avoid jsonwebtoken overload issues\nfunction signToken(payload, expiresIn = \"7d\") {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, getJwtSecret(), {\n        expiresIn\n    });\n}\nconst verifyToken = (token)=>{\n    try {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, getJwtSecret());\n    } catch  {\n        return null;\n    }\n};\nconst requireAuth = (token)=>{\n    if (!token) throw new Error(\"Authentication required\");\n    const decoded = verifyToken(token);\n    if (!decoded) throw new Error(\"Invalid or expired token\");\n    return decoded;\n};\nconst requireRole = (token, allowedRoles)=>{\n    const user = requireAuth(token);\n    if (!allowedRoles.includes(user.role)) {\n        throw new Error(\"Insufficient permissions\");\n    }\n    return user;\n};\nconst requireCompany = (token)=>{\n    const user = requireAuth(token);\n    if (!user.companyId) throw new Error(\"Company context missing\");\n    return user.companyId;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi9hdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEsc0JBQXNCO0FBQ1E7QUFDRDtBQVM3QixTQUFTRTtJQUNQLE1BQU1DLFNBQVNDLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtJQUNyQyxJQUFJLENBQUNILFFBQVEsTUFBTSxJQUFJSSxNQUFNO0lBQzdCLE9BQU9KO0FBQ1Q7QUFFTyxlQUFlSyxhQUFhQyxRQUFnQjtJQUNqRCxNQUFNQyxPQUFPLE1BQU1ULHVEQUFjLENBQUM7SUFDbEMsT0FBT0Esb0RBQVcsQ0FBQ1EsVUFBVUM7QUFDL0I7QUFFTyxlQUFlRyxnQkFBZ0JKLFFBQWdCLEVBQUVLLE1BQWM7SUFDcEUsT0FBT2IsdURBQWMsQ0FBQ1EsVUFBVUs7QUFDbEM7QUFFQSxrREFBa0Q7QUFDM0MsU0FBU0UsVUFBVUMsT0FBbUIsRUFBRUMsWUFBb0IsSUFBSTtJQUNyRSxPQUFPLHdEQUFpQixDQUFDRCxTQUFTZixnQkFBZ0I7UUFBRWdCO0lBQVU7QUFDaEU7QUFFTyxNQUFNRSxjQUFjLENBQUNDO0lBQzFCLElBQUk7UUFDRixPQUFPckIsMERBQVUsQ0FBQ3FCLE9BQU9uQjtJQUMzQixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRixFQUFDO0FBRU0sTUFBTXFCLGNBQWMsQ0FBQ0Y7SUFDMUIsSUFBSSxDQUFDQSxPQUFPLE1BQU0sSUFBSWQsTUFBTTtJQUU1QixNQUFNaUIsVUFBVUosWUFBWUM7SUFDNUIsSUFBSSxDQUFDRyxTQUFTLE1BQU0sSUFBSWpCLE1BQU07SUFFOUIsT0FBT2lCO0FBQ1QsRUFBQztBQUVNLE1BQU1DLGNBQWMsQ0FBQ0osT0FBc0JLO0lBQ2hELE1BQU1DLE9BQU9KLFlBQVlGO0lBRXpCLElBQUksQ0FBQ0ssYUFBYUUsUUFBUSxDQUFDRCxLQUFLRSxJQUFJLEdBQUc7UUFDckMsTUFBTSxJQUFJdEIsTUFBTTtJQUNsQjtJQUVBLE9BQU9vQjtBQUNULEVBQUM7QUFFTSxNQUFNRyxpQkFBaUIsQ0FBQ1Q7SUFDN0IsTUFBTU0sT0FBT0osWUFBWUY7SUFDekIsSUFBSSxDQUFDTSxLQUFLSSxTQUFTLEVBQUUsTUFBTSxJQUFJeEIsTUFBTTtJQUNyQyxPQUFPb0IsS0FBS0ksU0FBUztBQUN2QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHJtcy1iYWNrZW5kLy4vc3JjL2FwcC9saWIvYXV0aC50cz8wMDgzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvbGliL2F1dGgudHNcclxuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXHJcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnXHJcblxyXG5leHBvcnQgdHlwZSBKd3RQYXlsb2FkID0ge1xyXG4gIHVzZXJJZDogc3RyaW5nXHJcbiAgZW1haWw6IHN0cmluZ1xyXG4gIHJvbGU6IHN0cmluZ1xyXG4gIGNvbXBhbnlJZD86IHN0cmluZyB8IG51bGxcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Snd0U2VjcmV0KCkge1xyXG4gIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVRcclxuICBpZiAoIXNlY3JldCkgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQnKVxyXG4gIHJldHVybiBzZWNyZXRcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKSB7XHJcbiAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKVxyXG4gIHJldHVybiBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbXBhcmVQYXNzd29yZChwYXNzd29yZDogc3RyaW5nLCBoYXNoZWQ6IHN0cmluZykge1xyXG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaGVkKVxyXG59XHJcblxyXG4vLyB0eXBlIGNhc3QgdG8gYXZvaWQganNvbndlYnRva2VuIG92ZXJsb2FkIGlzc3Vlc1xyXG5leHBvcnQgZnVuY3Rpb24gc2lnblRva2VuKHBheWxvYWQ6IEp3dFBheWxvYWQsIGV4cGlyZXNJbjogc3RyaW5nID0gJzdkJykge1xyXG4gIHJldHVybiAoand0IGFzIGFueSkuc2lnbihwYXlsb2FkLCBnZXRKd3RTZWNyZXQoKSwgeyBleHBpcmVzSW4gfSkgYXMgc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB2ZXJpZnlUb2tlbiA9ICh0b2tlbjogc3RyaW5nKTogSnd0UGF5bG9hZCB8IG51bGwgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgZ2V0Snd0U2VjcmV0KCkpIGFzIEp3dFBheWxvYWRcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVxdWlyZUF1dGggPSAodG9rZW46IHN0cmluZyB8IG51bGwpID0+IHtcclxuICBpZiAoIXRva2VuKSB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJylcclxuXHJcbiAgY29uc3QgZGVjb2RlZCA9IHZlcmlmeVRva2VuKHRva2VuKVxyXG4gIGlmICghZGVjb2RlZCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIG9yIGV4cGlyZWQgdG9rZW4nKVxyXG5cclxuICByZXR1cm4gZGVjb2RlZFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVxdWlyZVJvbGUgPSAodG9rZW46IHN0cmluZyB8IG51bGwsIGFsbG93ZWRSb2xlczogc3RyaW5nW10pID0+IHtcclxuICBjb25zdCB1c2VyID0gcmVxdWlyZUF1dGgodG9rZW4pXHJcblxyXG4gIGlmICghYWxsb3dlZFJvbGVzLmluY2x1ZGVzKHVzZXIucm9sZSkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zJylcclxuICB9XHJcblxyXG4gIHJldHVybiB1c2VyXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZXF1aXJlQ29tcGFueSA9ICh0b2tlbjogc3RyaW5nIHwgbnVsbCkgPT4ge1xyXG4gIGNvbnN0IHVzZXIgPSByZXF1aXJlQXV0aCh0b2tlbilcclxuICBpZiAoIXVzZXIuY29tcGFueUlkKSB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBhbnkgY29udGV4dCBtaXNzaW5nJylcclxuICByZXR1cm4gdXNlci5jb21wYW55SWRcclxufVxyXG4iXSwibmFtZXMiOlsiand0IiwiYmNyeXB0IiwiZ2V0Snd0U2VjcmV0Iiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJFcnJvciIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwic2FsdCIsImdlblNhbHQiLCJoYXNoIiwiY29tcGFyZVBhc3N3b3JkIiwiaGFzaGVkIiwiY29tcGFyZSIsInNpZ25Ub2tlbiIsInBheWxvYWQiLCJleHBpcmVzSW4iLCJzaWduIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsInZlcmlmeSIsInJlcXVpcmVBdXRoIiwiZGVjb2RlZCIsInJlcXVpcmVSb2xlIiwiYWxsb3dlZFJvbGVzIiwidXNlciIsImluY2x1ZGVzIiwicm9sZSIsInJlcXVpcmVDb21wYW55IiwiY29tcGFueUlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/cors.ts":
/*!*****************************!*\
  !*** ./src/app/lib/cors.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCorsHeaders: () => (/* binding */ getCorsHeaders),\n/* harmony export */   handleCorsOptions: () => (/* binding */ handleCorsOptions),\n/* harmony export */   withCors: () => (/* binding */ withCors)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n// src/app/lib/cors.ts\n\nconst allowedOrigins = [\n    \"http://localhost:5173\",\n    \"http://localhost:5173\" || 0\n].filter(Boolean);\nfunction resolveOrigin(origin) {\n    if (!origin) return allowedOrigins[0];\n    if (allowedOrigins.includes(origin)) return origin;\n    return undefined;\n}\nfunction getCorsHeaders(origin) {\n    const resolvedOrigin = resolveOrigin(origin);\n    const headers = {\n        \"Access-Control-Allow-Methods\": \"GET,POST,PUT,PATCH,DELETE,OPTIONS\",\n        \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n        \"Access-Control-Allow-Credentials\": \"true\"\n    };\n    if (resolvedOrigin) {\n        headers[\"Access-Control-Allow-Origin\"] = resolvedOrigin;\n    }\n    return headers;\n}\nfunction withCors(res, origin) {\n    const headers = getCorsHeaders(origin);\n    Object.entries(headers).forEach(([key, value])=>{\n        res.headers.set(key, value);\n    });\n    return res;\n}\nfunction handleCorsOptions(req) {\n    const origin = req.headers.get(\"origin\");\n    const res = new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200\n    });\n    return withCors(res, origin);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi9jb3JzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxzQkFBc0I7QUFDaUM7QUFFdkQsTUFBTUMsaUJBQWlCO0lBQ3JCO0lBQ0FDLHVCQUFvQyxJQUFJO0NBQ3pDLENBQUNHLE1BQU0sQ0FBQ0M7QUFFVCxTQUFTQyxjQUFjQyxNQUFxQjtJQUMxQyxJQUFJLENBQUNBLFFBQVEsT0FBT1AsY0FBYyxDQUFDLEVBQUU7SUFDckMsSUFBSUEsZUFBZVEsUUFBUSxDQUFDRCxTQUFTLE9BQU9BO0lBQzVDLE9BQU9FO0FBQ1Q7QUFFTyxTQUFTQyxlQUFlSCxNQUFxQjtJQUNsRCxNQUFNSSxpQkFBaUJMLGNBQWNDO0lBRXJDLE1BQU1LLFVBQWtDO1FBQ3RDLGdDQUFnQztRQUNoQyxnQ0FBZ0M7UUFDaEMsb0NBQW9DO0lBQ3RDO0lBRUEsSUFBSUQsZ0JBQWdCO1FBQ2xCQyxPQUFPLENBQUMsOEJBQThCLEdBQUdEO0lBQzNDO0lBRUEsT0FBT0M7QUFDVDtBQUVPLFNBQVNDLFNBQVNDLEdBQWlCLEVBQUVQLE1BQXFCO0lBQy9ELE1BQU1LLFVBQVVGLGVBQWVIO0lBQy9CUSxPQUFPQyxPQUFPLENBQUNKLFNBQVNLLE9BQU8sQ0FBQyxDQUFDLENBQUNDLEtBQUtDLE1BQU07UUFDM0NMLElBQUlGLE9BQU8sQ0FBQ1EsR0FBRyxDQUFDRixLQUFLQztJQUN2QjtJQUNBLE9BQU9MO0FBQ1Q7QUFFTyxTQUFTTyxrQkFBa0JDLEdBQWdCO0lBQ2hELE1BQU1mLFNBQVNlLElBQUlWLE9BQU8sQ0FBQ1csR0FBRyxDQUFDO0lBQy9CLE1BQU1ULE1BQU0sSUFBSWYscURBQVlBLENBQUMsTUFBTTtRQUFFeUIsUUFBUTtJQUFJO0lBQ2pELE9BQU9YLFNBQVNDLEtBQUtQO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHJtcy1iYWNrZW5kLy4vc3JjL2FwcC9saWIvY29ycy50cz8wMmQ4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9hcHAvbGliL2NvcnMudHNcclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5cclxuY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBbXHJcbiAgJ2h0dHA6Ly9sb2NhbGhvc3Q6NTE3MycsXHJcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRlJPTlRFTkRfVVJMIHx8ICcnLFxyXG5dLmZpbHRlcihCb29sZWFuKVxyXG5cclxuZnVuY3Rpb24gcmVzb2x2ZU9yaWdpbihvcmlnaW46IHN0cmluZyB8IG51bGwpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG4gIGlmICghb3JpZ2luKSByZXR1cm4gYWxsb3dlZE9yaWdpbnNbMF1cclxuICBpZiAoYWxsb3dlZE9yaWdpbnMuaW5jbHVkZXMob3JpZ2luKSkgcmV0dXJuIG9yaWdpblxyXG4gIHJldHVybiB1bmRlZmluZWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvcnNIZWFkZXJzKG9yaWdpbjogc3RyaW5nIHwgbnVsbCkge1xyXG4gIGNvbnN0IHJlc29sdmVkT3JpZ2luID0gcmVzb2x2ZU9yaWdpbihvcmlnaW4pXHJcblxyXG4gIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQsUE9TVCxQVVQsUEFUQ0gsREVMRVRFLE9QVElPTlMnLFxyXG4gICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJyxcclxuICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFscyc6ICd0cnVlJyxcclxuICB9XHJcblxyXG4gIGlmIChyZXNvbHZlZE9yaWdpbikge1xyXG4gICAgaGVhZGVyc1snQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJ10gPSByZXNvbHZlZE9yaWdpblxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGhlYWRlcnNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDb3JzKHJlczogTmV4dFJlc3BvbnNlLCBvcmlnaW46IHN0cmluZyB8IG51bGwpIHtcclxuICBjb25zdCBoZWFkZXJzID0gZ2V0Q29yc0hlYWRlcnMob3JpZ2luKVxyXG4gIE9iamVjdC5lbnRyaWVzKGhlYWRlcnMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xyXG4gICAgcmVzLmhlYWRlcnMuc2V0KGtleSwgdmFsdWUpXHJcbiAgfSlcclxuICByZXR1cm4gcmVzXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVDb3JzT3B0aW9ucyhyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3Qgb3JpZ2luID0gcmVxLmhlYWRlcnMuZ2V0KCdvcmlnaW4nKVxyXG4gIGNvbnN0IHJlcyA9IG5ldyBOZXh0UmVzcG9uc2UobnVsbCwgeyBzdGF0dXM6IDIwMCB9KVxyXG4gIHJldHVybiB3aXRoQ29ycyhyZXMsIG9yaWdpbilcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYWxsb3dlZE9yaWdpbnMiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfRlJPTlRFTkRfVVJMIiwiZmlsdGVyIiwiQm9vbGVhbiIsInJlc29sdmVPcmlnaW4iLCJvcmlnaW4iLCJpbmNsdWRlcyIsInVuZGVmaW5lZCIsImdldENvcnNIZWFkZXJzIiwicmVzb2x2ZWRPcmlnaW4iLCJoZWFkZXJzIiwid2l0aENvcnMiLCJyZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInZhbHVlIiwic2V0IiwiaGFuZGxlQ29yc09wdGlvbnMiLCJyZXEiLCJnZXQiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/cors.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/db.ts":
/*!***************************!*\
  !*** ./src/app/lib/db.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/adapter-pg */ \"@prisma/adapter-pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_1__, pg__WEBPACK_IMPORTED_MODULE_2__]);\n([_prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_1__, pg__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// src/app/lib/db.ts\n\n\n\n\n\n// Make TS happy on globalThis\nconst globalForPrisma = globalThis;\n// Load Aiven CA certificate\nconst caPath = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"certs\", \"aiven-ca.pem\");\nconst ca = fs__WEBPACK_IMPORTED_MODULE_3___default().readFileSync(caPath, \"utf8\");\n// Create a shared pg Pool with SSL using the CA\nconst pool = globalForPrisma.pool ?? new pg__WEBPACK_IMPORTED_MODULE_2__.Pool({\n    connectionString: process.env.DATABASE_URL,\n    ssl: {\n        // Use Aiven CA and keep verification ON\n        ca,\n        rejectUnauthorized: false\n    }\n});\nconst adapter = new _prisma_adapter_pg__WEBPACK_IMPORTED_MODULE_1__.PrismaPg(pool);\n// Prisma client using adapter-pg (Prisma 7 style)\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    adapter,\n    log: [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ]\n});\n// Prevent multiple clients in dev\nif (true) {\n    globalForPrisma.prisma = prisma;\n    globalForPrisma.pool = pool;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi9kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSxvQkFBb0I7QUFDeUI7QUFDQTtBQUNwQjtBQUNOO0FBQ0k7QUFPdkIsOEJBQThCO0FBQzlCLE1BQU1LLGtCQUFrQkM7QUFFeEIsNEJBQTRCO0FBQzVCLE1BQU1DLFNBQVNILGdEQUFTLENBQUNLLFFBQVFDLEdBQUcsSUFBSSxTQUFTO0FBQ2pELE1BQU1DLEtBQUtSLHNEQUFlLENBQUNJLFFBQVE7QUFFbkMsZ0RBQWdEO0FBQ2hELE1BQU1NLE9BQ0pSLGdCQUFnQlEsSUFBSSxJQUNwQixJQUFJWCxvQ0FBSUEsQ0FBQztJQUNQWSxrQkFBa0JMLFFBQVFNLEdBQUcsQ0FBQ0MsWUFBWTtJQUMxQ0MsS0FBSztRQUNILHdDQUF3QztRQUN4Q047UUFDQU8sb0JBQW9CO0lBQ3RCO0FBQ0Y7QUFFRixNQUFNQyxVQUFVLElBQUlsQix3REFBUUEsQ0FBQ1k7QUFFN0Isa0RBQWtEO0FBQzNDLE1BQU1PLFNBQ1hmLGdCQUFnQmUsTUFBTSxJQUN0QixJQUFJcEIsd0RBQVlBLENBQUM7SUFDZm1CO0lBQ0FFLEtBQUs7UUFBQztRQUFTO1FBQVM7S0FBTztBQUNqQyxHQUFFO0FBRUosa0NBQWtDO0FBQ2xDLElBQUlaLElBQXlCLEVBQWM7SUFDekNKLGdCQUFnQmUsTUFBTSxHQUFHQTtJQUN6QmYsZ0JBQWdCUSxJQUFJLEdBQUdBO0FBQ3pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHJtcy1iYWNrZW5kLy4vc3JjL2FwcC9saWIvZGIudHM/ODc1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBwL2xpYi9kYi50c1xyXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCdcclxuaW1wb3J0IHsgUHJpc21hUGcgfSBmcm9tICdAcHJpc21hL2FkYXB0ZXItcGcnXHJcbmltcG9ydCB7IFBvb2wgfSBmcm9tICdwZydcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5cclxudHlwZSBHbG9iYWxQcmlzbWEgPSB7XHJcbiAgcHJpc21hPzogUHJpc21hQ2xpZW50XHJcbiAgcG9vbD86IFBvb2xcclxufVxyXG5cclxuLy8gTWFrZSBUUyBoYXBweSBvbiBnbG9iYWxUaGlzXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyBHbG9iYWxQcmlzbWFcclxuXHJcbi8vIExvYWQgQWl2ZW4gQ0EgY2VydGlmaWNhdGVcclxuY29uc3QgY2FQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdjZXJ0cycsICdhaXZlbi1jYS5wZW0nKVxyXG5jb25zdCBjYSA9IGZzLnJlYWRGaWxlU3luYyhjYVBhdGgsICd1dGY4JylcclxuXHJcbi8vIENyZWF0ZSBhIHNoYXJlZCBwZyBQb29sIHdpdGggU1NMIHVzaW5nIHRoZSBDQVxyXG5jb25zdCBwb29sID1cclxuICBnbG9iYWxGb3JQcmlzbWEucG9vbCA/P1xyXG4gIG5ldyBQb29sKHtcclxuICAgIGNvbm5lY3Rpb25TdHJpbmc6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCxcclxuICAgIHNzbDoge1xyXG4gICAgICAvLyBVc2UgQWl2ZW4gQ0EgYW5kIGtlZXAgdmVyaWZpY2F0aW9uIE9OXHJcbiAgICAgIGNhLFxyXG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLFxyXG4gICAgfSxcclxuICB9KVxyXG5cclxuY29uc3QgYWRhcHRlciA9IG5ldyBQcmlzbWFQZyhwb29sKVxyXG5cclxuLy8gUHJpc21hIGNsaWVudCB1c2luZyBhZGFwdGVyLXBnIChQcmlzbWEgNyBzdHlsZSlcclxuZXhwb3J0IGNvbnN0IHByaXNtYTogUHJpc21hQ2xpZW50ID1cclxuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/XHJcbiAgbmV3IFByaXNtYUNsaWVudCh7XHJcbiAgICBhZGFwdGVyLFxyXG4gICAgbG9nOiBbJ3F1ZXJ5JywgJ2Vycm9yJywgJ3dhcm4nXSxcclxuICB9KVxyXG5cclxuLy8gUHJldmVudCBtdWx0aXBsZSBjbGllbnRzIGluIGRldlxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWFcclxuICBnbG9iYWxGb3JQcmlzbWEucG9vbCA9IHBvb2xcclxufVxyXG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiUHJpc21hUGciLCJQb29sIiwiZnMiLCJwYXRoIiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsImNhUGF0aCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiY2EiLCJyZWFkRmlsZVN5bmMiLCJwb29sIiwiY29ubmVjdGlvblN0cmluZyIsImVudiIsIkRBVEFCQVNFX1VSTCIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsImFkYXB0ZXIiLCJwcmlzbWEiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/email.ts":
/*!******************************!*\
  !*** ./src/app/lib/email.ts ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendPayrollNotificationEmail: () => (/* binding */ sendPayrollNotificationEmail)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n/* harmony import */ var _app_lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/lib/db */ \"(rsc)/./src/app/lib/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_app_lib_db__WEBPACK_IMPORTED_MODULE_1__]);\n_app_lib_db__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n    host: process.env.SMTP_HOST || \"smtp.gmail.com\",\n    port: parseInt(process.env.SMTP_PORT || \"587\"),\n    secure: false,\n    auth: {\n        user: process.env.SMTP_USER,\n        pass: process.env.SMTP_PASS\n    }\n});\nasync function sendPayrollNotificationEmail(staffRecord, payroll) {\n    // Fetch company details\n    const company = await _app_lib_db__WEBPACK_IMPORTED_MODULE_1__.prisma.company.findUnique({\n        where: {\n            id: staffRecord.companyId\n        }\n    });\n    const loginLink = `${process.env.NEXTAUTH_URL}/profile`;\n    const mailOptions = {\n        from: company?.email || process.env.SMTP_FROM || \"no-reply@hrms.com\",\n        to: staffRecord.email,\n        subject: `Your Payslip for ${payroll.month} ${payroll.year}`,\n        html: `\r\n      <html>\r\n      <body style=\"font-family: Arial, sans-serif;\">\r\n        <div style=\"max-width: 600px; margin: auto;\">\r\n          <div style=\"background-color: #2c5530; color: white; padding: 20px;\">\r\n            <h1 style=\"margin:0;\">${company?.companyName || \"Your Company\"}</h1>\r\n            <h3 style=\"margin:0;\">Payslip Notification</h3>\r\n          </div>\r\n\r\n          <div style=\"padding: 20px; background: #f9f9f9;\">\r\n            <p>Hello ${staffRecord.firstName} ${staffRecord.lastName},</p>\r\n            <p>Your payslip for <strong>${payroll.month} ${payroll.year}</strong> is ready.</p>\r\n\r\n            <p><strong>Net Salary:</strong> ₦${Number(payroll.netSalary || payroll.netPay).toLocaleString(\"en-NG\", {\n            minimumFractionDigits: 2\n        })}</p>\r\n\r\n            <p>Department: ${staffRecord.department}</p>\r\n\r\n            <p style=\"text-align:center; margin-top:20px;\">\r\n              <a href=\"${loginLink}\"\r\n                 style=\"background:#2c5530;color:white;padding:10px 20px;\r\n                 border-radius:6px;text-decoration:none;\">\r\n                View Payslip\r\n              </a>\r\n            </p>\r\n\r\n            <p>Best regards,<br>${company?.companyName} HR</p>\r\n          </div>\r\n        </div>\r\n      </body>\r\n      </html>\r\n    `\n    };\n    await transporter.sendMail(mailOptions);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi9lbWFpbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBbUM7QUFDRTtBQUVyQyxNQUFNRSxjQUFjRix1REFBMEIsQ0FBQztJQUM3Q0ksTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxTQUFTLElBQUk7SUFDL0JDLE1BQU1DLFNBQVNKLFFBQVFDLEdBQUcsQ0FBQ0ksU0FBUyxJQUFJO0lBQ3hDQyxRQUFRO0lBQ1JDLE1BQU07UUFDSkMsTUFBTVIsUUFBUUMsR0FBRyxDQUFDUSxTQUFTO1FBQzNCQyxNQUFNVixRQUFRQyxHQUFHLENBQUNVLFNBQVM7SUFDN0I7QUFDRjtBQUVPLGVBQWVDLDZCQUE2QkMsV0FBZ0IsRUFBRUMsT0FBWTtJQUMvRSx3QkFBd0I7SUFDeEIsTUFBTUMsVUFBVSxNQUFNbkIsK0NBQU1BLENBQUNtQixPQUFPLENBQUNDLFVBQVUsQ0FBQztRQUM5Q0MsT0FBTztZQUFFQyxJQUFJTCxZQUFZTSxTQUFTO1FBQUM7SUFDckM7SUFFQSxNQUFNQyxZQUFZLENBQUMsRUFBRXBCLFFBQVFDLEdBQUcsQ0FBQ29CLFlBQVksQ0FBQyxRQUFRLENBQUM7SUFFdkQsTUFBTUMsY0FBYztRQUNsQkMsTUFBTVIsU0FBU1MsU0FBU3hCLFFBQVFDLEdBQUcsQ0FBQ3dCLFNBQVMsSUFBSTtRQUNqREMsSUFBSWIsWUFBWVcsS0FBSztRQUNyQkcsU0FBUyxDQUFDLGlCQUFpQixFQUFFYixRQUFRYyxLQUFLLENBQUMsQ0FBQyxFQUFFZCxRQUFRZSxJQUFJLENBQUMsQ0FBQztRQUM1REMsTUFBTSxDQUFDOzs7OztrQ0FLdUIsRUFBRWYsU0FBU2dCLGVBQWUsZUFBZTs7Ozs7cUJBS3RELEVBQUVsQixZQUFZbUIsU0FBUyxDQUFDLENBQUMsRUFBRW5CLFlBQVlvQixRQUFRLENBQUM7d0NBQzdCLEVBQUVuQixRQUFRYyxLQUFLLENBQUMsQ0FBQyxFQUFFZCxRQUFRZSxJQUFJLENBQUM7OzZDQUUzQixFQUFFSyxPQUFPcEIsUUFBUXFCLFNBQVMsSUFBSXJCLFFBQVFzQixNQUFNLEVBQzFFQyxjQUFjLENBQUMsU0FBUztZQUFFQyx1QkFBdUI7UUFBRSxHQUFHOzsyQkFFMUMsRUFBRXpCLFlBQVkwQixVQUFVLENBQUM7Ozt1QkFHN0IsRUFBRW5CLFVBQVU7Ozs7Ozs7Z0NBT0gsRUFBRUwsU0FBU2dCLFlBQVk7Ozs7O0lBS25ELENBQUM7SUFDSDtJQUVBLE1BQU1sQyxZQUFZMkMsUUFBUSxDQUFDbEI7QUFDN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ocm1zLWJhY2tlbmQvLi9zcmMvYXBwL2xpYi9lbWFpbC50cz8zMGEzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInXHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvYXBwL2xpYi9kYidcclxuXHJcbmNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gIGhvc3Q6IHByb2Nlc3MuZW52LlNNVFBfSE9TVCB8fCAnc210cC5nbWFpbC5jb20nLFxyXG4gIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LlNNVFBfUE9SVCB8fCAnNTg3JyksXHJcbiAgc2VjdXJlOiBmYWxzZSxcclxuICBhdXRoOiB7XHJcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5TTVRQX1VTRVIsXHJcbiAgICBwYXNzOiBwcm9jZXNzLmVudi5TTVRQX1BBU1MsXHJcbiAgfSxcclxufSlcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kUGF5cm9sbE5vdGlmaWNhdGlvbkVtYWlsKHN0YWZmUmVjb3JkOiBhbnksIHBheXJvbGw6IGFueSkge1xyXG4gIC8vIEZldGNoIGNvbXBhbnkgZGV0YWlsc1xyXG4gIGNvbnN0IGNvbXBhbnkgPSBhd2FpdCBwcmlzbWEuY29tcGFueS5maW5kVW5pcXVlKHtcclxuICAgIHdoZXJlOiB7IGlkOiBzdGFmZlJlY29yZC5jb21wYW55SWQgfVxyXG4gIH0pXHJcblxyXG4gIGNvbnN0IGxvZ2luTGluayA9IGAke3Byb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTH0vcHJvZmlsZWBcclxuXHJcbiAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XHJcbiAgICBmcm9tOiBjb21wYW55Py5lbWFpbCB8fCBwcm9jZXNzLmVudi5TTVRQX0ZST00gfHwgJ25vLXJlcGx5QGhybXMuY29tJyxcclxuICAgIHRvOiBzdGFmZlJlY29yZC5lbWFpbCxcclxuICAgIHN1YmplY3Q6IGBZb3VyIFBheXNsaXAgZm9yICR7cGF5cm9sbC5tb250aH0gJHtwYXlyb2xsLnllYXJ9YCxcclxuICAgIGh0bWw6IGBcclxuICAgICAgPGh0bWw+XHJcbiAgICAgIDxib2R5IHN0eWxlPVwiZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmO1wiPlxyXG4gICAgICAgIDxkaXYgc3R5bGU9XCJtYXgtd2lkdGg6IDYwMHB4OyBtYXJnaW46IGF1dG87XCI+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogIzJjNTUzMDsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAyMHB4O1wiPlxyXG4gICAgICAgICAgICA8aDEgc3R5bGU9XCJtYXJnaW46MDtcIj4ke2NvbXBhbnk/LmNvbXBhbnlOYW1lIHx8ICdZb3VyIENvbXBhbnknfTwvaDE+XHJcbiAgICAgICAgICAgIDxoMyBzdHlsZT1cIm1hcmdpbjowO1wiPlBheXNsaXAgTm90aWZpY2F0aW9uPC9oMz5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9XCJwYWRkaW5nOiAyMHB4OyBiYWNrZ3JvdW5kOiAjZjlmOWY5O1wiPlxyXG4gICAgICAgICAgICA8cD5IZWxsbyAke3N0YWZmUmVjb3JkLmZpcnN0TmFtZX0gJHtzdGFmZlJlY29yZC5sYXN0TmFtZX0sPC9wPlxyXG4gICAgICAgICAgICA8cD5Zb3VyIHBheXNsaXAgZm9yIDxzdHJvbmc+JHtwYXlyb2xsLm1vbnRofSAke3BheXJvbGwueWVhcn08L3N0cm9uZz4gaXMgcmVhZHkuPC9wPlxyXG5cclxuICAgICAgICAgICAgPHA+PHN0cm9uZz5OZXQgU2FsYXJ5Ojwvc3Ryb25nPiDigqYke051bWJlcihwYXlyb2xsLm5ldFNhbGFyeSB8fCBwYXlyb2xsLm5ldFBheSlcclxuICAgICAgICAgICAgICAudG9Mb2NhbGVTdHJpbmcoJ2VuLU5HJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9PC9wPlxyXG5cclxuICAgICAgICAgICAgPHA+RGVwYXJ0bWVudDogJHtzdGFmZlJlY29yZC5kZXBhcnRtZW50fTwvcD5cclxuXHJcbiAgICAgICAgICAgIDxwIHN0eWxlPVwidGV4dC1hbGlnbjpjZW50ZXI7IG1hcmdpbi10b3A6MjBweDtcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPVwiJHtsb2dpbkxpbmt9XCJcclxuICAgICAgICAgICAgICAgICBzdHlsZT1cImJhY2tncm91bmQ6IzJjNTUzMDtjb2xvcjp3aGl0ZTtwYWRkaW5nOjEwcHggMjBweDtcclxuICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjZweDt0ZXh0LWRlY29yYXRpb246bm9uZTtcIj5cclxuICAgICAgICAgICAgICAgIFZpZXcgUGF5c2xpcFxyXG4gICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9wPlxyXG5cclxuICAgICAgICAgICAgPHA+QmVzdCByZWdhcmRzLDxicj4ke2NvbXBhbnk/LmNvbXBhbnlOYW1lfSBIUjwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2JvZHk+XHJcbiAgICAgIDwvaHRtbD5cclxuICAgIGAsXHJcbiAgfVxyXG5cclxuICBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucylcclxufVxyXG4iXSwibmFtZXMiOlsibm9kZW1haWxlciIsInByaXNtYSIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJTTVRQX0hPU1QiLCJwb3J0IiwicGFyc2VJbnQiLCJTTVRQX1BPUlQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsIlNNVFBfVVNFUiIsInBhc3MiLCJTTVRQX1BBU1MiLCJzZW5kUGF5cm9sbE5vdGlmaWNhdGlvbkVtYWlsIiwic3RhZmZSZWNvcmQiLCJwYXlyb2xsIiwiY29tcGFueSIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwiY29tcGFueUlkIiwibG9naW5MaW5rIiwiTkVYVEFVVEhfVVJMIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwiZW1haWwiLCJTTVRQX0ZST00iLCJ0byIsInN1YmplY3QiLCJtb250aCIsInllYXIiLCJodG1sIiwiY29tcGFueU5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIk51bWJlciIsIm5ldFNhbGFyeSIsIm5ldFBheSIsInRvTG9jYWxlU3RyaW5nIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwiZGVwYXJ0bWVudCIsInNlbmRNYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/email.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/payroll/generatePayslipPdf.ts":
/*!***************************************************!*\
  !*** ./src/app/lib/payroll/generatePayslipPdf.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generatePayslipPdf: () => (/* binding */ generatePayslipPdf)\n/* harmony export */ });\n/* harmony import */ var pdfkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdfkit */ \"pdfkit\");\n/* harmony import */ var pdfkit__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pdfkit__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n// src/app/lib/payroll/generatePayslipPdf.ts\n\n\n\n\nfunction formatCurrency(n) {\n    const safe = Number.isFinite(n) ? n : 0;\n    return `₦${safe.toLocaleString(\"en-NG\", {\n        minimumFractionDigits: 2\n    })}`;\n}\nasync function generatePayslipPdf(input) {\n    const { staff, payroll } = input;\n    const payslipDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"public\", \"payslips\");\n    await (0,fs_promises__WEBPACK_IMPORTED_MODULE_1__.mkdir)(payslipDir, {\n        recursive: true\n    });\n    const safeMonth = payroll.periodMonth.toString().padStart(2, \"0\");\n    const fileNameBase = `payslip-${staff.staffId}-${safeMonth}-${payroll.periodYear}`;\n    let fileName = `${fileNameBase}.pdf`;\n    let absPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(payslipDir, fileName);\n    if (fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(absPath)) {\n        fileName = `${fileNameBase}-${Date.now()}.pdf`;\n        absPath = path__WEBPACK_IMPORTED_MODULE_3___default().join(payslipDir, fileName);\n    }\n    const doc = new (pdfkit__WEBPACK_IMPORTED_MODULE_0___default())({\n        margin: 40,\n        size: \"A4\"\n    });\n    const writeStream = fs__WEBPACK_IMPORTED_MODULE_2___default().createWriteStream(absPath);\n    doc.pipe(writeStream);\n    // Header\n    doc.rect(0, 0, doc.page.width, 80).fill(\"#1e3a5f\");\n    doc.fillColor(\"#ffffff\").fontSize(18).text(staff.companyName || \"COMPANY NAME LTD\", 40, 25);\n    doc.fontSize(11).text(\"Salary Payslip\", 40, 50);\n    doc.fillColor(\"#000000\").fontSize(10).text(`Pay Period: ${safeMonth}/${payroll.periodYear}`, doc.page.width - 220, 30).text(`Generated: ${new Date().toLocaleDateString()}`, doc.page.width - 220, 45);\n    // Staff block\n    const top = 100;\n    doc.roundedRect(40, top, doc.page.width - 80, 90, 6).fill(\"#f3f6fb\");\n    doc.fillColor(\"#000000\").fontSize(11).text(`Staff Name: ${staff.firstName} ${staff.lastName}`, 55, top + 15).text(`Staff ID: ${staff.staffId}`, 55, top + 32).text(`Email: ${staff.email}`, 55, top + 49);\n    doc.text(`Department: ${staff.department || \"N/A\"}`, doc.page.width / 2 + 10, top + 15).text(`Designation: ${staff.designation || \"N/A\"}`, doc.page.width / 2 + 10, top + 32);\n    // Earnings section\n    let y = top + 115;\n    doc.fontSize(12).fillColor(\"#1e3a5f\").text(\"EARNINGS\", 40, y);\n    y += 15;\n    doc.moveTo(40, y).lineTo(doc.page.width - 40, y).stroke(\"#1e3a5f\");\n    y += 10;\n    const earnings = [\n        [\n            \"Basic Salary\",\n            payroll.basicSalary\n        ],\n        [\n            \"Housing Allowance\",\n            payroll.housingAllowance\n        ],\n        [\n            \"Transport Allowance\",\n            payroll.transportAllowance\n        ],\n        [\n            \"Dressing / Transportation\",\n            payroll.transportationAllowance\n        ],\n        [\n            \"Other Allowances\",\n            payroll.otherAllowances\n        ]\n    ];\n    doc.fontSize(10).fillColor(\"#000000\");\n    for (const [label, value] of earnings){\n        doc.text(label, 50, y);\n        doc.text(formatCurrency(value), doc.page.width - 180, y, {\n            width: 130,\n            align: \"right\"\n        });\n        y += 18;\n    }\n    doc.fontSize(11).fillColor(\"#0f5132\").text(\"Total Gross Pay\", 50, y + 5);\n    doc.fontSize(11).fillColor(\"#0f5132\").text(formatCurrency(payroll.grossPay), doc.page.width - 180, y + 5, {\n        width: 130,\n        align: \"right\"\n    });\n    y += 35;\n    // Deductions section\n    doc.fontSize(12).fillColor(\"#8b0000\").text(\"DEDUCTIONS\", 40, y);\n    y += 15;\n    doc.moveTo(40, y).lineTo(doc.page.width - 40, y).stroke(\"#8b0000\");\n    y += 10;\n    const deductions = [\n        [\n            \"PAYE\",\n            payroll.payee\n        ],\n        [\n            \"Pension\",\n            payroll.pension\n        ]\n    ];\n    doc.fontSize(10).fillColor(\"#000000\");\n    for (const [label, value] of deductions){\n        doc.text(label, 50, y);\n        doc.text(formatCurrency(value), doc.page.width - 180, y, {\n            width: 130,\n            align: \"right\"\n        });\n        y += 18;\n    }\n    const totalDeductions = payroll.payee + payroll.pension;\n    doc.fontSize(11).fillColor(\"#8b0000\").text(\"Total Deductions\", 50, y + 5);\n    doc.fontSize(11).fillColor(\"#8b0000\").text(formatCurrency(totalDeductions), doc.page.width - 180, y + 5, {\n        width: 130,\n        align: \"right\"\n    });\n    y += 45;\n    // Net Pay block\n    doc.roundedRect(40, y, doc.page.width - 80, 45, 6).fill(\"#e8f0ff\");\n    doc.fillColor(\"#0b1f44\").fontSize(14).text(\"NET SALARY\", 55, y + 13);\n    doc.fillColor(\"#0b1f44\").fontSize(14).text(formatCurrency(payroll.netPay), doc.page.width - 200, y + 13, {\n        width: 150,\n        align: \"right\"\n    });\n    y += 70;\n    // Attendance\n    doc.fillColor(\"#000000\").fontSize(10).text(`Working Days In Month: ${payroll.daysInMonth}`, 50, y).text(`Days Worked: ${payroll.daysWorked}`, doc.page.width / 2 + 10, y);\n    // Footer\n    doc.fontSize(8).fillColor(\"#666666\").text(\"This is a system-generated payslip. No signature required.\", 40, doc.page.height - 40, {\n        align: \"center\",\n        width: doc.page.width - 80\n    });\n    doc.end();\n    await new Promise((resolve, reject)=>{\n        writeStream.on(\"finish\", ()=>resolve());\n        writeStream.on(\"error\", reject);\n    });\n    const publicPath = `/payslips/${fileName}`;\n    return {\n        pdfPath: publicPath\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi9wYXlyb2xsL2dlbmVyYXRlUGF5c2xpcFBkZi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSw0Q0FBNEM7QUFDWjtBQUNHO0FBQ2hCO0FBQ0k7QUFHdkIsU0FBU0ksZUFBZUMsQ0FBUztJQUMvQixNQUFNQyxPQUFPQyxPQUFPQyxRQUFRLENBQUNILEtBQUtBLElBQUk7SUFDdEMsT0FBTyxDQUFDLENBQUMsRUFBRUMsS0FBS0csY0FBYyxDQUFDLFNBQVM7UUFBRUMsdUJBQXVCO0lBQUUsR0FBRyxDQUFDO0FBQ3pFO0FBRU8sZUFBZUMsbUJBQ3BCQyxLQUEyQjtJQUUzQixNQUFNLEVBQUVDLEtBQUssRUFBRUMsT0FBTyxFQUFFLEdBQUdGO0lBRTNCLE1BQU1HLGFBQWFaLGdEQUFTLENBQUNjLFFBQVFDLEdBQUcsSUFBSSxVQUFVO0lBQ3RELE1BQU1qQixrREFBS0EsQ0FBQ2MsWUFBWTtRQUFFSSxXQUFXO0lBQUs7SUFFMUMsTUFBTUMsWUFBWU4sUUFBUU8sV0FBVyxDQUFDQyxRQUFRLEdBQUdDLFFBQVEsQ0FBQyxHQUFHO0lBQzdELE1BQU1DLGVBQWUsQ0FBQyxRQUFRLEVBQUVYLE1BQU1ZLE9BQU8sQ0FBQyxDQUFDLEVBQUVMLFVBQVUsQ0FBQyxFQUFFTixRQUFRWSxVQUFVLENBQUMsQ0FBQztJQUNsRixJQUFJQyxXQUFXLENBQUMsRUFBRUgsYUFBYSxJQUFJLENBQUM7SUFDcEMsSUFBSUksVUFBVXpCLGdEQUFTLENBQUNZLFlBQVlZO0lBRXBDLElBQUl6QixvREFBYSxDQUFDMEIsVUFBVTtRQUMxQkQsV0FBVyxDQUFDLEVBQUVILGFBQWEsQ0FBQyxFQUFFTSxLQUFLQyxHQUFHLEdBQUcsSUFBSSxDQUFDO1FBQzlDSCxVQUFVekIsZ0RBQVMsQ0FBQ1ksWUFBWVk7SUFDbEM7SUFFQSxNQUFNSyxNQUFNLElBQUloQywrQ0FBV0EsQ0FBQztRQUFFaUMsUUFBUTtRQUFJQyxNQUFNO0lBQUs7SUFDckQsTUFBTUMsY0FBY2pD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RFIsSUFBSTRDLEdBQUc7SUFFUCxNQUFNLElBQUlDLFFBQWMsQ0FBQ0MsU0FBU0M7UUFDaEM1QyxZQUFZNkMsRUFBRSxDQUFDLFVBQVUsSUFBTUY7UUFDL0IzQyxZQUFZNkMsRUFBRSxDQUFDLFNBQVNEO0lBQzFCO0lBRUEsTUFBTUUsYUFBYSxDQUFDLFVBQVUsRUFBRXRELFNBQVMsQ0FBQztJQUMxQyxPQUFPO1FBQUV1RCxTQUFTRDtJQUFXO0FBQy9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHJtcy1iYWNrZW5kLy4vc3JjL2FwcC9saWIvcGF5cm9sbC9nZW5lcmF0ZVBheXNsaXBQZGYudHM/NjY5YiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBwL2xpYi9wYXlyb2xsL2dlbmVyYXRlUGF5c2xpcFBkZi50c1xyXG5pbXBvcnQgUERGRG9jdW1lbnQgZnJvbSAncGRma2l0J1xyXG5pbXBvcnQgeyBta2RpciB9IGZyb20gJ2ZzL3Byb21pc2VzJ1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnXHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXHJcbmltcG9ydCB0eXBlIHsgR2VuZXJhdGVQYXlzbGlwSW5wdXQgfSBmcm9tICcuL3R5cGVzJ1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0Q3VycmVuY3kobjogbnVtYmVyKSB7XHJcbiAgY29uc3Qgc2FmZSA9IE51bWJlci5pc0Zpbml0ZShuKSA/IG4gOiAwXHJcbiAgcmV0dXJuIGDigqYke3NhZmUudG9Mb2NhbGVTdHJpbmcoJ2VuLU5HJywgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9YFxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQYXlzbGlwUGRmKFxyXG4gIGlucHV0OiBHZW5lcmF0ZVBheXNsaXBJbnB1dFxyXG4pOiBQcm9taXNlPHsgcGRmUGF0aDogc3RyaW5nIH0+IHtcclxuICBjb25zdCB7IHN0YWZmLCBwYXlyb2xsIH0gPSBpbnB1dFxyXG5cclxuICBjb25zdCBwYXlzbGlwRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAncGF5c2xpcHMnKVxyXG4gIGF3YWl0IG1rZGlyKHBheXNsaXBEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXHJcblxyXG4gIGNvbnN0IHNhZmVNb250aCA9IHBheXJvbGwucGVyaW9kTW9udGgudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpXHJcbiAgY29uc3QgZmlsZU5hbWVCYXNlID0gYHBheXNsaXAtJHtzdGFmZi5zdGFmZklkfS0ke3NhZmVNb250aH0tJHtwYXlyb2xsLnBlcmlvZFllYXJ9YFxyXG4gIGxldCBmaWxlTmFtZSA9IGAke2ZpbGVOYW1lQmFzZX0ucGRmYFxyXG4gIGxldCBhYnNQYXRoID0gcGF0aC5qb2luKHBheXNsaXBEaXIsIGZpbGVOYW1lKVxyXG5cclxuICBpZiAoZnMuZXhpc3RzU3luYyhhYnNQYXRoKSkge1xyXG4gICAgZmlsZU5hbWUgPSBgJHtmaWxlTmFtZUJhc2V9LSR7RGF0ZS5ub3coKX0ucGRmYFxyXG4gICAgYWJzUGF0aCA9IHBhdGguam9pbihwYXlzbGlwRGlyLCBmaWxlTmFtZSlcclxuICB9XHJcblxyXG4gIGNvbnN0IGRvYyA9IG5ldyBQREZEb2N1bWVudCh7IG1hcmdpbjogNDAsIHNpemU6ICdBNCcgfSlcclxuICBjb25zdCB3cml0ZVN0cmVhbSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGFic1BhdGgpXHJcbiAgZG9jLnBpcGUod3JpdGVTdHJlYW0pXHJcblxyXG4gIC8vIEhlYWRlclxyXG4gIGRvYy5yZWN0KDAsIDAsIGRvYy5wYWdlLndpZHRoLCA4MCkuZmlsbCgnIzFlM2E1ZicpXHJcblxyXG4gIGRvYy5maWxsQ29sb3IoJyNmZmZmZmYnKS5mb250U2l6ZSgxOCkudGV4dChzdGFmZi5jb21wYW55TmFtZSB8fCAnQ09NUEFOWSBOQU1FIExURCcsIDQwLCAyNSlcclxuXHJcbiAgZG9jLmZvbnRTaXplKDExKS50ZXh0KCdTYWxhcnkgUGF5c2xpcCcsIDQwLCA1MClcclxuXHJcbiAgZG9jXHJcbiAgICAuZmlsbENvbG9yKCcjMDAwMDAwJylcclxuICAgIC5mb250U2l6ZSgxMClcclxuICAgIC50ZXh0KGBQYXkgUGVyaW9kOiAke3NhZmVNb250aH0vJHtwYXlyb2xsLnBlcmlvZFllYXJ9YCwgZG9jLnBhZ2Uud2lkdGggLSAyMjAsIDMwKVxyXG4gICAgLnRleHQoYEdlbmVyYXRlZDogJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfWAsIGRvYy5wYWdlLndpZHRoIC0gMjIwLCA0NSlcclxuXHJcbiAgLy8gU3RhZmYgYmxvY2tcclxuICBjb25zdCB0b3AgPSAxMDBcclxuICBkb2Mucm91bmRlZFJlY3QoNDAsIHRvcCwgZG9jLnBhZ2Uud2lkdGggLSA4MCwgOTAsIDYpLmZpbGwoJyNmM2Y2ZmInKVxyXG5cclxuICBkb2NcclxuICAgIC5maWxsQ29sb3IoJyMwMDAwMDAnKVxyXG4gICAgLmZvbnRTaXplKDExKVxyXG4gICAgLnRleHQoYFN0YWZmIE5hbWU6ICR7c3RhZmYuZmlyc3ROYW1lfSAke3N0YWZmLmxhc3ROYW1lfWAsIDU1LCB0b3AgKyAxNSlcclxuICAgIC50ZXh0KGBTdGFmZiBJRDogJHtzdGFmZi5zdGFmZklkfWAsIDU1LCB0b3AgKyAzMilcclxuICAgIC50ZXh0KGBFbWFpbDogJHtzdGFmZi5lbWFpbH1gLCA1NSwgdG9wICsgNDkpXHJcblxyXG4gIGRvY1xyXG4gICAgLnRleHQoYERlcGFydG1lbnQ6ICR7c3RhZmYuZGVwYXJ0bWVudCB8fCAnTi9BJ31gLCBkb2MucGFnZS53aWR0aCAvIDIgKyAxMCwgdG9wICsgMTUpXHJcbiAgICAudGV4dChgRGVzaWduYXRpb246ICR7c3RhZmYuZGVzaWduYXRpb24gfHwgJ04vQSd9YCwgZG9jLnBhZ2Uud2lkdGggLyAyICsgMTAsIHRvcCArIDMyKVxyXG5cclxuICAvLyBFYXJuaW5ncyBzZWN0aW9uXHJcbiAgbGV0IHkgPSB0b3AgKyAxMTVcclxuICBkb2MuZm9udFNpemUoMTIpLmZpbGxDb2xvcignIzFlM2E1ZicpLnRleHQoJ0VBUk5JTkdTJywgNDAsIHkpXHJcbiAgeSArPSAxNVxyXG4gIGRvYy5tb3ZlVG8oNDAsIHkpLmxpbmVUbyhkb2MucGFnZS53aWR0aCAtIDQwLCB5KS5zdHJva2UoJyMxZTNhNWYnKVxyXG4gIHkgKz0gMTBcclxuXHJcbiAgY29uc3QgZWFybmluZ3M6IFtzdHJpbmcsIG51bWJlcl1bXSA9IFtcclxuICAgIFsnQmFzaWMgU2FsYXJ5JywgcGF5cm9sbC5iYXNpY1NhbGFyeV0sXHJcbiAgICBbJ0hvdXNpbmcgQWxsb3dhbmNlJywgcGF5cm9sbC5ob3VzaW5nQWxsb3dhbmNlXSxcclxuICAgIFsnVHJhbnNwb3J0IEFsbG93YW5jZScsIHBheXJvbGwudHJhbnNwb3J0QWxsb3dhbmNlXSxcclxuICAgIFsnRHJlc3NpbmcgLyBUcmFuc3BvcnRhdGlvbicsIHBheXJvbGwudHJhbnNwb3J0YXRpb25BbGxvd2FuY2VdLFxyXG4gICAgWydPdGhlciBBbGxvd2FuY2VzJywgcGF5cm9sbC5vdGhlckFsbG93YW5jZXNdLFxyXG4gIF1cclxuXHJcbiAgZG9jLmZvbnRTaXplKDEwKS5maWxsQ29sb3IoJyMwMDAwMDAnKVxyXG4gIGZvciAoY29uc3QgW2xhYmVsLCB2YWx1ZV0gb2YgZWFybmluZ3MpIHtcclxuICAgIGRvYy50ZXh0KGxhYmVsLCA1MCwgeSlcclxuICAgIGRvYy50ZXh0KGZvcm1hdEN1cnJlbmN5KHZhbHVlKSwgZG9jLnBhZ2Uud2lkdGggLSAxODAsIHksIHtcclxuICAgICAgd2lkdGg6IDEzMCxcclxuICAgICAgYWxpZ246ICdyaWdodCcsXHJcbiAgICB9KVxyXG4gICAgeSArPSAxOFxyXG4gIH1cclxuXHJcbiAgZG9jLmZvbnRTaXplKDExKS5maWxsQ29sb3IoJyMwZjUxMzInKS50ZXh0KCdUb3RhbCBHcm9zcyBQYXknLCA1MCwgeSArIDUpXHJcbiAgZG9jXHJcbiAgICAuZm9udFNpemUoMTEpXHJcbiAgICAuZmlsbENvbG9yKCcjMGY1MTMyJylcclxuICAgIC50ZXh0KGZvcm1hdEN1cnJlbmN5KHBheXJvbGwuZ3Jvc3NQYXkpLCBkb2MucGFnZS53aWR0aCAtIDE4MCwgeSArIDUsIHtcclxuICAgICAgd2lkdGg6IDEzMCxcclxuICAgICAgYWxpZ246ICdyaWdodCcsXHJcbiAgICB9KVxyXG5cclxuICB5ICs9IDM1XHJcblxyXG4gIC8vIERlZHVjdGlvbnMgc2VjdGlvblxyXG4gIGRvYy5mb250U2l6ZSgxMikuZmlsbENvbG9yKCcjOGIwMDAwJykudGV4dCgnREVEVUNUSU9OUycsIDQwLCB5KVxyXG4gIHkgKz0gMTVcclxuICBkb2MubW92ZVRvKDQwLCB5KS5saW5lVG8oZG9jLnBhZ2Uud2lkdGggLSA0MCwgeSkuc3Ryb2tlKCcjOGIwMDAwJylcclxuICB5ICs9IDEwXHJcblxyXG4gIGNvbnN0IGRlZHVjdGlvbnM6IFtzdHJpbmcsIG51bWJlcl1bXSA9IFtcclxuICAgIFsnUEFZRScsIHBheXJvbGwucGF5ZWVdLFxyXG4gICAgWydQZW5zaW9uJywgcGF5cm9sbC5wZW5zaW9uXSxcclxuICBdXHJcblxyXG4gIGRvYy5mb250U2l6ZSgxMCkuZmlsbENvbG9yKCcjMDAwMDAwJylcclxuICBmb3IgKGNvbnN0IFtsYWJlbCwgdmFsdWVdIG9mIGRlZHVjdGlvbnMpIHtcclxuICAgIGRvYy50ZXh0KGxhYmVsLCA1MCwgeSlcclxuICAgIGRvYy50ZXh0KGZvcm1hdEN1cnJlbmN5KHZhbHVlKSwgZG9jLnBhZ2Uud2lkdGggLSAxODAsIHksIHtcclxuICAgICAgd2lkdGg6IDEzMCxcclxuICAgICAgYWxpZ246ICdyaWdodCcsXHJcbiAgICB9KVxyXG4gICAgeSArPSAxOFxyXG4gIH1cclxuXHJcbiAgY29uc3QgdG90YWxEZWR1Y3Rpb25zID0gcGF5cm9sbC5wYXllZSArIHBheXJvbGwucGVuc2lvblxyXG5cclxuICBkb2MuZm9udFNpemUoMTEpLmZpbGxDb2xvcignIzhiMDAwMCcpLnRleHQoJ1RvdGFsIERlZHVjdGlvbnMnLCA1MCwgeSArIDUpXHJcbiAgZG9jXHJcbiAgICAuZm9udFNpemUoMTEpXHJcbiAgICAuZmlsbENvbG9yKCcjOGIwMDAwJylcclxuICAgIC50ZXh0KGZvcm1hdEN1cnJlbmN5KHRvdGFsRGVkdWN0aW9ucyksIGRvYy5wYWdlLndpZHRoIC0gMTgwLCB5ICsgNSwge1xyXG4gICAgICB3aWR0aDogMTMwLFxyXG4gICAgICBhbGlnbjogJ3JpZ2h0JyxcclxuICAgIH0pXHJcblxyXG4gIHkgKz0gNDVcclxuXHJcbiAgLy8gTmV0IFBheSBibG9ja1xyXG4gIGRvYy5yb3VuZGVkUmVjdCg0MCwgeSwgZG9jLnBhZ2Uud2lkdGggLSA4MCwgNDUsIDYpLmZpbGwoJyNlOGYwZmYnKVxyXG5cclxuICBkb2MuZmlsbENvbG9yKCcjMGIxZjQ0JykuZm9udFNpemUoMTQpLnRleHQoJ05FVCBTQUxBUlknLCA1NSwgeSArIDEzKVxyXG5cclxuICBkb2NcclxuICAgIC5maWxsQ29sb3IoJyMwYjFmNDQnKVxyXG4gICAgLmZvbnRTaXplKDE0KVxyXG4gICAgLnRleHQoZm9ybWF0Q3VycmVuY3kocGF5cm9sbC5uZXRQYXkpLCBkb2MucGFnZS53aWR0aCAtIDIwMCwgeSArIDEzLCB7XHJcbiAgICAgIHdpZHRoOiAxNTAsXHJcbiAgICAgIGFsaWduOiAncmlnaHQnLFxyXG4gICAgfSlcclxuXHJcbiAgeSArPSA3MFxyXG5cclxuICAvLyBBdHRlbmRhbmNlXHJcbiAgZG9jXHJcbiAgICAuZmlsbENvbG9yKCcjMDAwMDAwJylcclxuICAgIC5mb250U2l6ZSgxMClcclxuICAgIC50ZXh0KGBXb3JraW5nIERheXMgSW4gTW9udGg6ICR7cGF5cm9sbC5kYXlzSW5Nb250aH1gLCA1MCwgeSlcclxuICAgIC50ZXh0KGBEYXlzIFdvcmtlZDogJHtwYXlyb2xsLmRheXNXb3JrZWR9YCwgZG9jLnBhZ2Uud2lkdGggLyAyICsgMTAsIHkpXHJcblxyXG4gIC8vIEZvb3RlclxyXG4gIGRvY1xyXG4gICAgLmZvbnRTaXplKDgpXHJcbiAgICAuZmlsbENvbG9yKCcjNjY2NjY2JylcclxuICAgIC50ZXh0KFxyXG4gICAgICAnVGhpcyBpcyBhIHN5c3RlbS1nZW5lcmF0ZWQgcGF5c2xpcC4gTm8gc2lnbmF0dXJlIHJlcXVpcmVkLicsXHJcbiAgICAgIDQwLFxyXG4gICAgICBkb2MucGFnZS5oZWlnaHQgLSA0MCxcclxuICAgICAgeyBhbGlnbjogJ2NlbnRlcicsIHdpZHRoOiBkb2MucGFnZS53aWR0aCAtIDgwIH1cclxuICAgIClcclxuXHJcbiAgZG9jLmVuZCgpXHJcblxyXG4gIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIHdyaXRlU3RyZWFtLm9uKCdmaW5pc2gnLCAoKSA9PiByZXNvbHZlKCkpXHJcbiAgICB3cml0ZVN0cmVhbS5vbignZXJyb3InLCByZWplY3QpXHJcbiAgfSlcclxuXHJcbiAgY29uc3QgcHVibGljUGF0aCA9IGAvcGF5c2xpcHMvJHtmaWxlTmFtZX1gXHJcbiAgcmV0dXJuIHsgcGRmUGF0aDogcHVibGljUGF0aCB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlBERkRvY3VtZW50IiwibWtkaXIiLCJmcyIsInBhdGgiLCJmb3JtYXRDdXJyZW5jeSIsIm4iLCJzYWZlIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJ0b0xvY2FsZVN0cmluZyIsIm1pbmltdW1GcmFjdGlvbkRpZ2l0cyIsImdlbmVyYXRlUGF5c2xpcFBkZiIsImlucHV0Iiwic3RhZmYiLCJwYXlyb2xsIiwicGF5c2xpcERpciIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwicmVjdXJzaXZlIiwic2FmZU1vbnRoIiwicGVyaW9kTW9udGgiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiZmlsZU5hbWVCYXNlIiwic3RhZmZJZCIsInBlcmlvZFllYXIiLCJmaWxlTmFtZSIsImFic1BhdGgiLCJleGlzdHNTeW5jIiwiRGF0ZSIsIm5vdyIsImRvYyIsIm1hcmdpbiIsInNpemUiLCJ3cml0ZVN0cmVhbSIsImNyZWF0ZVdyaXRlU3RyZWFtIiwicGlwZSIsInJlY3QiLCJwYWdlIiwid2lkdGgiLCJmaWxsIiwiZmlsbENvbG9yIiwiZm9udFNpemUiLCJ0ZXh0IiwiY29tcGFueU5hbWUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJ0b3AiLCJyb3VuZGVkUmVjdCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJkZXBhcnRtZW50IiwiZGVzaWduYXRpb24iLCJ5IiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiZWFybmluZ3MiLCJiYXNpY1NhbGFyeSIsImhvdXNpbmdBbGxvd2FuY2UiLCJ0cmFuc3BvcnRBbGxvd2FuY2UiLCJ0cmFuc3BvcnRhdGlvbkFsbG93YW5jZSIsIm90aGVyQWxsb3dhbmNlcyIsImxhYmVsIiwidmFsdWUiLCJhbGlnbiIsImdyb3NzUGF5IiwiZGVkdWN0aW9ucyIsInBheWVlIiwicGVuc2lvbiIsInRvdGFsRGVkdWN0aW9ucyIsIm5ldFBheSIsImRheXNJbk1vbnRoIiwiZGF5c1dvcmtlZCIsImhlaWdodCIsImVuZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib24iLCJwdWJsaWNQYXRoIiwicGRmUGF0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/payroll/generatePayslipPdf.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/lib/utils.ts":
/*!******************************!*\
  !*** ./src/app/lib/utils.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiResponse: () => (/* binding */ ApiResponse),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   handleApiError: () => (/* binding */ handleApiError),\n/* harmony export */   validateEmail: () => (/* binding */ validateEmail),\n/* harmony export */   validateStaffId: () => (/* binding */ validateStaffId)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nclass ApiResponse {\n    static success(data, message = \"Success\", status = 200) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message,\n            data\n        }, {\n            status\n        });\n    }\n    static error(message = \"Error\", status = 400, errors) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            message,\n            errors: errors || []\n        }, {\n            status\n        });\n    }\n    static unauthorized(message = \"Unauthorized\") {\n        return this.error(message, 401);\n    }\n    static forbidden(message = \"Forbidden\") {\n        return this.error(message, 403);\n    }\n    static notFound(message = \"Resource not found\") {\n        return this.error(message, 404);\n    }\n    static serverError(message = \"Internal server error\") {\n        return this.error(message, 500);\n    }\n}\nconst handleApiError = (error)=>{\n    console.error(\"API Error:\", error);\n    if (error instanceof Error) {\n        return ApiResponse.error(error.message);\n    }\n    return ApiResponse.serverError();\n};\nconst formatCurrency = (amount)=>{\n    return `₦${amount.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\")}`;\n};\nconst validateEmail = (email)=>{\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n};\nconst validateStaffId = (staffId)=>{\n    return staffId.length >= 3 && staffId.length <= 20;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xpYi91dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFFbkMsTUFBTUM7SUFDWCxPQUFPQyxRQUFRQyxJQUFTLEVBQUVDLFVBQWtCLFNBQVMsRUFBRUMsU0FBaUIsR0FBRyxFQUFFO1FBQzNFLE9BQU9MLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFDdkJKLFNBQVM7WUFDVEU7WUFDQUQ7UUFDRixHQUFHO1lBQUVFO1FBQU87SUFDZDtJQUVBLE9BQU9FLE1BQU1ILFVBQWtCLE9BQU8sRUFBRUMsU0FBaUIsR0FBRyxFQUFFRyxNQUFjLEVBQUU7UUFDNUUsT0FBT1IscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUN2QkosU0FBUztZQUNURTtZQUNBSSxRQUFRQSxVQUFVLEVBQUU7UUFDdEIsR0FBRztZQUFFSDtRQUFPO0lBQ2Q7SUFFQSxPQUFPSSxhQUFhTCxVQUFrQixjQUFjLEVBQUU7UUFDcEQsT0FBTyxJQUFJLENBQUNHLEtBQUssQ0FBQ0gsU0FBUztJQUM3QjtJQUVBLE9BQU9NLFVBQVVOLFVBQWtCLFdBQVcsRUFBRTtRQUM5QyxPQUFPLElBQUksQ0FBQ0csS0FBSyxDQUFDSCxTQUFTO0lBQzdCO0lBRUEsT0FBT08sU0FBU1AsVUFBa0Isb0JBQW9CLEVBQUU7UUFDdEQsT0FBTyxJQUFJLENBQUNHLEtBQUssQ0FBQ0gsU0FBUztJQUM3QjtJQUVBLE9BQU9RLFlBQVlSLFVBQWtCLHVCQUF1QixFQUFFO1FBQzVELE9BQU8sSUFBSSxDQUFDRyxLQUFLLENBQUNILFNBQVM7SUFDN0I7QUFDRjtBQUVPLE1BQU1TLGlCQUFpQixDQUFDTjtJQUM3Qk8sUUFBUVAsS0FBSyxDQUFDLGNBQWNBO0lBRTVCLElBQUlBLGlCQUFpQlEsT0FBTztRQUMxQixPQUFPZCxZQUFZTSxLQUFLLENBQUNBLE1BQU1ILE9BQU87SUFDeEM7SUFFQSxPQUFPSCxZQUFZVyxXQUFXO0FBQ2hDLEVBQUM7QUFFTSxNQUFNSSxpQkFBaUIsQ0FBQ0M7SUFDN0IsT0FBTyxDQUFDLENBQUMsRUFBRUEsT0FBT0MsT0FBTyxDQUFDLEdBQUdDLE9BQU8sQ0FBQyxxQkFBcUIsT0FBTyxDQUFDO0FBQ3BFLEVBQUM7QUFFTSxNQUFNQyxnQkFBZ0IsQ0FBQ0M7SUFDNUIsTUFBTUMsYUFBYTtJQUNuQixPQUFPQSxXQUFXQyxJQUFJLENBQUNGO0FBQ3pCLEVBQUM7QUFFTSxNQUFNRyxrQkFBa0IsQ0FBQ0M7SUFDOUIsT0FBT0EsUUFBUUMsTUFBTSxJQUFJLEtBQUtELFFBQVFDLE1BQU0sSUFBSTtBQUNsRCxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaHJtcy1iYWNrZW5kLy4vc3JjL2FwcC9saWIvdXRpbHMudHM/ZTZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuXHJcbmV4cG9ydCBjbGFzcyBBcGlSZXNwb25zZSB7XHJcbiAgc3RhdGljIHN1Y2Nlc3MoZGF0YTogYW55LCBtZXNzYWdlOiBzdHJpbmcgPSAnU3VjY2VzcycsIHN0YXR1czogbnVtYmVyID0gMjAwKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICBkYXRhXHJcbiAgICB9LCB7IHN0YXR1cyB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGVycm9yKG1lc3NhZ2U6IHN0cmluZyA9ICdFcnJvcicsIHN0YXR1czogbnVtYmVyID0gNDAwLCBlcnJvcnM/OiBhbnlbXSkge1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIG1lc3NhZ2UsXHJcbiAgICAgIGVycm9yczogZXJyb3JzIHx8IFtdXHJcbiAgICB9LCB7IHN0YXR1cyB9KVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIHVuYXV0aG9yaXplZChtZXNzYWdlOiBzdHJpbmcgPSAnVW5hdXRob3JpemVkJykge1xyXG4gICAgcmV0dXJuIHRoaXMuZXJyb3IobWVzc2FnZSwgNDAxKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGZvcmJpZGRlbihtZXNzYWdlOiBzdHJpbmcgPSAnRm9yYmlkZGVuJykge1xyXG4gICAgcmV0dXJuIHRoaXMuZXJyb3IobWVzc2FnZSwgNDAzKVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIG5vdEZvdW5kKG1lc3NhZ2U6IHN0cmluZyA9ICdSZXNvdXJjZSBub3QgZm91bmQnKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lcnJvcihtZXNzYWdlLCA0MDQpXHJcbiAgfVxyXG5cclxuICBzdGF0aWMgc2VydmVyRXJyb3IobWVzc2FnZTogc3RyaW5nID0gJ0ludGVybmFsIHNlcnZlciBlcnJvcicpIHtcclxuICAgIHJldHVybiB0aGlzLmVycm9yKG1lc3NhZ2UsIDUwMClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBoYW5kbGVBcGlFcnJvciA9IChlcnJvcjogYW55KSA9PiB7XHJcbiAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKVxyXG5cclxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgcmV0dXJuIEFwaVJlc3BvbnNlLmVycm9yKGVycm9yLm1lc3NhZ2UpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gQXBpUmVzcG9uc2Uuc2VydmVyRXJyb3IoKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybWF0Q3VycmVuY3kgPSAoYW1vdW50OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xyXG4gIHJldHVybiBg4oKmJHthbW91bnQudG9GaXhlZCgyKS5yZXBsYWNlKC9cXGQoPz0oXFxkezN9KStcXC4pL2csICckJiwnKX1gXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUVtYWlsID0gKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcclxuICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC9cclxuICByZXR1cm4gZW1haWxSZWdleC50ZXN0KGVtYWlsKVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGVTdGFmZklkID0gKHN0YWZmSWQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xyXG4gIHJldHVybiBzdGFmZklkLmxlbmd0aCA+PSAzICYmIHN0YWZmSWQubGVuZ3RoIDw9IDIwXHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiQXBpUmVzcG9uc2UiLCJzdWNjZXNzIiwiZGF0YSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJlcnJvcnMiLCJ1bmF1dGhvcml6ZWQiLCJmb3JiaWRkZW4iLCJub3RGb3VuZCIsInNlcnZlckVycm9yIiwiaGFuZGxlQXBpRXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJmb3JtYXRDdXJyZW5jeSIsImFtb3VudCIsInRvRml4ZWQiLCJyZXBsYWNlIiwidmFsaWRhdGVFbWFpbCIsImVtYWlsIiwiZW1haWxSZWdleCIsInRlc3QiLCJ2YWxpZGF0ZVN0YWZmSWQiLCJzdGFmZklkIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/exceljs","vendor-chunks/jszip","vendor-chunks/semver","vendor-chunks/bluebird","vendor-chunks/nodemailer","vendor-chunks/unzipper","vendor-chunks/@fast-csv","vendor-chunks/pako","vendor-chunks/uuid","vendor-chunks/readable-stream","vendor-chunks/fstream","vendor-chunks/lazystream","vendor-chunks/archiver-utils","vendor-chunks/duplexer2","vendor-chunks/jsonwebtoken","vendor-chunks/compress-commons","vendor-chunks/archiver","vendor-chunks/jws","vendor-chunks/tar-stream","vendor-chunks/readdir-glob","vendor-chunks/graceful-fs","vendor-chunks/zip-stream","vendor-chunks/xmlchars","vendor-chunks/glob","vendor-chunks/dayjs","vendor-chunks/crc32-stream","vendor-chunks/inherits","vendor-chunks/fs.realpath","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/buffer-indexof-polyfill","vendor-chunks/bl","vendor-chunks/binary","vendor-chunks/bcryptjs","vendor-chunks/async","vendor-chunks/wrappy","vendor-chunks/util-deprecate","vendor-chunks/traverse","vendor-chunks/tmp","vendor-chunks/string_decoder","vendor-chunks/saxes","vendor-chunks/safe-buffer","vendor-chunks/process-nextick-args","vendor-chunks/path-is-absolute","vendor-chunks/once","vendor-chunks/normalize-path","vendor-chunks/ms","vendor-chunks/mkdirp","vendor-chunks/minimatch","vendor-chunks/lodash.uniq","vendor-chunks/lodash.union","vendor-chunks/lodash.once","vendor-chunks/lodash.isundefined","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isnil","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isfunction","vendor-chunks/lodash.isequal","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/lodash.groupby","vendor-chunks/lodash.flatten","vendor-chunks/lodash.escaperegexp","vendor-chunks/lodash.difference","vendor-chunks/lodash.defaults","vendor-chunks/listenercount","vendor-chunks/lie","vendor-chunks/jwa","vendor-chunks/inflight","vendor-chunks/immediate","vendor-chunks/fs-constants","vendor-chunks/fast-csv","vendor-chunks/end-of-stream","vendor-chunks/crc-32","vendor-chunks/core-util-is","vendor-chunks/concat-map","vendor-chunks/chainsaw","vendor-chunks/buffers","vendor-chunks/buffer-equal-constant-time","vendor-chunks/buffer-crc32","vendor-chunks/brace-expansion","vendor-chunks/big-integer","vendor-chunks/balanced-match"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fpayroll%2Fupload%2Froute&page=%2Fapi%2Fpayroll%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpayroll%2Fupload%2Froute.ts&appDir=C%3A%5Chrms-project%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Chrms-project&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();