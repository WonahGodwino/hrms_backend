(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8333:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>s.a,__next_app__:()=>c,originalPathname:()=>u,pages:()=>p,routeModule:()=>m,tree:()=>d}),a(35480),a(32029),a(35866);var o=a(23191),r=a(88716),i=a(37922),s=a.n(i),n=a(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);a.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,35480)),"C:\\hrms-project\\src\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,32029)),"C:\\hrms-project\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],p=["C:\\hrms-project\\src\\app\\page.tsx"],u="/page",c={require:a,loadChunk:()=>Promise.resolve()},m=new o.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8690:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},56654:(e,t,a)=>{Promise.resolve().then(a.bind(a,22615))},35303:()=>{},22615:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var o=a(10326),r=a(17577);let i=[{id:"auth-register",group:"Auth",method:"POST",path:"/api/auth/register",title:"Register new user (admin-provisioned)",description:"SUPER_ADMIN (or authorized HR) can create a new login/staff account for a company. Multi-company aware: companyId is taken from the JWT token.",auth:"Authorization: Bearer <SUPER_ADMIN token>",input:'JSON body: { email, firstName, lastName, role ("HR" | "STAFF" | "SUPER_ADMIN"), department?, position? }',output:"JSON: { success, message, data: { user: { id, email, firstName, lastName, role, department, position, companyId } } }"},{id:"auth-complete-registration",group:"Auth",method:"POST",path:"/api/auth/complete-registration",title:"Staff complete registration",description:"First-time staff self-service registration. Staff enters staffId, email, and password. System validates against StaffRecord for a specific company and enables login.",auth:"No auth required",input:"JSON body: { staffId, email, password }",output:"JSON: { success, message, data: { token, user: { id, staffId, email, firstName, lastName, department, position, role, companyId } } }"},{id:"auth-login",group:"Auth",method:"POST",path:"/api/auth/login",title:"User login",description:"Logs in a staff / HR / SUPER_ADMIN account with email and password. Returns a JWT containing companyId so all requests are auto-scoped per company.",auth:"No auth required",input:"JSON body: { email, password }",output:"JSON: { success, message, data: { token, user: { id, staffId?, email, firstName, lastName, role, department?, position?, companyId }, company?: { id, companyName, email, phone } } }"},{id:"auth-me",group:"Auth",method:"GET",path:"/api/auth/me",title:"Get current user",description:"Returns the authenticated user and company based on the JWT. Multi-company aware: companyId is read from token.",auth:"Authorization: Bearer <token>",input:"No body",output:"JSON: { success, message, data: { user: { id, staffId?, email, firstName, lastName, role, companyId }, company?: { id, companyName, email, phone } } }"},{id:"staff-upload",group:"Staff",method:"POST",path:"/api/staff/upload",title:"Upload staff records",description:"HR uploads staff master data from Excel to create or update StaffRecord rows for the current company. The company is taken from the JWT (companyId).",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"multipart/form-data: file = .xlsx staff template (company-scoped via JWT companyId)",output:"JSON: { success, message, data: { uploadId, companyId, summary: { totalRecords, successful, failed }, errors?: [ { rowNumber, message } ] } }"},{id:"staff-records",group:"Staff",method:"GET",path:"/api/staff/records",title:"List staff records",description:"Returns a paginated list of staff records for the authenticated user’s company. Multi-company aware via JWT companyId.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"Optional query: page, pageSize, search",output:"JSON: { success, message, data: { companyId, items: [ { id, staffId, firstName, lastName, email, department, position, phone?, bankName?, accountNumber?, isActive } ], pagination: { page, pageSize, total } } }"},{id:"payroll-upload-post",group:"Payroll",method:"POST",path:"/api/payroll/upload",title:"Upload payroll and generate payslips",description:"HR uploads payroll Excel/CSV for one company. System parses rows, creates/updates Payroll entries, generates payslip PDFs (Payslip table), optionally sends notification emails, and records failed rows in PayrollUpload. Multi-company aware via JWT companyId.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:'multipart/form-data: file = .xlsx or .csv payroll file, sendEmails = "true" | "false"',output:"JSON: { success, message, data: { uploadId, companyId, results: { successful, failed, payslipsGenerated, emailsSent, errors: [ { rowNumber, message } ] }, summary: { totalProcessed, successful, failed, payslipsGenerated, emailsSent }, failedRecordsDownload?: string } }"},{id:"payroll-upload-get",group:"Payroll",method:"GET",path:"/api/payroll/upload",title:"Download payroll template",description:"Returns the standard payroll Excel template that HR should populate and upload for the current company.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token> (recommended)",input:"No body",output:"Excel file (.xlsx)"},{id:"payroll-download-failed",group:"Payroll",method:"GET",path:"/api/payroll/download-failed/[id]",title:"Download failed payroll records",description:"Downloads the Excel file containing all rows that could not be processed for a given PayrollUpload batch. Enforced by companyId from JWT.",auth:"Authorization: Bearer <HR | SUPER_ADMIN token>",input:"Path param: id = PayrollUpload.id",output:"Excel file (.xlsx) of failed rows, or JSON error if not found or not owned by your company."},{id:"profile-payslips",group:"Payslip & Profile",method:"GET",path:"/api/profile/payslips",title:"Get payslip history for logged-in staff",description:"Returns all payslips belonging to the authenticated staff member for their current company. Ideal for the staff self-service profile page.",auth:"Authorization: Bearer <STAFF | HR | SUPER_ADMIN token>",input:"No body",output:"JSON: { success, message, data: { staffId, email, companyId, payslips: [ { id, payrollId, month, year, grossPay, netPay, createdAt, fileName, downloadUrl } ] } }"},{id:"payslip-download",group:"Payslip & Profile",method:"GET",path:"/api/payslips/[id]/download",title:"Download a payslip PDF",description:"Streams a single payslip PDF. Staff can only download their own payslips for their company; HR/SUPER_ADMIN can download any payslip within their company.",auth:"Authorization: Bearer <token>",input:"Path param: id = Payslip.id",output:"PDF file (Content-Type: application/pdf) or JSON error if unauthorized or not in the same company."}];function s(){let e=(0,r.useMemo)(()=>Array.from(i.reduce((e,t)=>(e.has(t.group)||e.set(t.group,[]),e.get(t.group).push(t),e),new Map)),[]),[t,a]=(0,r.useState)(i[0]?.id??""),s=i.find(e=>e.id===t)??i[0],[n,l]=(0,r.useState)(s?.path??""),[d,p]=(0,r.useState)(""),[u,c]=(0,r.useState)(s?.method==="POST"?'{\n  "example": "value"\n}':""),[m,h]=(0,r.useState)(""),[f,y]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),b=e=>{let t=i.find(t=>t.id===e);a(e),t&&(l(t.path),"POST"===t.method?c('{ "example": "value" }'):c(""),h(""),x(null))},S=async()=>{if(s){y(!0),h(""),x(null);try{let e=n||s.path,t={};"POST"===s.method&&(t["Content-Type"]="application/json"),d.trim()&&(t.Authorization=`Bearer ${d.trim()}`);let a={method:s.method,headers:t};"POST"===s.method&&u.trim().length>0&&(a.body=u);let o=await fetch(e,a);if((o.headers.get("content-type")||"").includes("application/json")){let e=await o.json();h(JSON.stringify(e,null,2))}else{let e=await o.text();h(e)}o.ok||x(`HTTP ${o.status} – ${o.statusText}`)}catch(e){x(e?.message||"Request failed")}finally{y(!1)}}};return(0,o.jsxs)("div",{style:{padding:"2rem",fontFamily:"Arial, sans-serif"},children:[o.jsx("h1",{children:"\uD83D\uDE80 HRMS Backend System"}),(0,o.jsxs)("p",{children:["Your HR Management System backend is running. APIs are company-aware and use",o.jsx("code",{children:" companyId"})," from the JWT for scoping."]}),(0,o.jsxs)("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:[o.jsx("h2",{children:"\uD83D\uDCCB Available API Endpoints (from apiDocs.ts)"}),e.map(([e,t])=>(0,o.jsxs)("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"Auth"===e?"#f0f4ff":"Staff"===e?"#e8f4ff":"Payroll"===e?"#fff7e6":"#e8f5e8",borderRadius:"8px"},children:[(0,o.jsxs)("h3",{children:[e," APIs"]}),o.jsx("ul",{children:t.map(e=>(0,o.jsxs)("li",{style:{marginBottom:"0.75rem"},children:[(0,o.jsxs)("div",{children:[o.jsx("strong",{children:e.method})," ",o.jsx("code",{children:e.path})," – ",e.title]}),(0,o.jsxs)("div",{style:{fontSize:"0.9rem",marginLeft:"1rem"},children:[o.jsx("div",{children:e.description}),e.auth&&(0,o.jsxs)("div",{children:[o.jsx("span",{style:{fontWeight:600},children:"Auth:"})," ",e.auth]}),e.input&&(0,o.jsxs)("div",{children:[o.jsx("span",{style:{fontWeight:600},children:"Input:"})," ",e.input]}),e.output&&(0,o.jsxs)("div",{children:[o.jsx("span",{style:{fontWeight:600},children:"Output:"})," ",e.output]})]})]},e.id))})]},e))]}),(0,o.jsxs)("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#1e293b",color:"white",borderRadius:"8px"},children:[o.jsx("h2",{children:"\uD83E\uDDEA Try It – Test an API"}),(0,o.jsxs)("p",{style:{fontSize:"0.9rem",opacity:.9},children:["Pick an endpoint, enter a token (if needed), edit the path or body, and send a live request. On localhost this hits"," ",o.jsx("code",{children:"http://localhost:3000"}),". On Render it uses whatever host this page is deployed on (e.g. ",o.jsx("code",{children:"https://hrms-backend.onrender.com"}),")."]}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Endpoint"}),o.jsx("select",{value:t,onChange:e=>b(e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px"},children:i.map(e=>(0,o.jsxs)("option",{value:e.id,children:["[",e.group,"] ",e.method," ",e.path," – ",e.title]},e.id))})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem",flexWrap:"wrap"},children:[(0,o.jsxs)("div",{style:{minWidth:"90px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Method"}),o.jsx("input",{value:s?.method||"",readOnly:!0,style:{width:"100%",padding:"0.5rem",borderRadius:"4px",backgroundColor:"#0f172a",color:"white",border:"1px solid #475569"}})]}),(0,o.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Path (edit for [id] etc.)"}),o.jsx("input",{value:n,onChange:e=>l(e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #475569",backgroundColor:"#0f172a",color:"white"}})]})]}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Authorization Token (optional)"}),o.jsx("input",{value:d,onChange:e=>p(e.target.value),placeholder:"Paste JWT token here (without 'Bearer ')",style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #475569",backgroundColor:"#0f172a",color:"white"}}),(0,o.jsxs)("div",{style:{fontSize:"0.8rem",opacity:.7,marginTop:"0.25rem"},children:["If provided, request will send:"," ",o.jsx("code",{children:"Authorization: Bearer <token>"})]})]}),s?.method==="POST"&&(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Request Body (JSON)"}),o.jsx("textarea",{value:u,onChange:e=>c(e.target.value),rows:8,style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid #475569",backgroundColor:"#0f172a",color:"white",fontFamily:"monospace"}}),o.jsx("div",{style:{fontSize:"0.8rem",opacity:.7,marginTop:"0.25rem"},children:"This is sent as raw JSON. Make sure it’s valid JSON for your endpoint."})]}),o.jsx("div",{style:{marginTop:"1rem"},children:o.jsx("button",{onClick:S,disabled:f,style:{padding:"0.5rem 1.25rem",borderRadius:"999px",border:"none",backgroundColor:f?"#64748b":"#22c55e",color:"black",fontWeight:600,cursor:f?"default":"pointer"},children:f?"Sending...":"Send Request"})}),g&&o.jsx("div",{style:{marginTop:"0.75rem",padding:"0.5rem",borderRadius:"4px",backgroundColor:"#7f1d1d",color:"#fee2e2",fontSize:"0.85rem"},children:g}),(0,o.jsxs)("div",{style:{marginTop:"1rem"},children:[o.jsx("label",{style:{display:"block",marginBottom:"0.25rem"},children:"Response"}),o.jsx("pre",{style:{backgroundColor:"#0f172a",color:"#e5e7eb",padding:"0.75rem",borderRadius:"4px",minHeight:"120px",maxHeight:"400px",overflow:"auto",fontSize:"0.85rem"},children:m||"// Send a request to see the response here"})]})]}),(0,o.jsxs)("div",{style:{marginTop:"2rem",padding:"1rem",backgroundColor:"#e8f5e8",borderRadius:"8px"},children:[o.jsx("h2",{children:"✅ System Status: Running"}),o.jsx("p",{children:"All core API endpoints are available, multi-company aware, and ready to use."}),o.jsx("p",{children:"Use this page, Postman, Thunder Client, or curl to test locally or on Render."})]}),(0,o.jsxs)("div",{style:{marginTop:"2rem"},children:[o.jsx("h3",{children:"\uD83D\uDD27 Quick Test Commands"}),o.jsx("pre",{style:{backgroundColor:"#2d2d2d",color:"white",padding:"1rem",borderRadius:"4px",overflowX:"auto"},children:`# ============================
# AUTH LOGIN (LOCALHOST)
# ============================
curl -X POST http://localhost:3000/api/auth/login \\
  -H "Content-Type: application/json" \\
  -d '{"email": "admin@company.com", "password": "admin123"}'

# ============================
# AUTH LOGIN (RENDER)
# ============================
curl -X POST https://hrms-backend.onrender.com/api/auth/login \\
  -H "Content-Type: application/json" \\
  -d '{"email": "admin@company.com", "password": "admin123"}'


# ============================
# PAYROLL UPLOAD (LOCALHOST)
# ============================
curl -X POST http://localhost:3000/api/payroll/upload \\
  -H "Authorization: Bearer <HR_OR_ADMIN_TOKEN>" \\
  -F "file=@PAYROLL_FILE.xlsx" \\
  -F "sendEmails=true"

# ============================
# PAYROLL UPLOAD (RENDER)
# ============================
curl -X POST https://hrms-backend.onrender.com/api/payroll/upload \\
  -H "Authorization: Bearer <HR_OR_ADMIN_TOKEN>" \\
  -F "file=@PAYROLL_FILE.xlsx" \\
  -F "sendEmails=true"`})]})]})}},32029:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,metadata:()=>r});var o=a(19510);let r={title:"HRMS Backend System",description:"Human Resource Management System Backend"};function i({children:e}){return o.jsx("html",{lang:"en",children:o.jsx("body",{style:{margin:0,padding:0,backgroundColor:"#fff"},children:e})})}},35480:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});let o=(0,a(68570).createProxy)(String.raw`C:\hrms-project\src\app\page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),o=t.X(0,[377,471],()=>a(8333));module.exports=o})();